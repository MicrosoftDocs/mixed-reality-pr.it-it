---
title: Registrazione dell'animazione di input
description: Documentazione sul sistema di registrazione dell'animazione di input in MRTK
author: CDiaz-MS
ms.author: cadia
ms.date: 01/12/2021
keywords: Unity, HoloLens, HoloLens 2, realtà mista, sviluppo, MRTK,
ms.openlocfilehash: 6bdb764c5905352b9aec7c1512a73e727b60573a
ms.sourcegitcommit: f338b1f121a10577bcce08a174e462cdc86d5874
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/01/2021
ms.locfileid: "113176940"
---
# <a name="input-animation-recording"></a><span data-ttu-id="cb6dc-104">Registrazione dell'animazione di input</span><span class="sxs-lookup"><span data-stu-id="cb6dc-104">Input animation recording</span></span>

<span data-ttu-id="cb6dc-105">MRTK include un sistema di registrazione tramite il quale i dati di spostamento della testa e rilevamento della mano possono essere archiviati nei file di animazione.</span><span class="sxs-lookup"><span data-stu-id="cb6dc-105">MRTK features an recording system by which head movement and hand tracking data can be stored in animation files.</span></span> <span data-ttu-id="cb6dc-106">I dati registrati possono quindi essere riprodotti usando il sistema di [simulazione di input](input-simulation-service.md).</span><span class="sxs-lookup"><span data-stu-id="cb6dc-106">The recorded data can then be played back using the [input simulation system](input-simulation-service.md).</span></span>

<span data-ttu-id="cb6dc-107">La registrazione dell'input è uno strumento utile in diverse situazioni:</span><span class="sxs-lookup"><span data-stu-id="cb6dc-107">Recording input is a useful tool in a variety of situations:</span></span>

* <span data-ttu-id="cb6dc-108">Creazione di test automatizzati per l'interazione, le manipolazioni, i risolutori e così via. La creazione dello spostamento di controller e mani per questi test può richiedere molto tempo.</span><span class="sxs-lookup"><span data-stu-id="cb6dc-108">Creating automated tests for interaction, manipulations, solvers, etc. Creating the movement of controllers and hands for these tests can be time consuming.</span></span> <span data-ttu-id="cb6dc-109">La registrazione diretta dell'input può velocizzare il processo e fornire dati reali.</span><span class="sxs-lookup"><span data-stu-id="cb6dc-109">Recording input directly can speed up the process and provide real-world data.</span></span>
* <span data-ttu-id="cb6dc-110">Insegnamento dell'uso di elementi dell'esperienza utente tramite animazioni.</span><span class="sxs-lookup"><span data-stu-id="cb6dc-110">Teaching the use of UX elements through animations.</span></span>
  <span data-ttu-id="cb6dc-111">Mostrare agli utenti come interagire con i pulsanti e altri oggetti può smussare la curva di apprendimento.</span><span class="sxs-lookup"><span data-stu-id="cb6dc-111">Showing users how to interact with buttons and other objects can smooth the learning curve.</span></span>
* <span data-ttu-id="cb6dc-112">Debug di un comportamento imprevisto che può verificarsi durante l'uso regolare.</span><span class="sxs-lookup"><span data-stu-id="cb6dc-112">Debugging unexpected behavior that may be encountered during regular use.</span></span>
  <span data-ttu-id="cb6dc-113">Il sistema di registrazione supporta un concetto di "buffer in sequenza" che consente di registrare l'input recente in background.</span><span class="sxs-lookup"><span data-stu-id="cb6dc-113">The recording system supports a "rolling buffer" concept that allows recording recent input in the background.</span></span>
  <span data-ttu-id="cb6dc-114">Vedere [Servizio di registrazione input](#input-recording-service).</span><span class="sxs-lookup"><span data-stu-id="cb6dc-114">See [Input Recording Service](#input-recording-service).</span></span>

## <a name="recording-and-playback-services"></a><span data-ttu-id="cb6dc-115">Servizi di registrazione e riproduzione</span><span class="sxs-lookup"><span data-stu-id="cb6dc-115">Recording and playback services</span></span>

<span data-ttu-id="cb6dc-116">Vengono forniti due servizi di sistema di input per registrare e riprodurre l'input rispettivamente.</span><span class="sxs-lookup"><span data-stu-id="cb6dc-116">Two input system services are provided to record and play back input respectively.</span></span>

### <a name="input-recording-service"></a><span data-ttu-id="cb6dc-117">Servizio di registrazione input</span><span class="sxs-lookup"><span data-stu-id="cb6dc-117">Input recording service</span></span>

<span data-ttu-id="cb6dc-118">[`InputRecordingService`](xref:Microsoft.MixedReality.Toolkit.Input.InputRecordingService) prende i dati dalla trasformazione principale della fotocamera e dai controller della mano attivi e li archivia in un buffer interno.</span><span class="sxs-lookup"><span data-stu-id="cb6dc-118">[`InputRecordingService`](xref:Microsoft.MixedReality.Toolkit.Input.InputRecordingService) takes data from the main camera transform and active hand controllers and stores it in an internal buffer.</span></span> <span data-ttu-id="cb6dc-119">Quando richiesti, questi dati vengono serializzati in file binari per l'archiviazione e la successiva riproduzione.</span><span class="sxs-lookup"><span data-stu-id="cb6dc-119">When requested this data is then serialized into binary files for storage and later replay.</span></span>

<a target="_blank" href="../images/input-simulation/MRTK_InputAnimation_RecordingDiagram.png">
  <img src="../images/input-simulation/MRTK_InputAnimation_RecordingDiagram.png" title="Registrazione dell'animazione di input" width="80%" alt="Recording diagram" class="center" />
</a>

<span data-ttu-id="cb6dc-121">Per avviare la registrazione dell'input, chiamare la [`StartRecording`](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputRecordingService.StartRecording) funzione .</span><span class="sxs-lookup"><span data-stu-id="cb6dc-121">To start recording input call the [`StartRecording`](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputRecordingService.StartRecording) function.</span></span> <span data-ttu-id="cb6dc-122">[`StopRecording`](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputRecordingService.StopRecording) sospende la registrazione ,ma non rimuove i dati registrati finora, usare [`DiscardRecordedInput`](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputRecordingService.DiscardRecordedInput) per eseguire questa operazione, se necessario.</span><span class="sxs-lookup"><span data-stu-id="cb6dc-122">[`StopRecording`](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputRecordingService.StopRecording) will pause recording (but not discard the data recorded so far, use [`DiscardRecordedInput`](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputRecordingService.DiscardRecordedInput) to do this if needed).</span></span>

<span data-ttu-id="cb6dc-123">Per impostazione predefinita, le dimensioni del buffer di registrazione sono limitate a 30 secondi.</span><span class="sxs-lookup"><span data-stu-id="cb6dc-123">By default the size of the recording buffer is limited to 30 seconds.</span></span> <span data-ttu-id="cb6dc-124">In questo modo il servizio di registrazione può continuare a registrare in background senza accumulare troppi dati e quindi salvare gli ultimi 30 secondi quando necessario.</span><span class="sxs-lookup"><span data-stu-id="cb6dc-124">This allows the recording service to keep recording in the background without accumulating too much data, and then save the last 30 seconds when required.</span></span> <span data-ttu-id="cb6dc-125">L'intervallo di tempo può essere modificato usando la [`RecordingBufferTimeLimit`](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputRecordingService.RecordingBufferTimeLimit) proprietà oppure la registrazione può essere illimitata usando l'opzione [`UseBufferTimeLimit`](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputRecordingService.UseBufferTimeLimit) .</span><span class="sxs-lookup"><span data-stu-id="cb6dc-125">The time interval can be changed using the [`RecordingBufferTimeLimit`](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputRecordingService.RecordingBufferTimeLimit) property, or recording can be unlimited using the [`UseBufferTimeLimit`](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputRecordingService.UseBufferTimeLimit) option.</span></span>

<span data-ttu-id="cb6dc-126">I dati nel buffer di registrazione possono essere salvati in un file binario usando la [funzione SaveInputAnimation.](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputRecordingService.SaveInputAnimation*)</span><span class="sxs-lookup"><span data-stu-id="cb6dc-126">The data in the recording buffer can be saved in a binary file using the [SaveInputAnimation](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputRecordingService.SaveInputAnimation*) function.</span></span>

<span data-ttu-id="cb6dc-127">Per informazioni dettagliate sul formato di file binario, vedere [Specifica del formato del file di animazione di input](input-animation-file-format.md).</span><span class="sxs-lookup"><span data-stu-id="cb6dc-127">For details on the binary file format see [Input Animation File Format Specification](input-animation-file-format.md).</span></span>

### <a name="input-playback-service"></a><span data-ttu-id="cb6dc-128">Servizio di riproduzione di input</span><span class="sxs-lookup"><span data-stu-id="cb6dc-128">Input playback service</span></span>

<span data-ttu-id="cb6dc-129">[`InputPlaybackService`](xref:Microsoft.MixedReality.Toolkit.Input.InputPlaybackService) legge un file binario con dati di animazione di input e quindi applica questi dati tramite [InputSimulationService](xref:Microsoft.MixedReality.Toolkit.Input.InputSimulationService) per ricreare i movimenti registrati.</span><span class="sxs-lookup"><span data-stu-id="cb6dc-129">[`InputPlaybackService`](xref:Microsoft.MixedReality.Toolkit.Input.InputPlaybackService) reads a binary file with input animation data and then applies this data through the [InputSimulationService](xref:Microsoft.MixedReality.Toolkit.Input.InputSimulationService) to recreate the recorded movements.</span></span>

<a target="_blank" href="../images/input-simulation/MRTK_InputAnimation_PlaybackDiagram.png">
  <img src="../images/input-simulation/MRTK_InputAnimation_PlaybackDiagram.png" title="Riproduzione dell'animazione di input" width="80%" alt="Play Back diagram" class="center" />
</a>

<span data-ttu-id="cb6dc-131">Per avviare la riproduzione dell'animazione di input, è necessario caricarla da un file usando la [funzione LoadInputAnimation.](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputPlaybackService.LoadInputAnimation*)</span><span class="sxs-lookup"><span data-stu-id="cb6dc-131">To start playing back input animation it should be loaded from a file using the [LoadInputAnimation](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputPlaybackService.LoadInputAnimation*) function.</span></span>

<span data-ttu-id="cb6dc-132">Chiamare [Play,](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputPlaybackService.Play) [Pause o](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputPlaybackService.Play)Stop [per](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputPlaybackService.Stop) controllare la riproduzione dell'animazione.</span><span class="sxs-lookup"><span data-stu-id="cb6dc-132">Call [Play](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputPlaybackService.Play), [Pause](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputPlaybackService.Play), or [Stop](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputPlaybackService.Stop) to control the animation playback.</span></span>

<span data-ttu-id="cb6dc-133">Il tempo di animazione corrente può anche essere controllato direttamente con la [proprietà LocalTime.](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputPlaybackService.LocalTime)</span><span class="sxs-lookup"><span data-stu-id="cb6dc-133">The current animation time can also be controlled directly with the [LocalTime](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputPlaybackService.LocalTime) property.</span></span>

> [!WARNING]
> <span data-ttu-id="cb6dc-134">La ripetizione a ciclo continuo o la reimpostazione diretta dell'animazione o dell'impostazione di input tramite lo scrubbing della sequenza temporale possono produrre risultati imprevisti [`LocalTime`](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputPlaybackService.LocalTime) durante la modifica della scena.</span><span class="sxs-lookup"><span data-stu-id="cb6dc-134">Looping or resetting input animation or setting [`LocalTime`](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityInputPlaybackService.LocalTime) directly by scrubbing the timeline may yield unexpected results when manipulating the scene!</span></span> <span data-ttu-id="cb6dc-135">Vengono registrati solo i movimenti di input, eventuali modifiche aggiuntive, ad esempio lo spostamento di oggetti o l'inversione dei commutatori, non verranno reimpostate.</span><span class="sxs-lookup"><span data-stu-id="cb6dc-135">Only the input movements are recorded, any additional changes such as moving objects or flipping switches will not be reset.</span></span> <span data-ttu-id="cb6dc-136">Assicurarsi di ricaricare la scena se sono state apportate modifiche irreversibili.</span><span class="sxs-lookup"><span data-stu-id="cb6dc-136">Make sure to reload the scene if irreversible changes have been made.</span></span>

### <a name="editor-tools-for-recording-and-playing-input-animation"></a><span data-ttu-id="cb6dc-137">Strumenti dell'editor per la registrazione e la riproduzione dell'animazione di input</span><span class="sxs-lookup"><span data-stu-id="cb6dc-137">Editor tools for recording and playing input animation</span></span>

<span data-ttu-id="cb6dc-138">Nell'editor di Unity sono disponibili diversi strumenti per la registrazione e l'analisi dell'animazione di input.</span><span class="sxs-lookup"><span data-stu-id="cb6dc-138">A number of tools exist in the Unity editor for recording and examining input animation.</span></span> <span data-ttu-id="cb6dc-139">È possibile accedere a questi strumenti nella finestra degli strumenti di simulazione [dell'input,](input-simulation-service.md#input-simulation-tools-window)che può essere aperta dal menu Utilità Toolkit > realtà mista _> Simulazione input._</span><span class="sxs-lookup"><span data-stu-id="cb6dc-139">These tools can be accessed in the [input simulation tools window](input-simulation-service.md#input-simulation-tools-window), which can be opened from the _Mixed Reality Toolkit > Utilities > Input Simulation_ menu.</span></span>

> [!NOTE]
> <span data-ttu-id="cb6dc-140">La registrazione e la riproduzione di input funzionano solo durante la modalità di riproduzione.</span><span class="sxs-lookup"><span data-stu-id="cb6dc-140">Input recording and playback only works during play mode.</span></span>

<span data-ttu-id="cb6dc-141">La finestra di registrazione di input ha due modalità:</span><span class="sxs-lookup"><span data-stu-id="cb6dc-141">The input recording window has two modes:</span></span>

* <span data-ttu-id="cb6dc-142">_Registrazione per_ la registrazione dell'input durante la modalità di riproduzione e salvataggio in file di animazione.</span><span class="sxs-lookup"><span data-stu-id="cb6dc-142">_Recording_ for recording input during play mode and saving it to animation files.</span></span>

  <span data-ttu-id="cb6dc-143">Quando si attiva il pulsante di registrazione, [`InputRecordingService`](xref:Microsoft.MixedReality.Toolkit.Input.InputRecordingService) l'oggetto è abilitato per registrare l'input.</span><span class="sxs-lookup"><span data-stu-id="cb6dc-143">When toggling on the recording button the [`InputRecordingService`](xref:Microsoft.MixedReality.Toolkit.Input.InputRecordingService) is enabled to record input.</span></span>
  <span data-ttu-id="cb6dc-144">Quando si disattiva il pulsante di registrazione, viene visualizzata una selezione di salvataggio file e l'animazione di input registrata viene salvata nella destinazione selezionata.</span><span class="sxs-lookup"><span data-stu-id="cb6dc-144">When toggling off the recording button a file save selection is shown and the recorded input animation is saved to the selected destination.</span></span>

  <span data-ttu-id="cb6dc-145">Il limite di tempo del buffer può essere modificato anche in questa modalità.</span><span class="sxs-lookup"><span data-stu-id="cb6dc-145">The buffer time limit can also be changed in this mode.</span></span>

* <span data-ttu-id="cb6dc-146">_Riproduzione per_ caricare i file di animazione e quindi ricreare l'input tramite il sistema di simulazione di input.</span><span class="sxs-lookup"><span data-stu-id="cb6dc-146">_Playback_ for loading animation files and then recreating input through the input simulation system.</span></span>

  <span data-ttu-id="cb6dc-147">Un'animazione deve essere caricata prima in questa modalità.</span><span class="sxs-lookup"><span data-stu-id="cb6dc-147">An animation must be loaded in this mode first.</span></span> <span data-ttu-id="cb6dc-148">Dopo aver registrato l'input in modalità di registrazione, l'animazione risultante viene caricata automaticamente.</span><span class="sxs-lookup"><span data-stu-id="cb6dc-148">After recording input in recording mode the resulting animation is automatically loaded.</span></span> <span data-ttu-id="cb6dc-149">In alternativa, fare clic sul pulsante "Carica" per selezionare un file di animazione esistente.</span><span class="sxs-lookup"><span data-stu-id="cb6dc-149">Alternatively click the "Load" button to select an existing animation file.</span></span>

  <span data-ttu-id="cb6dc-150">I pulsanti di controllo dell'ora da sinistra a destra sono:</span><span class="sxs-lookup"><span data-stu-id="cb6dc-150">The time control buttons from left to right are:</span></span>

  * <span data-ttu-id="cb6dc-151">_Reimpostare_ l'ora di riproduzione all'inizio dell'animazione.</span><span class="sxs-lookup"><span data-stu-id="cb6dc-151">_Reset_ the playback time to the start of the animation.</span></span>
  * <span data-ttu-id="cb6dc-152">_Riprodurre_ l'animazione in modo continuo nel tempo.</span><span class="sxs-lookup"><span data-stu-id="cb6dc-152">_Play_ animation continuously over time.</span></span>
  * <span data-ttu-id="cb6dc-153">_Eseguire un_ passaggio successivo.</span><span class="sxs-lookup"><span data-stu-id="cb6dc-153">_Step_ forward one time step.</span></span>

  <span data-ttu-id="cb6dc-154">Il dispositivo di scorrimento può essere usato anche per scorrere la sequenza temporale dell'animazione.</span><span class="sxs-lookup"><span data-stu-id="cb6dc-154">The slider can also be used to scrub through the animation timeline.</span></span>

> [!WARNING]
> <span data-ttu-id="cb6dc-155">Il ciclo o la reimpostazione dell'animazione di input o lo scrubbing della sequenza temporale possono produrre risultati imprevisti durante la modifica della scena.</span><span class="sxs-lookup"><span data-stu-id="cb6dc-155">Looping or resetting input animation or scrubbing the timeline may yield unexpected results when manipulating the scene!</span></span> <span data-ttu-id="cb6dc-156">Vengono registrati solo i movimenti di input, eventuali modifiche aggiuntive, ad esempio lo spostamento di oggetti o l'inversione dei commutatori, non verranno reimpostate.</span><span class="sxs-lookup"><span data-stu-id="cb6dc-156">Only the input movements are recorded, any additional changes such as moving objects or flipping switches will not be reset.</span></span> <span data-ttu-id="cb6dc-157">Assicurarsi di ricaricare la scena se sono state apportate modifiche irreversibili.</span><span class="sxs-lookup"><span data-stu-id="cb6dc-157">Make sure to reload the scene if irreversible changes have been made.</span></span>

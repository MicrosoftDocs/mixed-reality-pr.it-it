---
title: Sistema di base
description: Sistema di input, gestori di dispositivi e provider di dati in MRTK
author: cDiaz-MS
ms.author: cadia
ms.date: 01/12/2021
keywords: Unity, HoloLens, HoloLens 2, realtà mista, sviluppo, MRTK, eventi
ms.openlocfilehash: 12719a6c749a03648d4f75e9e6461b85cc9ab275
ms.sourcegitcommit: c0ba7d7bb57bb5dda65ee9019229b68c2ee7c267
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 05/19/2021
ms.locfileid: "110144296"
---
# <a name="core-system"></a><span data-ttu-id="b394d-104">Sistema di base</span><span class="sxs-lookup"><span data-stu-id="b394d-104">Core system</span></span>

<span data-ttu-id="b394d-105">Il centro del sistema di input è [InputSystem,](../features/input/overview.md)un servizio responsabile dell'inizializzazione e del funzionamento di tutte le funzionalità correlate all'input associate a MRTK.</span><span class="sxs-lookup"><span data-stu-id="b394d-105">At the heart of the input system is the [InputSystem](../features/input/overview.md), which is a service that is responsible for initializing and operating all of the input related functionality associated with the MRTK.</span></span>

> [!NOTE]
> <span data-ttu-id="b394d-106">Si presuppone che i lettori hanno già letto e hanno una conoscenza di base della [sezione terminologia.](terminology.md)</span><span class="sxs-lookup"><span data-stu-id="b394d-106">It is assumed that readers have already read and have a basic understanding of the [terminology](terminology.md) section.</span></span>

<span data-ttu-id="b394d-107">Questo servizio è responsabile di:</span><span class="sxs-lookup"><span data-stu-id="b394d-107">This service is responsible for:</span></span>

- <span data-ttu-id="b394d-108">Lettura del profilo [di sistema di input](../configuration/mixed-reality-configuration-guide.md#input-system-settings)</span><span class="sxs-lookup"><span data-stu-id="b394d-108">Reading the [input system profile](../configuration/mixed-reality-configuration-guide.md#input-system-settings)</span></span>
- <span data-ttu-id="b394d-109">Avvio dei provider [di dati configurati](../features/input/input-providers.md) , ad esempio e `Windows Mixed Reality Device Manager` `OpenVR Device Manager` .</span><span class="sxs-lookup"><span data-stu-id="b394d-109">Starting the configured [data providers](../features/input/input-providers.md) (for example, `Windows Mixed Reality Device Manager` and `OpenVR Device Manager`).</span></span>
- <span data-ttu-id="b394d-110">Creazione di un'istanza di [GazeProvider,](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityGazeProvider)che è un componente responsabile della fornitura di informazioni sullo sguardo della testa dello stile HoloLens (prima generazione), oltre a HoloLens 2 informazioni sullo sguardo oculare.</span><span class="sxs-lookup"><span data-stu-id="b394d-110">Instantiation of the [GazeProvider](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityGazeProvider), which is a component that is responsible for providing HoloLens (1st generation) style head gaze information in addition to HoloLens 2 style eye gaze information.</span></span>
- <span data-ttu-id="b394d-111">Creazione di un'istanza [di FocusProvider](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityFocusProvider), che è un componente responsabile della determinazione degli oggetti con stato attivo.</span><span class="sxs-lookup"><span data-stu-id="b394d-111">Instantiation of the [FocusProvider](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityFocusProvider), which is a component that is responsible for determining objects that have focus.</span></span> <span data-ttu-id="b394d-112">Questa operazione è descritta in modo più approfondito nella sezione [puntatori](controllers-pointers-and-focus.md#pointers-and-focus) e stato attivo della documentazione.</span><span class="sxs-lookup"><span data-stu-id="b394d-112">This is described in more depth in the [pointers and focus](controllers-pointers-and-focus.md#pointers-and-focus) section of the documentation.</span></span>
- <span data-ttu-id="b394d-113">Fornire punti di registrazione per tutti gli eventi di input [(come listener globali).](#global-listeners)</span><span class="sxs-lookup"><span data-stu-id="b394d-113">Providing registration points for all input events (as [global listeners](#global-listeners)).</span></span>
- <span data-ttu-id="b394d-114">Fornire funzionalità di invio di eventi per tali eventi di input.</span><span class="sxs-lookup"><span data-stu-id="b394d-114">Providing event dispatch capabilities for those input events.</span></span>

## <a name="input-events"></a><span data-ttu-id="b394d-115">Eventi di input</span><span class="sxs-lookup"><span data-stu-id="b394d-115">Input events</span></span>

<span data-ttu-id="b394d-116">Gli eventi di input vengono in genere generati in due canali diversi:</span><span class="sxs-lookup"><span data-stu-id="b394d-116">Input events are generally fired on two different channels:</span></span>

### <a name="objects-in-focus"></a><span data-ttu-id="b394d-117">Oggetti nello stato attivo</span><span class="sxs-lookup"><span data-stu-id="b394d-117">Objects in focus</span></span>

<span data-ttu-id="b394d-118">Gli eventi possono essere inviati direttamente a un GameObject con lo stato attivo.</span><span class="sxs-lookup"><span data-stu-id="b394d-118">Events can be sent directly to a GameObject that has focus.</span></span> <span data-ttu-id="b394d-119">Ad esempio, un oggetto potrebbe avere uno script che implementa [`IMixedRealityTouchHandler`](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityTouchHandler) .</span><span class="sxs-lookup"><span data-stu-id="b394d-119">For example, an object might have a script that implements [`IMixedRealityTouchHandler`](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityTouchHandler).</span></span>
<span data-ttu-id="b394d-120">Questo oggetto otterrà eventi di tocco quando viene selezionato da una mano vicina.</span><span class="sxs-lookup"><span data-stu-id="b394d-120">This object would get touch events when focused by a hand that is near it.</span></span> <span data-ttu-id="b394d-121">Questi tipi di eventi passano "verso l'alto" nella gerarchia GameObject finché non trova un GameObject in grado di gestire l'evento.</span><span class="sxs-lookup"><span data-stu-id="b394d-121">These types of events go "up" the GameObject hierarchy until it finds a GameObject that is capable of handling the event.</span></span>

<span data-ttu-id="b394d-122">Questa operazione viene eseguita usando [ExecuteHierarchy dall'interno](https://docs.unity3d.com/ScriptReference/EventSystems.ExecuteEvents.ExecuteHierarchy.html) dell'implementazione del sistema di input predefinita.</span><span class="sxs-lookup"><span data-stu-id="b394d-122">This is done by using [ExecuteHierarchy](https://docs.unity3d.com/ScriptReference/EventSystems.ExecuteEvents.ExecuteHierarchy.html) from within the default input system implementation.</span></span>

### <a name="global-listeners"></a><span data-ttu-id="b394d-123">Listener globali</span><span class="sxs-lookup"><span data-stu-id="b394d-123">Global listeners</span></span>

<span data-ttu-id="b394d-124">Gli eventi possono essere inviati a listener globali.</span><span class="sxs-lookup"><span data-stu-id="b394d-124">Events can be sent to global listeners.</span></span> <span data-ttu-id="b394d-125">È possibile eseguire la registrazione per tutti gli eventi di input usando l'interfaccia del sistema di [`IMixedRealityEventSystem`](xref:Microsoft.MixedReality.Toolkit.IMixedRealityEventSystem) input.</span><span class="sxs-lookup"><span data-stu-id="b394d-125">It's possible to register for all input events by using the input system's [`IMixedRealityEventSystem`](xref:Microsoft.MixedReality.Toolkit.IMixedRealityEventSystem) interface.</span></span> <span data-ttu-id="b394d-126">È consigliabile usare il metodo [RegisterHandler](xref:Microsoft.MixedReality.Toolkit.IMixedRealityEventSystem.RegisterHandler%2A) per la registrazione per gli eventi globali. La funzione deprecata invierà ai listener la notifica di TUTTI gli eventi di input, anziché solo gli eventi di input di un determinato tipo (in cui il tipo è definito dall'interfaccia `Register` eventi).</span><span class="sxs-lookup"><span data-stu-id="b394d-126">It's recommended to use the [RegisterHandler](xref:Microsoft.MixedReality.Toolkit.IMixedRealityEventSystem.RegisterHandler%2A) method for registering for global events - the deprecated `Register` function will cause listeners to get notified of ALL input events, rather than just input events of a particular type (where type is defined by the event interface).</span></span>

<span data-ttu-id="b394d-127">Si noti che i listener di [fallback](xref:Microsoft.MixedReality.Toolkit.Input.MixedRealityInputSystem.PushFallbackInputHandler%2A) sono un altro tipo di listener globali che sono anche sconsigliati perché riceveranno ogni singolo evento di input che non è stato gestito altrove nella scena.</span><span class="sxs-lookup"><span data-stu-id="b394d-127">Note that [fallback listeners](xref:Microsoft.MixedReality.Toolkit.Input.MixedRealityInputSystem.PushFallbackInputHandler%2A) are another type of global listeners which are also discouraged because they will receive every single input event that hasn't been handled elsewhere in the scene.</span></span>

### <a name="order-of-event-dispatch"></a><span data-ttu-id="b394d-128">Ordine di invio degli eventi</span><span class="sxs-lookup"><span data-stu-id="b394d-128">Order of event dispatch</span></span>

<span data-ttu-id="b394d-129">In genere, gli eventi vengono inviati ai listener nel modo seguente.</span><span class="sxs-lookup"><span data-stu-id="b394d-129">Generally, events are sent to listeners in the following way.</span></span> <span data-ttu-id="b394d-130">Si noti che se uno dei passaggi seguenti contrassegna l'evento [come](https://docs.unity3d.com/ScriptReference/EventSystems.AbstractEventData-used.html)gestito, il processo di invio degli eventi si arresta.</span><span class="sxs-lookup"><span data-stu-id="b394d-130">Note that if any of the steps below mark the event as [handled](https://docs.unity3d.com/ScriptReference/EventSystems.AbstractEventData-used.html), the event dispatch process stops.</span></span>

1. <span data-ttu-id="b394d-131">L'evento viene inviato ai listener globali.</span><span class="sxs-lookup"><span data-stu-id="b394d-131">Event is sent to global listeners.</span></span>
2. <span data-ttu-id="b394d-132">L'evento viene inviato alle finestre di dialogo modali dell'oggetto con lo stato attivo.</span><span class="sxs-lookup"><span data-stu-id="b394d-132">Event is sent to modal dialogs of the focused object.</span></span>
3. <span data-ttu-id="b394d-133">L'evento viene inviato all'oggetto con lo stato attivo.</span><span class="sxs-lookup"><span data-stu-id="b394d-133">Event is sent to the focused object.</span></span>
4. <span data-ttu-id="b394d-134">L'evento viene inviato ai listener di fallback.</span><span class="sxs-lookup"><span data-stu-id="b394d-134">Event is sent to fallback listeners.</span></span>

## <a name="device-managers-and-data-providers"></a><span data-ttu-id="b394d-135">Gestori di dispositivi e provider di dati</span><span class="sxs-lookup"><span data-stu-id="b394d-135">Device managers and data providers</span></span>

<span data-ttu-id="b394d-136">Queste entità sono responsabili dell'interfacciamento con LE API di livello inferiore (ad esempio API Windows Mixed Reality o API OpenVR) e della conversione dei dati da tali sistemi in quelle che si adattano alle astrazioni di input di livello superiore di MRTK.</span><span class="sxs-lookup"><span data-stu-id="b394d-136">These entities are responsible for interfacing with lower-level APIs (such as Windows Mixed Reality APIs, or OpenVR APIs) and translating data from those systems into ones that fit the MRTK's higher level input abstractions.</span></span> <span data-ttu-id="b394d-137">Sono responsabili del rilevamento, della creazione e della gestione della durata dei [controller](controllers-pointers-and-focus.md#controllers).</span><span class="sxs-lookup"><span data-stu-id="b394d-137">They are responsible for detecting, creating, and managing the lifetime of [controllers](controllers-pointers-and-focus.md#controllers).</span></span>

<span data-ttu-id="b394d-138">Il flusso di base di un gestore di dispositivi prevede:</span><span class="sxs-lookup"><span data-stu-id="b394d-138">The basic flow of a device manager involves:</span></span>

1. <span data-ttu-id="b394d-139">Gestione dispositivi viene creata un'istanza dal servizio di sistema di input.</span><span class="sxs-lookup"><span data-stu-id="b394d-139">The device manager is instantiated by the input system service.</span></span>
2. <span data-ttu-id="b394d-140">Gestione dispositivi si registra con il sistema sottostante(ad esempio, Windows Mixed Reality gestione dispositivi si registrerà per gli eventi [di input](../features/input/input-events.md) [e](../features/input/gestures.md#gesture-events) movimento.</span><span class="sxs-lookup"><span data-stu-id="b394d-140">The device manager registers with its underlying system (for example, the Windows Mixed Reality device manager will register for [input](../features/input/input-events.md) and [gesture](../features/input/gestures.md#gesture-events) events.</span></span>
3. <span data-ttu-id="b394d-141">Crea controller individuati dal sistema sottostante (ad esempio il provider può rilevare la presenza di mani articolate)</span><span class="sxs-lookup"><span data-stu-id="b394d-141">It creates controllers that it discovers from the underlying system (for example the provider could detect the presence of articulated hands)</span></span>
4. <span data-ttu-id="b394d-142">Nel ciclo Update() chiamare UpdateController() per eseguire il polling del nuovo stato del sistema sottostante e aggiornare la relativa rappresentazione del controller.</span><span class="sxs-lookup"><span data-stu-id="b394d-142">In its Update() loop, call UpdateController() to poll for the new state of the underlying system and update its controller representation.</span></span>

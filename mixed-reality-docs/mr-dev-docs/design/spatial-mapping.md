---
title: Mapping spaziale
description: Il mapping spaziale fornisce una rappresentazione dettagliata delle superfici reali nell'ambiente intorno a HoloLens.
author: mattzmsft
ms.author: mazeller
ms.date: 03/21/2018
ms.topic: article
keywords: mapping spaziale, HoloLens, realtà mista, ricostruzione della superficie, mesh, visore di realtà mista, visore windows di realtà mista, visore di realtà virtuale, HoloLens, MRTK, Mixed Reality Toolkit, comprensione della scena, world mesh, occlusione, fisica, navigazione, osservatore di superficie, rendering, elaborazione mesh
ms.openlocfilehash: 3268f25f86cdfea3aa1ae0b77c4fbeb9aa0ce1b9
ms.sourcegitcommit: 8f141a843bcfc57e1b18cc606292186b8ac72641
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 05/19/2021
ms.locfileid: "110196426"
---
# <a name="spatial-mapping"></a><span data-ttu-id="420f8-104">Mapping spaziale</span><span class="sxs-lookup"><span data-stu-id="420f8-104">Spatial mapping</span></span>

<span data-ttu-id="420f8-105">Il mapping spaziale offre una rappresentazione dettagliata delle superfici reali nell'ambiente intorno a HoloLens, consentendo agli sviluppatori di creare un'esperienza di realtà mista convincente.</span><span class="sxs-lookup"><span data-stu-id="420f8-105">Spatial mapping provides a detailed representation of real-world surfaces in the environment around the HoloLens, allowing developers to create a convincing mixed reality experience.</span></span> <span data-ttu-id="420f8-106">Unendo il mondo reale con il mondo virtuale, un'applicazione può rendere gli ologrammi reali.</span><span class="sxs-lookup"><span data-stu-id="420f8-106">By merging the real world with the virtual world, an application can make holograms seem real.</span></span> <span data-ttu-id="420f8-107">Le applicazioni possono anche essere allineate in modo più naturale alle aspettative dell'utente fornendo comportamenti e interazioni reali familiari.</span><span class="sxs-lookup"><span data-stu-id="420f8-107">Applications can also more naturally align with user expectations by providing familiar real-world behaviors and interactions.</span></span>

<br>

>[!VIDEO https://www.youtube.com/embed/zff2aQ1RaVo]

## <a name="device-supports"></a><span data-ttu-id="420f8-108">Il dispositivo supporta</span><span class="sxs-lookup"><span data-stu-id="420f8-108">Device supports</span></span>

<table>
    <colgroup>
    <col width="25%" />
    <col width="25%" />
    <col width="25%" />
    <col width="25%" />
    </colgroup>
    <tr>
        <td><span data-ttu-id="420f8-109"><strong>Funzionalità</strong></span><span class="sxs-lookup"><span data-stu-id="420f8-109"><strong>Feature</strong></span></span></td>
        <td><span data-ttu-id="420f8-110"><a href="/hololens/hololens1-hardware"><strong>HoloLens (prima generazione)</strong></a></span><span class="sxs-lookup"><span data-stu-id="420f8-110"><a href="/hololens/hololens1-hardware"><strong>HoloLens (1st gen)</strong></a></span></span></td>
        <td><span data-ttu-id="420f8-111"><a href="https://docs.microsoft.com/hololens/hololens2-hardware"><strong>HoloLens 2</strong></span><span class="sxs-lookup"><span data-stu-id="420f8-111"><a href="https://docs.microsoft.com/hololens/hololens2-hardware"><strong>HoloLens 2</strong></span></span></td>
        <td><span data-ttu-id="420f8-112"><a href="../discover/immersive-headset-hardware-details.md"><strong>Visori VR immersive</strong></a></span><span class="sxs-lookup"><span data-stu-id="420f8-112"><a href="../discover/immersive-headset-hardware-details.md"><strong>Immersive headsets</strong></a></span></span></td>
    </tr>
     <tr>
        <td><span data-ttu-id="420f8-113">Mapping spaziale</span><span class="sxs-lookup"><span data-stu-id="420f8-113">Spatial mapping</span></span></td>
        <td><span data-ttu-id="420f8-114">✔️</span><span class="sxs-lookup"><span data-stu-id="420f8-114">✔️</span></span></td>
        <td><span data-ttu-id="420f8-115">✔️</span><span class="sxs-lookup"><span data-stu-id="420f8-115">✔️</span></span></td>
        <td>❌</td>
    </tr>
</table>


## <a name="why-is-spatial-mapping-important"></a><span data-ttu-id="420f8-116">Perché il mapping spaziale è importante?</span><span class="sxs-lookup"><span data-stu-id="420f8-116">Why is spatial mapping important?</span></span>

<span data-ttu-id="420f8-117">Il mapping spaziale consente di posizionare gli oggetti su superfici reali.</span><span class="sxs-lookup"><span data-stu-id="420f8-117">Spatial mapping makes it possible to place objects on real surfaces.</span></span> <span data-ttu-id="420f8-118">In questo modo è possibile ancorare gli oggetti nel mondo dell'utente e sfruttare i segnali di profondità reali. Occluding your holograms based on other holograms and real world objects helps convince the user that these holograms are actually in their space.</span><span class="sxs-lookup"><span data-stu-id="420f8-118">This helps anchor objects in the user's world and takes advantage of real world depth cues. Occluding your holograms based on other holograms and real world objects helps convince the user that these holograms are actually in their space.</span></span> <span data-ttu-id="420f8-119">Gli ologrammi che fluttuano nello spazio o si spostano con l'utente non saranno reali.</span><span class="sxs-lookup"><span data-stu-id="420f8-119">Holograms floating in space or moving with the user won't feel as real.</span></span> <span data-ttu-id="420f8-120">Quando possibile, posizionare gli elementi per comodità.</span><span class="sxs-lookup"><span data-stu-id="420f8-120">When possible, place items for comfort.</span></span>

<span data-ttu-id="420f8-121">Visualizzare le superfici durante il posizionamento o lo spostamento di ologrammi (usare una griglia proiettata).</span><span class="sxs-lookup"><span data-stu-id="420f8-121">Visualize surfaces when placing or moving holograms (use a projected grid).</span></span> <span data-ttu-id="420f8-122">Ciò consente agli utenti di sapere dove possono posizionare meglio gli ologrammi e indica se il punto in cui sta tentando di posizionare l'ologramma non è mappato.</span><span class="sxs-lookup"><span data-stu-id="420f8-122">This helps users know where they can best place their holograms, and shows if the spot they're trying to place the hologram isn't mapped.</span></span> <span data-ttu-id="420f8-123">È possibile "creare un manifesto" verso l'utente se finisce con un angolo troppo alto.</span><span class="sxs-lookup"><span data-stu-id="420f8-123">You can "billboard items" toward the user if they end up at too much of an angle.</span></span>

## <a name="conceptual-overview"></a><span data-ttu-id="420f8-124">Panoramica dei concetti</span><span class="sxs-lookup"><span data-stu-id="420f8-124">Conceptual overview</span></span>

<span data-ttu-id="420f8-125">![Superfici mesh che coprono una stanza](images/SurfaceReconstruction.jpg)</span><span class="sxs-lookup"><span data-stu-id="420f8-125">![Mesh surfaces covering a room](images/SurfaceReconstruction.jpg)</span></span><br>
<span data-ttu-id="420f8-126">*Esempio di mesh di mapping spaziale che copre una stanza*</span><span class="sxs-lookup"><span data-stu-id="420f8-126">*An example of a spatial mapping mesh covering a room*</span></span>

<span data-ttu-id="420f8-127">I due tipi di oggetto principali usati per il mapping spaziale sono "Spatial Surface Observer" e "Spatial Surface".</span><span class="sxs-lookup"><span data-stu-id="420f8-127">The two primary object types used for spatial mapping are the 'Spatial Surface Observer' and the 'Spatial Surface'.</span></span>

<span data-ttu-id="420f8-128">L'applicazione fornisce a Spatial Surface Observer uno o più volumi di delimitazione per definire le aree di spazio in cui l'applicazione vuole ricevere i dati di mapping spaziale.</span><span class="sxs-lookup"><span data-stu-id="420f8-128">The application provides the Spatial Surface Observer with one or more bounding volumes, to define the regions of space in which the application wishes to receive spatial mapping data.</span></span> <span data-ttu-id="420f8-129">Per ognuno di questi volumi, il mapping spaziale fornirà all'applicazione un set di superfici spaziali.</span><span class="sxs-lookup"><span data-stu-id="420f8-129">For each of these volumes, spatial mapping will provide the application with a set of Spatial Surfaces.</span></span>

<span data-ttu-id="420f8-130">Questi volumi possono essere fissi (in una posizione fissa basata sul mondo reale) o essere collegati a HoloLens (si spostano, ma non ruotano, con HoloLens mentre si sposta nell'ambiente).</span><span class="sxs-lookup"><span data-stu-id="420f8-130">These volumes may be stationary (in a fixed location based on the real world) or they may be attached to the HoloLens (they move, but don't rotate, with the HoloLens as it moves through the environment).</span></span> <span data-ttu-id="420f8-131">Ogni superficie spaziale descrive le superfici reali in un volume ridotto di spazio, rappresentato come una mesh triangolare collegata a un sistema di coordinate spaziali [bloccato a livello mondiale.](coordinate-systems.md)</span><span class="sxs-lookup"><span data-stu-id="420f8-131">Each spatial surface describes real-world surfaces in a small volume of space, represented as a triangle mesh attached to a world-locked [spatial coordinate system](coordinate-systems.md).</span></span>

<span data-ttu-id="420f8-132">Quando HoloLens raccoglie nuovi dati sull'ambiente e quando vengono apportate modifiche all'ambiente, le superfici spaziali vengono visualizzate, scompaiono e cambiano.</span><span class="sxs-lookup"><span data-stu-id="420f8-132">As the HoloLens gathers new data about the environment, and as changes to the environment occur, spatial surfaces will appear, disappear, and change.</span></span>

## <a name="spatial-awareness-design-concepts-demo"></a><span data-ttu-id="420f8-133">Demo dei concetti di progettazione della consapevolezza spaziale</span><span class="sxs-lookup"><span data-stu-id="420f8-133">Spatial Awareness design concepts demo</span></span>

<span data-ttu-id="420f8-134">Per vedere i concetti di progettazione della consapevolezza spaziale in azione, vedere la demo di video **Progettazione di ologrammi -** Consapevolezza spaziale di seguito.</span><span class="sxs-lookup"><span data-stu-id="420f8-134">If you'd like to see Spatial Awareness design concepts in action, check out our **Designing Holograms - Spatial Awareness** video demo below.</span></span> <span data-ttu-id="420f8-135">Al termine, continuare per un approfondimento più dettagliato su argomenti specifici.</span><span class="sxs-lookup"><span data-stu-id="420f8-135">When you've finished, continue on for a more detailed dive into specific topics.</span></span>

> [!VIDEO https://channel9.msdn.com/Shows/Docs-Mixed-Reality/Microsofts-Designing-Holograms-Spatial-Awareness-Chapter/player]

<span data-ttu-id="420f8-136">*Questo video è stato tratto dall'app "Progettazione di ologrammi" HoloLens 2 app. Scaricare e usufruire dell'esperienza completa [qui.](https://aka.ms/dhapp)*</span><span class="sxs-lookup"><span data-stu-id="420f8-136">*This video was taken from the "Designing Holograms" HoloLens 2 app. Download and enjoy the full experience [here](https://aka.ms/dhapp).*</span></span>

## <a name="spatial-mapping-vs-scene-understanding-worldmesh"></a><span data-ttu-id="420f8-137">Mapping spaziale e Informazioni sulla scena WorldMesh</span><span class="sxs-lookup"><span data-stu-id="420f8-137">Spatial Mapping vs. Scene Understanding WorldMesh</span></span>

<span data-ttu-id="420f8-138">Ad HoloLens 2, è possibile eseguire una query su una versione statica dei dati di mapping spaziale usando [Scene Understanding SDK](../develop/platform-capabilities-and-apis/scene-understanding-SDK.md) (impostazione EnableWorldMesh).</span><span class="sxs-lookup"><span data-stu-id="420f8-138">For HoloLens 2, it's possible to query a static version of the spatial mapping data using [Scene understanding SDK](../develop/platform-capabilities-and-apis/scene-understanding-SDK.md) (EnableWorldMesh setting).</span></span> <span data-ttu-id="420f8-139">Ecco le differenze tra due modi per accedere ai dati di mapping spaziale:</span><span class="sxs-lookup"><span data-stu-id="420f8-139">Here are the differences between two ways of accessing the spatial mapping data:</span></span>
* <span data-ttu-id="420f8-140">API Mapping spaziale:</span><span class="sxs-lookup"><span data-stu-id="420f8-140">Spatial Mapping API:</span></span>
   * <span data-ttu-id="420f8-141">Intervallo limitato: dati di mapping spaziale disponibili per le applicazioni in una "bolla" memorizzata nella cache di dimensioni limitate intorno all'utente.</span><span class="sxs-lookup"><span data-stu-id="420f8-141">Limited range: the spatial mapping data available to applications in a limited size cached 'bubble' around the user.</span></span>
   * <span data-ttu-id="420f8-142">Fornisce aggiornamenti a bassa latenza delle aree mesh modificate tramite gli eventi SurfacesChanged.</span><span class="sxs-lookup"><span data-stu-id="420f8-142">Provides low latency updates of changed mesh regions through SurfacesChanged events.</span></span>
   * <span data-ttu-id="420f8-143">Livello variabile dei dettagli controllato dal parametro Triangles Per Cubic Meter (Triangoli per contatore cubico).</span><span class="sxs-lookup"><span data-stu-id="420f8-143">Variable level of details controlled by Triangles Per Cubic Meter parameter.</span></span>
* <span data-ttu-id="420f8-144">SDK di comprensione della scena:</span><span class="sxs-lookup"><span data-stu-id="420f8-144">Scene understanding SDK:</span></span>
   * <span data-ttu-id="420f8-145">Intervallo illimitato: fornisce tutti i dati di mapping spaziale analizzati all'interno del raggio della query.</span><span class="sxs-lookup"><span data-stu-id="420f8-145">Unlimited range - provides all the scanned spatial mapping data within the query radius.</span></span>
   * <span data-ttu-id="420f8-146">Fornisce uno snapshot statico dei dati di mapping spaziale.</span><span class="sxs-lookup"><span data-stu-id="420f8-146">Provides a static snapshot of the spatial mapping data.</span></span> <span data-ttu-id="420f8-147">Per ottenere i dati di mapping spaziale aggiornati è necessario eseguire una nuova query per l'intera mesh.</span><span class="sxs-lookup"><span data-stu-id="420f8-147">Getting the updated spatial mapping data requires running a new query for the whole mesh.</span></span>
   * <span data-ttu-id="420f8-148">Livello coerente di dettagli controllato dall'impostazione RequestedMeshLevelOfDetail.</span><span class="sxs-lookup"><span data-stu-id="420f8-148">Consistent level of details controlled by RequestedMeshLevelOfDetail setting.</span></span>

## <a name="what-influences-spatial-mapping-quality"></a><span data-ttu-id="420f8-149">Cosa influisce sulla qualità del mapping spaziale?</span><span class="sxs-lookup"><span data-stu-id="420f8-149">What influences spatial mapping quality?</span></span>

<span data-ttu-id="420f8-150">Diversi fattori, qui [dettagliati,](/hololens/hololens-environment-considerations)possono influire sulla frequenza e sulla gravità di questi errori.</span><span class="sxs-lookup"><span data-stu-id="420f8-150">Several factors, detailed [here](/hololens/hololens-environment-considerations), can affect the frequency and severity of these errors.</span></span>  <span data-ttu-id="420f8-151">È tuttavia consigliabile progettare l'applicazione in modo che l'utente possa raggiungere i propri obiettivi anche in presenza di errori nei dati di mapping spaziale.</span><span class="sxs-lookup"><span data-stu-id="420f8-151">However, you should design your application so that the user can achieve their goals even in the presence of errors in the spatial mapping data.</span></span>

## <a name="common-usage-scenarios"></a><span data-ttu-id="420f8-152">Scenari di utilizzo comuni</span><span class="sxs-lookup"><span data-stu-id="420f8-152">Common usage scenarios</span></span>

![Illustrazioni di scenari di utilizzo comuni del mapping spaziale: posizionamento, occlusione, fisica e navigazione](images/sm-concepts-1000px.png)

### <a name="placement"></a><span data-ttu-id="420f8-154">Selezione host</span><span class="sxs-lookup"><span data-stu-id="420f8-154">Placement</span></span>

<span data-ttu-id="420f8-155">La mappatura spaziale offre alle applicazioni la possibilità di presentare forme di interazione naturali e familiari all'utente; cosa potrebbe essere più naturale rispetto all'inserimento del telefono sulla scrivania?</span><span class="sxs-lookup"><span data-stu-id="420f8-155">Spatial mapping provides applications with the opportunity to present natural and familiar forms of interaction to the user; what could be more natural than placing down your phone on the desk?</span></span>

<span data-ttu-id="420f8-156">Vincolare il posizionamento degli ologrammi (o, più in generale, qualsiasi selezione di posizioni spaziali) su superfici offre un mapping naturale da 3D (punto nello spazio) a 2D (punto sulla superficie).</span><span class="sxs-lookup"><span data-stu-id="420f8-156">Constraining the placement of holograms (or more generally, any selection of spatial locations) to lie on surfaces provides a natural mapping from 3D (point in space) to 2D (point on surface).</span></span> <span data-ttu-id="420f8-157">In questo modo si riduce la quantità di informazioni che l'utente deve fornire all'applicazione e rende le interazioni dell'utente più veloci, più semplici e precise.</span><span class="sxs-lookup"><span data-stu-id="420f8-157">This reduces the amount of information the user needs to provide to the application and makes the user's interactions faster, easier, and more precise.</span></span> <span data-ttu-id="420f8-158">Questo è vero perché "distanza" non è qualcosa che viene usato per comunicare fisicamente con altre persone o con i computer.</span><span class="sxs-lookup"><span data-stu-id="420f8-158">This is true because 'distance away' isn't something that we're used to physically communicating to other people or to computers.</span></span> <span data-ttu-id="420f8-159">Quando si punta con il dito, si specifica una direzione ma non una distanza.</span><span class="sxs-lookup"><span data-stu-id="420f8-159">When we point with our finger, we're specifying a direction but not a distance.</span></span>

<span data-ttu-id="420f8-160">Un'importante avvertenza è che quando un'applicazione deduce la distanza dalla direzione (ad esempio eseguendo un raycast lungo la direzione dello sguardo dell'utente per trovare la superficie spaziale più vicina), questo deve produrre risultati che l'utente può stimare in modo affidabile.</span><span class="sxs-lookup"><span data-stu-id="420f8-160">An important caveat here's that when an application infers distance from direction (for example by doing a raycast along the user's gaze direction to find the nearest spatial surface), this must yield results that the user can reliably predict.</span></span> <span data-ttu-id="420f8-161">In caso contrario, l'utente perderà il controllo e questo può diventare rapidamente frustrante.</span><span class="sxs-lookup"><span data-stu-id="420f8-161">Otherwise, the user will lose their sense of control and this can quickly become frustrating.</span></span> <span data-ttu-id="420f8-162">Un metodo utile per questo scopo è eseguire più raycast anziché uno solo.</span><span class="sxs-lookup"><span data-stu-id="420f8-162">One method that helps with this is to do multiple raycasts instead of just one.</span></span> <span data-ttu-id="420f8-163">I risultati dell'aggregazione devono essere più fluidi e prevedibili, meno soggetti all'influenza dei risultati temporanei di "outlier", come può essere causato da raggi che passano attraverso piccoli fori o che toccano piccole porzioni di geometria che l'utente non conosce.</span><span class="sxs-lookup"><span data-stu-id="420f8-163">The aggregate results should be smoother and more predictable, less susceptible to influence from transient 'outlier' results (as can be caused by rays passing through tiny holes or hitting small bits of geometry that the user isn't aware of).</span></span> <span data-ttu-id="420f8-164">L'aggregazione o l'arrotondamento possono essere eseguiti anche nel tempo. Ad esempio, è possibile limitare la velocità massima a cui un ologramma può variare a distanza dall'utente.</span><span class="sxs-lookup"><span data-stu-id="420f8-164">Aggregation or smoothing can also be performed over time; for example, you can limit the maximum speed at which a hologram can vary in distance from the user.</span></span> <span data-ttu-id="420f8-165">La semplice limitazione del valore della distanza minima e massima può essere utile, in modo che l'ologramma spostato non venga improvvisamente spostato in distanza o si arresti in modo anomalo nel viso dell'utente.</span><span class="sxs-lookup"><span data-stu-id="420f8-165">Simply limiting the minimum and maximum distance value can also help, so the hologram being moved doesn't suddenly fly away into the distance or come crashing back into the user's face.</span></span>

<span data-ttu-id="420f8-166">Le applicazioni possono anche usare la forma e la direzione delle superfici per guidare il posizionamento degli ologrammi.</span><span class="sxs-lookup"><span data-stu-id="420f8-166">Applications can also use the shape and direction of surfaces to guide hologram placement.</span></span> <span data-ttu-id="420f8-167">Un recintino olografico non deve penetrare attraverso le pareti e deve essere allineato con il piano anche se è leggermente non uniforme.</span><span class="sxs-lookup"><span data-stu-id="420f8-167">A holographic chair shouldn't penetrate through walls and should sit flush with the floor even if it's slightly uneven.</span></span> <span data-ttu-id="420f8-168">Questo tipo di funzionalità probabilmente si baserebbe sull'uso di collisioni fisiche anziché di raycast, tuttavia si applicano problemi simili.</span><span class="sxs-lookup"><span data-stu-id="420f8-168">This kind of functionality would likely rely upon the use of physics collisions rather than raycasts, however similar concerns will apply.</span></span> <span data-ttu-id="420f8-169">Se l'ologramma posizionato ha molti poligoni di piccole dimensioni che si espandono, ad esempio gli slittamenti su una superficie spaziale, può essere opportuno espandere la rappresentazione fisica di tali poligoni in modo che siano più larghi e uniformi, in modo che possano scorrere sulle superfici spaziali senza instagliarsi.</span><span class="sxs-lookup"><span data-stu-id="420f8-169">If the hologram being placed has many small polygons that stick out, like the legs on a chair, it may make sense to expand the physics representation of those polygons to something wider and smoother so that they're more able to slide over spatial surfaces without snagging.</span></span>

<span data-ttu-id="420f8-170">All'estrema, l'input dell'utente può essere semplificato completamente e le superfici spaziali possono essere usate per eseguire il posizionamento dell'ologramma completamente automatico.</span><span class="sxs-lookup"><span data-stu-id="420f8-170">At its extreme, user input can be simplified away entirely and spatial surfaces can be used to do entirely automatic hologram placement.</span></span> <span data-ttu-id="420f8-171">Ad esempio, l'applicazione potrebbe posizionare un interruttore di luce olografico in un punto qualsiasi della barriera per fare in modo che l'utente prema.</span><span class="sxs-lookup"><span data-stu-id="420f8-171">For example, the application could place a holographic light-switch somewhere on the wall for the user to press.</span></span> <span data-ttu-id="420f8-172">La stessa avvertenza sulla prevedibilità si applica doppiamente in questo caso. se l'utente si aspetta il controllo sul posizionamento degli ologrammi, ma l'applicazione non sempre posiziona gli ologrammi nel punto previsto (se il commutatore di luce appare in un punto in cui l'utente non può raggiungere), questa sarà un'esperienza frustrante.</span><span class="sxs-lookup"><span data-stu-id="420f8-172">The same caveat about predictability applies doubly here; if the user expects control over hologram placement, but the application doesn't always place holograms where they expect (if the light-switch appears somewhere that the user can't reach), then this will be a frustrating experience.</span></span> <span data-ttu-id="420f8-173">In realtà può essere peggiore eseguire il posizionamento automatico che richiede la correzione dell'utente in un certo periodo di tempo, piuttosto che richiedere all'utente di eseguire sempre il posizionamento; poiché è previsto un posizionamento automatico *corretto,* la correzione manuale sembra un carico di lavoro.</span><span class="sxs-lookup"><span data-stu-id="420f8-173">It can actually be worse to do automatic placement that requires user correction some of the time, than to just require the user to always do placement themselves; because successful automatic placement is *expected*, manual correction feels like a burden!</span></span>

<span data-ttu-id="420f8-174">Si noti anche che la capacità di un'applicazione di usare superfici spaziali per il posizionamento dipende in larga parte dall'esperienza di [analisi dell'applicazione.](spatial-mapping.md#the-environment-scanning-experience)</span><span class="sxs-lookup"><span data-stu-id="420f8-174">Note also that the ability of an application to use spatial surfaces for placement depends heavily on the application's [scanning experience](spatial-mapping.md#the-environment-scanning-experience).</span></span> <span data-ttu-id="420f8-175">Se una superficie non è stata analizzata, non può essere usata per il posizionamento.</span><span class="sxs-lookup"><span data-stu-id="420f8-175">If a surface hasn't been scanned, then it cannot be used for placement.</span></span> <span data-ttu-id="420f8-176">È l'applicazione a rendere questa operazione chiara per l'utente, in modo che possa contribuire alla scansione di nuove superfici o selezionare una nuova posizione.</span><span class="sxs-lookup"><span data-stu-id="420f8-176">It's up to the application to make this clear to the user, so that they can either help scan new surfaces or select a new location.</span></span>

<span data-ttu-id="420f8-177">Il feedback visivo per l'utente è di importanza fondamentale durante il posizionamento.</span><span class="sxs-lookup"><span data-stu-id="420f8-177">Visual feedback to the user is of paramount importance during placement.</span></span> <span data-ttu-id="420f8-178">L'utente deve sapere dove si basa l'ologramma sulla superficie più vicina con [effetti di messa a terra.](spatial-mapping.md#visualization)</span><span class="sxs-lookup"><span data-stu-id="420f8-178">The user needs to know where the hologram is based on the nearest surface with [grounding effects](spatial-mapping.md#visualization).</span></span> <span data-ttu-id="420f8-179">Devono comprendere perché lo spostamento dell'ologramma è vincolato (ad esempio, a causa di collisioni con un'altra superficie vicina).</span><span class="sxs-lookup"><span data-stu-id="420f8-179">They should understand why the movement of their hologram is being constrained (for example, because of collisions with another nearby surface).</span></span> <span data-ttu-id="420f8-180">Se non possono inserire un ologramma nella posizione corrente, il feedback visivo dovrebbe chiarire perché no.</span><span class="sxs-lookup"><span data-stu-id="420f8-180">If they can't place a hologram in the current location, then visual feedback should make it clear why not.</span></span> <span data-ttu-id="420f8-181">Ad esempio, se l'utente sta tentando di posizionare un divano olografico bloccato a metà strada nella parete, le parti del divano che si trova dietro la parete dovrebbero pulsare in un colore adirato.</span><span class="sxs-lookup"><span data-stu-id="420f8-181">For example, if the user is trying to place a holographic couch stuck half-way into the wall, then the portions of the couch that are behind the wall should pulsate in an angry color.</span></span> <span data-ttu-id="420f8-182">Al contrario, se l'applicazione non trova una superficie spaziale in una posizione in cui l'utente può visualizzare una superficie reale, l'applicazione deve chiarire questo punto.</span><span class="sxs-lookup"><span data-stu-id="420f8-182">Or conversely, if the application can't find a spatial surface in a location where the user can see a real-world surface, then the application should make this clear.</span></span> <span data-ttu-id="420f8-183">L'ovvia assenza di un effetto di messa a terra in questo settore può raggiungere questo scopo.</span><span class="sxs-lookup"><span data-stu-id="420f8-183">The obvious absence of a grounding effect in this area may achieve this purpose.</span></span>

### <a name="occlusion"></a><span data-ttu-id="420f8-184">Occlusione</span><span class="sxs-lookup"><span data-stu-id="420f8-184">Occlusion</span></span>

<span data-ttu-id="420f8-185">Uno degli usi principali delle superfici di mapping spaziale è semplicemente occludere gli ologrammi.</span><span class="sxs-lookup"><span data-stu-id="420f8-185">One of the primary uses of spatial mapping surfaces is simply to occlude holograms.</span></span> <span data-ttu-id="420f8-186">Questo comportamento semplice ha un impatto enorme sul realistico percepito degli ologrammi, contribuendo a creare un senso viscerale che in realtà si annida nello stesso spazio fisico dell'utente.</span><span class="sxs-lookup"><span data-stu-id="420f8-186">This simple behavior has a huge impact on the perceived realism of holograms, helping to create a visceral sense that really inhabits the same physical space as the user.</span></span>

<span data-ttu-id="420f8-187">Occlusion fornisce anche informazioni all'utente. Quando un ologramma sembra essere occluso da una superficie reale, questo fornisce un feedback visivo aggiuntivo sulla posizione spaziale di tale ologramma nel mondo.</span><span class="sxs-lookup"><span data-stu-id="420f8-187">Occlusion also provides information to the user; when a hologram appears to be occluded by a real-world surface, this provides extra visual feedback as to the spatial location of that hologram in the world.</span></span> <span data-ttu-id="420f8-188">Al contrario, l'occlusione può anche nascondere in modo utile *le* informazioni all'utente. Ologrammi occluding dietro le pareti possono ridurre l'ingombro visivo in modo intuitivo.</span><span class="sxs-lookup"><span data-stu-id="420f8-188">Conversely, occlusion can also usefully *hide* information from the user; occluding holograms behind walls can reduce visual clutter in an intuitive way.</span></span> <span data-ttu-id="420f8-189">Per nascondere o rivelare un ologramma, l'utente deve semplicemente spostare la testa.</span><span class="sxs-lookup"><span data-stu-id="420f8-189">To hide or reveal a hologram, the user merely has to move their head.</span></span>

<span data-ttu-id="420f8-190">L'occlusione può essere usata anche per creare aspettative per un'interfaccia utente naturale basata su interazioni fisiche familiari. Se un ologramma è occluso da una superficie, è perché tale superficie è solida, quindi l'utente deve aspettarsi che l'ologramma *collida* con tale superficie e non la passi attraverso di essa.</span><span class="sxs-lookup"><span data-stu-id="420f8-190">Occlusion can also be used to prime expectations for a natural user interface based upon familiar physical interactions; if a hologram is occluded by a surface it is because that surface is solid, so the user should expect that the hologram will *collide* with that surface and not pass through it.</span></span>

<span data-ttu-id="420f8-191">A volte, l'occlusione degli ologrammi non è desiderabile.</span><span class="sxs-lookup"><span data-stu-id="420f8-191">Sometimes, occlusion of holograms is undesirable.</span></span> <span data-ttu-id="420f8-192">Se un utente deve interagire con un ologramma, deve vederlo, anche se si trova dietro una superficie reale.</span><span class="sxs-lookup"><span data-stu-id="420f8-192">If a user needs to interact with a hologram, then they need to see it - even if it is behind a real-world surface.</span></span> <span data-ttu-id="420f8-193">In questi casi, è in genere opportuno eseguire il rendering di un ologramma in modo diverso quando è occluso (ad esempio, riducendone la luminosità).</span><span class="sxs-lookup"><span data-stu-id="420f8-193">In such cases, it usually makes sense to render such a hologram differently when it's occluded (for example, by reducing its brightness).</span></span> <span data-ttu-id="420f8-194">In questo modo, l'utente può individuare visivamente l'ologramma, ma saprà comunque che si trova dietro qualcosa.</span><span class="sxs-lookup"><span data-stu-id="420f8-194">This way, the user can visually locate the hologram, but they'll still know it's behind something.</span></span>

### <a name="physics"></a><span data-ttu-id="420f8-195">Fisica</span><span class="sxs-lookup"><span data-stu-id="420f8-195">Physics</span></span>

<span data-ttu-id="420f8-196">L'uso della simulazione fisica è un altro modo  in cui il mapping spaziale può essere usato per rafforzare la presenza di ologrammi nello spazio fisico dell'utente.</span><span class="sxs-lookup"><span data-stu-id="420f8-196">The use of physics simulation is another way in which spatial mapping can be used to reinforce the *presence* of holograms in the user's physical space.</span></span> <span data-ttu-id="420f8-197">Quando la palla a gomito olografica si lancia realisticamente dalla mia scriva, si butta sul piano e scompare sotto il divano, potrebbe essere difficile pensare che non ci sia.</span><span class="sxs-lookup"><span data-stu-id="420f8-197">When my holographic rubber ball rolls realistically off my desk, bounces across the floor and disappears under the couch, it might be hard for me to believe that it's not there.</span></span>

<span data-ttu-id="420f8-198">La simulazione fisica offre anche a un'applicazione la possibilità di usare interazioni naturali e familiari basate sulla fisica.</span><span class="sxs-lookup"><span data-stu-id="420f8-198">Physics simulation also provides the opportunity for an application to use natural and familiar physics-based interactions.</span></span> <span data-ttu-id="420f8-199">Spostare un elemento di elementi olografici sul piano sarà probabilmente più semplice per l'utente se risponde come se scorresse sul piano con l'inerzia e l'attrito appropriati.</span><span class="sxs-lookup"><span data-stu-id="420f8-199">Moving a piece of holographic furniture around on the floor will likely be easier for the user if the furniture responds as if it were sliding across the floor with the appropriate inertia and friction.</span></span>

<span data-ttu-id="420f8-200">Per generare comportamenti fisici realistici, è probabile [](spatial-mapping.md#mesh-processing) che sia necessario eseguire alcune elaborazioni mesh, ad esempio riempire i fori, rimuovere le allucinazioni mobili e smussare le superfici approssimative.</span><span class="sxs-lookup"><span data-stu-id="420f8-200">To generate realistic physical behaviors, you'll likely need to do some [mesh processing](spatial-mapping.md#mesh-processing) such as filling holes, removing floating hallucinations and smoothing rough surfaces.</span></span>

<span data-ttu-id="420f8-201">È anche necessario considerare il modo in cui l'esperienza di analisi [dell'applicazione](spatial-mapping.md#the-environment-scanning-experience) influisce sulla simulazione fisica.</span><span class="sxs-lookup"><span data-stu-id="420f8-201">You'll also need to consider how your application's [scanning experience](spatial-mapping.md#the-environment-scanning-experience) influences its physics simulation.</span></span> <span data-ttu-id="420f8-202">In primo luogo, le superfici mancanti non entra in conflitto con nulla. cosa accade quando la palla da lancio si lancia verso il basso e fuori dalla fine del mondo noto?</span><span class="sxs-lookup"><span data-stu-id="420f8-202">Firstly, missing surfaces won't collide with anything; what happens when the rubber ball rolls off down the corridor and off the end of the known world?</span></span> <span data-ttu-id="420f8-203">In secondo luogo, è necessario decidere se si continuerà a rispondere alle modifiche nell'ambiente nel tempo.</span><span class="sxs-lookup"><span data-stu-id="420f8-203">Secondly, you need to decide whether you'll continue to respond to changes in the environment over time.</span></span> <span data-ttu-id="420f8-204">In alcuni casi, è necessario rispondere il più rapidamente possibile. ad esempio se l'utente usa porte e mobili come barricate mobili in difesa contro una tempesta di frecce romane in ingresso.</span><span class="sxs-lookup"><span data-stu-id="420f8-204">In some cases, you'll want to respond as quickly as possible; say if the user is using doors and furniture as movable barricades in defense against a tempest of incoming Roman arrows.</span></span> <span data-ttu-id="420f8-205">In altri casi, tuttavia, è possibile ignorare i nuovi aggiornamenti. guidando l'auto olografica per la corsa sul terreno, improvvisamente il cane decide di sedersi al centro della strada potrebbe non essere così divertente.</span><span class="sxs-lookup"><span data-stu-id="420f8-205">In other cases though, you may want to ignore new updates; driving your holographic sports car around the racetrack on your floor may suddenly not be so fun if your dog decides to sit in the middle of the track.</span></span>

### <a name="navigation"></a><span data-ttu-id="420f8-206">Spostamento</span><span class="sxs-lookup"><span data-stu-id="420f8-206">Navigation</span></span>

<span data-ttu-id="420f8-207">Le applicazioni possono usare i dati di mapping spaziale per concedere ai caratteri olografici (o agli agenti) la possibilità di spostarsi nel mondo reale nello stesso modo di una persona reale.</span><span class="sxs-lookup"><span data-stu-id="420f8-207">Applications can use spatial mapping data to grant holographic characters (or agents) the ability to navigate the real world in the same way a real person would.</span></span> <span data-ttu-id="420f8-208">Ciò consente di rafforzare la presenza di caratteri olografici limitandoli allo stesso set di comportamenti naturali e familiari di quelli dell'utente e dei loro amici.</span><span class="sxs-lookup"><span data-stu-id="420f8-208">This can help reinforce the presence of holographic characters by restricting them to the same set of natural, familiar behaviors as those of the user and their friends.</span></span>

<span data-ttu-id="420f8-209">Le funzionalità di navigazione possono essere utili anche per gli utenti.</span><span class="sxs-lookup"><span data-stu-id="420f8-209">Navigation capabilities could be useful to users as well.</span></span> <span data-ttu-id="420f8-210">Dopo che una mappa di navigazione è stata compilata in una determinata area, può essere condivisa per fornire indicazioni olografiche per i nuovi utenti che non hanno familiarità con tale posizione.</span><span class="sxs-lookup"><span data-stu-id="420f8-210">Once a navigation map has been built in a given area, it could be shared to provide holographic directions for new users unfamiliar with that location.</span></span> <span data-ttu-id="420f8-211">Questa mappa può essere progettata per mantenere fluido il flusso del traffico pedonale o per evitare incidenti in posizioni pericolose come i cantiere.</span><span class="sxs-lookup"><span data-stu-id="420f8-211">This map could be designed to help keep pedestrian 'traffic' flowing smoothly, or to avoid accidents in dangerous locations like construction sites.</span></span>

<span data-ttu-id="420f8-212">Le principali sfide tecniche legate all'implementazione della funzionalità di navigazione saranno il rilevamento affidabile delle superfici a piedi (gli esseri umani non passano sulle tabelle) e l'adattamento alle modifiche dell'ambiente (gli esseri umani non attraversano porte chiuse).</span><span class="sxs-lookup"><span data-stu-id="420f8-212">The key technical challenges involved in implementing navigation functionality will be reliable detection of walkable surfaces (humans don't walk on tables!) and graceful adaptation to changes in the environment (humans don't walk through closed doors!).</span></span> <span data-ttu-id="420f8-213">La mesh può richiedere alcune [elaborazioni](spatial-mapping.md#mesh-processing) prima che sia utilizzabile per la pianificazione del percorso e la navigazione da parte di un carattere virtuale.</span><span class="sxs-lookup"><span data-stu-id="420f8-213">The mesh may require some [processing](spatial-mapping.md#mesh-processing) before it's usable for path-planning and navigation by a virtual character.</span></span> <span data-ttu-id="420f8-214">Smussare la mesh e rimuovere le allucinazioni può aiutare a evitare che i caratteri si bloccano.</span><span class="sxs-lookup"><span data-stu-id="420f8-214">Smoothing the mesh and removing hallucinations may help avoid characters becoming stuck.</span></span> <span data-ttu-id="420f8-215">È anche possibile semplificare drasticamente la mesh per velocizzare la pianificazione del percorso e i calcoli di navigazione del carattere.</span><span class="sxs-lookup"><span data-stu-id="420f8-215">You may also wish to drastically simplify the mesh to speed up your character's path-planning and navigation calculations.</span></span> <span data-ttu-id="420f8-216">Queste sfide hanno ricevuto una grande attenzione nello sviluppo della tecnologia dei videogiochi e sono disponibili numerose pubblicazioni di ricerca su questi argomenti.</span><span class="sxs-lookup"><span data-stu-id="420f8-216">These challenges have received a great deal of attention in the development of video game technology, and there's a wealth of available research literature on these topics.</span></span>

<span data-ttu-id="420f8-217">La funzionalità NavMesh incorporata in Unity non può essere usata con le superfici di mapping spaziale.</span><span class="sxs-lookup"><span data-stu-id="420f8-217">The built-in NavMesh functionality in Unity cannot be used with spatial mapping surfaces.</span></span> <span data-ttu-id="420f8-218">Ciò è dovuto al fatto che le superfici di mapping spaziale non sono note fino all'avvio dell'applicazione, ma i file di dati NavMesh devono essere generati in anticipo dagli asset di origine.</span><span class="sxs-lookup"><span data-stu-id="420f8-218">This is because spatial mapping surfaces aren't known until the application starts, but NavMesh data files need to be generated from source assets ahead of time.</span></span> <span data-ttu-id="420f8-219">Si noti anche che il sistema [](spatial-mapping.md#the-environment-scanning-experience) di mapping spaziale non fornirà informazioni sulle superfici lontano dalla posizione corrente dell'utente.</span><span class="sxs-lookup"><span data-stu-id="420f8-219">Also note that, the spatial mapping system won't provide [information about surfaces far away](spatial-mapping.md#the-environment-scanning-experience) from the user's current location.</span></span> <span data-ttu-id="420f8-220">L'applicazione deve quindi "ricordare" se stessa se si tratta di creare una mappa di un'area di grandi dimensioni.</span><span class="sxs-lookup"><span data-stu-id="420f8-220">So the application must 'remember' surfaces itself if it's to build a map of a large area.</span></span>

### <a name="visualization"></a><span data-ttu-id="420f8-221">Visualizzazione</span><span class="sxs-lookup"><span data-stu-id="420f8-221">Visualization</span></span>

<span data-ttu-id="420f8-222">Nella maggior parte dei casi è appropriato che le superfici spaziali siano invisibili. per ridurre al minimo la confusione visiva e lasciare che il mondo reale parla da solo.</span><span class="sxs-lookup"><span data-stu-id="420f8-222">Most of the time it's appropriate for spatial surfaces to be invisible; to minimize visual clutter and let the real world speak for itself.</span></span> <span data-ttu-id="420f8-223">Tuttavia, a volte è utile visualizzare direttamente le superfici di mapping spaziale, nonostante le controparti reali siano visibili.</span><span class="sxs-lookup"><span data-stu-id="420f8-223">However, sometimes it's useful to visualize spatial mapping surfaces directly, despite their real-world counterparts being visible.</span></span>

<span data-ttu-id="420f8-224">Ad esempio, quando l'utente sta provando a posizionare un ologramma su una superficie (ad esempio posizionando un mobile olografico sulla superficie), può essere utile "terra" l'ologramma proiettando un'ombreggiatura sulla superficie.</span><span class="sxs-lookup"><span data-stu-id="420f8-224">For example, when the user is trying to place a hologram onto a surface (placing a holographic cabinet on the wall, say) it can be useful to 'ground' the hologram by casting a shadow onto the surface.</span></span> <span data-ttu-id="420f8-225">In questo modo l'utente ha un'idea molto più chiara della prossimità fisica esatta tra l'ologramma e la superficie.</span><span class="sxs-lookup"><span data-stu-id="420f8-225">This gives the user a much clearer sense of the exact physical proximity between the hologram and the surface.</span></span> <span data-ttu-id="420f8-226">Questo è anche un esempio della procedura più generale di "anteprima" di una modifica prima che l'utente eserciti il commit.</span><span class="sxs-lookup"><span data-stu-id="420f8-226">This is also an example of the more general practice of visually 'previewing' a change before the user commits to it.</span></span>

<span data-ttu-id="420f8-227">Visualizzando le superfici, l'applicazione può condividere con l'utente la comprensione dell'ambiente.</span><span class="sxs-lookup"><span data-stu-id="420f8-227">By visualizing surfaces, the application can share with the user its understanding of the environment.</span></span> <span data-ttu-id="420f8-228">Ad esempio, un gioco da tavolo olografico potrebbe visualizzare le superfici orizzontali identificate come "tabelle", in modo che l'utente sappia dove deve andare per interagire.</span><span class="sxs-lookup"><span data-stu-id="420f8-228">For example, a holographic board game could visualize the horizontal surfaces that it has identified as 'tables', so the user knows where they should go to interact.</span></span>

<span data-ttu-id="420f8-229">La visualizzazione delle superfici può essere un modo utile per visualizzare gli spazi vicini dell'utente nascosti.</span><span class="sxs-lookup"><span data-stu-id="420f8-229">Visualizing surfaces can be a useful way to show the user nearby spaces that are hidden from view.</span></span> <span data-ttu-id="420f8-230">In questo modo è possibile concedere all'utente l'accesso alla cucina (e a tutti gli ologrammi contenuti) dal proprio ambiente.</span><span class="sxs-lookup"><span data-stu-id="420f8-230">This could provide a way to give the user access to their kitchen (and all of its contained holograms) from their living room.</span></span>

<span data-ttu-id="420f8-231">Le mesh di superficie fornite dal mapping spaziale potrebbero non essere particolarmente "pulite".</span><span class="sxs-lookup"><span data-stu-id="420f8-231">The surface meshes provided by spatial mapping may not be particularly 'clean'.</span></span> <span data-ttu-id="420f8-232">È importante visualizzarle in modo appropriato.</span><span class="sxs-lookup"><span data-stu-id="420f8-232">It's important to visualize them appropriately.</span></span> <span data-ttu-id="420f8-233">I calcoli di illuminazione tradizionali possono evidenziare gli errori nelle normali della superficie in modo visivamente distrazione, mentre le trame "pulite" proiettate sulla superficie possono contribuire a dare un aspetto più ordinato.</span><span class="sxs-lookup"><span data-stu-id="420f8-233">Traditional lighting calculations may highlight errors in surface normals in a visually distracting manner, while 'clean' textures projected onto the surface may help to give it a tidier appearance.</span></span> <span data-ttu-id="420f8-234">È anche possibile eseguire l'elaborazione [mesh](spatial-mapping.md#mesh-processing) per migliorare le proprietà della mesh, prima che venga eseguito il rendering delle superfici.</span><span class="sxs-lookup"><span data-stu-id="420f8-234">It's also possible to do [mesh processing](spatial-mapping.md#mesh-processing) to improve mesh properties, before the surfaces are rendered.</span></span>

> [!NOTE]
> <span data-ttu-id="420f8-235">HoloLens 2 implementa un nuovo runtime [scene understanding,](scene-understanding.md)che offre agli sviluppatori di realtà mista una rappresentazione strutturata e di alto livello dell'ambiente progettata per semplificare l'implementazione di posizionamento, occlusione, fisica e navigazione.</span><span class="sxs-lookup"><span data-stu-id="420f8-235">HoloLens 2 implements a new [Scene Understanding Runtime](scene-understanding.md), that provides Mixed Reality developers with a structured, high-level environment representation designed to simplify the implementation of placement, occlusion, physics and navigation.</span></span>

## <a name="using-the-surface-observer"></a><span data-ttu-id="420f8-236">Uso di Surface Observer</span><span class="sxs-lookup"><span data-stu-id="420f8-236">Using The Surface Observer</span></span>

<span data-ttu-id="420f8-237">Il punto iniziale per il mapping spaziale è l'osservatore di superficie.</span><span class="sxs-lookup"><span data-stu-id="420f8-237">The starting point for spatial mapping is the surface observer.</span></span> <span data-ttu-id="420f8-238">Il flusso del programma è il seguente:</span><span class="sxs-lookup"><span data-stu-id="420f8-238">Program flow is as follows:</span></span>
* <span data-ttu-id="420f8-239">Creare un oggetto osservatore di superficie</span><span class="sxs-lookup"><span data-stu-id="420f8-239">Create a surface observer object</span></span>
   * <span data-ttu-id="420f8-240">Specificare uno o più volumi spaziali per definire le aree di interesse in cui l'applicazione desidera ricevere i dati di mapping spaziale.</span><span class="sxs-lookup"><span data-stu-id="420f8-240">Provide one or more spatial volumes, to define the regions of interest in which the application wishes to receive spatial mapping data.</span></span> <span data-ttu-id="420f8-241">Un volume spaziale è semplicemente una forma che definisce un'area di spazio, ad esempio una sfera o una casella.</span><span class="sxs-lookup"><span data-stu-id="420f8-241">A spatial volume is simply a shape defining a region of space, such as a sphere or a box.</span></span>
   * <span data-ttu-id="420f8-242">Usare un volume spaziale con un sistema di coordinate spaziali bloccato dal mondo per identificare un'area fissa del mondo fisico.</span><span class="sxs-lookup"><span data-stu-id="420f8-242">Use a spatial volume with a world-locked spatial coordinate system to identify a fixed region of the physical world.</span></span>
   * <span data-ttu-id="420f8-243">Usare un volume spaziale, aggiornato ogni fotogramma con un sistema di coordinate spaziali bloccato dal corpo, per identificare un'area di spazio che si sposta (ma non ruota) con l'utente.</span><span class="sxs-lookup"><span data-stu-id="420f8-243">Use a spatial volume, updated each frame with a body-locked spatial coordinate system, to identify a region of space that moves (but doesn't rotate) with the user.</span></span>
   * <span data-ttu-id="420f8-244">Questi volumi spaziali possono essere modificati in un secondo momento in qualsiasi momento, quando lo stato dell'applicazione o dell'utente cambia.</span><span class="sxs-lookup"><span data-stu-id="420f8-244">These spatial volumes may be changed later at any time, as the status of the application or the user changes.</span></span>
* <span data-ttu-id="420f8-245">Usare il polling o la notifica per recuperare informazioni sulle superfici spaziali</span><span class="sxs-lookup"><span data-stu-id="420f8-245">Use polling or notification to retrieve information about spatial surfaces</span></span>
   * <span data-ttu-id="420f8-246">È possibile "eseguire il polling" dell'osservatore di superficie per lo stato della superficie spaziale in qualsiasi momento.</span><span class="sxs-lookup"><span data-stu-id="420f8-246">You may 'poll' the surface observer for spatial surface status at any time.</span></span> <span data-ttu-id="420f8-247">È invece possibile registrarsi per l'evento "Surfaces changed" dell'osservatore di superficie, che invierà una notifica all'applicazione quando le superfici spaziali sono state modificate.</span><span class="sxs-lookup"><span data-stu-id="420f8-247">Instead, you may register for the surface observer's 'surfaces changed' event, which will notify the application when spatial surfaces have changed.</span></span>
   * <span data-ttu-id="420f8-248">Per un volume spaziale dinamico, ad esempio il frustum di visualizzazione o un volume bloccato dal corpo, le applicazioni dovranno eseguire il polling delle modifiche per ogni fotogramma impostando l'area di interesse e quindi ottenendo il set corrente di superfici spaziali.</span><span class="sxs-lookup"><span data-stu-id="420f8-248">For a dynamic spatial volume, such as the view frustum, or a body-locked volume, applications will need to poll for changes each frame by setting the region of interest and then obtaining the current set of spatial surfaces.</span></span>
   * <span data-ttu-id="420f8-249">Per un volume statico, ad esempio un cubo bloccato dal mondo che copre una singola stanza, le applicazioni possono registrarsi per l'evento "surfaces changed" per ricevere una notifica quando le superfici spaziali all'interno di tale volume potrebbero essere cambiate.</span><span class="sxs-lookup"><span data-stu-id="420f8-249">For a static volume, such as a world-locked cube covering a single room, applications may register for the 'surfaces changed' event to be notified when spatial surfaces inside that volume may have changed.</span></span>
* <span data-ttu-id="420f8-250">Elaborare le modifiche delle superfici</span><span class="sxs-lookup"><span data-stu-id="420f8-250">Process surfaces changes</span></span>
   * <span data-ttu-id="420f8-251">Scorrere il set specificato di superfici spaziali.</span><span class="sxs-lookup"><span data-stu-id="420f8-251">Iterate the provided set of spatial surfaces.</span></span>
   * <span data-ttu-id="420f8-252">Classificare le superfici spaziali come aggiunte, modificate o rimosse.</span><span class="sxs-lookup"><span data-stu-id="420f8-252">Classify spatial surfaces as added, changed, or removed.</span></span>
   * <span data-ttu-id="420f8-253">Per ogni superficie spaziale aggiunta o modificata, se appropriato inviare una richiesta asincrona per ricevere una mesh aggiornata che rappresenta lo stato corrente della superficie al livello di dettaglio desiderato.</span><span class="sxs-lookup"><span data-stu-id="420f8-253">For each added or changed spatial surface, if appropriate submit an asynchronous request to receive updated mesh representing the surface's current state at the desired level of detail.</span></span>
* <span data-ttu-id="420f8-254">Elaborare la richiesta di mesh asincrona (altre informazioni nelle sezioni seguenti).</span><span class="sxs-lookup"><span data-stu-id="420f8-254">Process the asynchronous mesh request (more details in following sections).</span></span>

## <a name="mesh-caching"></a><span data-ttu-id="420f8-255">Memorizzazione nella cache mesh</span><span class="sxs-lookup"><span data-stu-id="420f8-255">Mesh Caching</span></span>

<span data-ttu-id="420f8-256">Le superfici spaziali sono rappresentate da mesh a triangolo denso.</span><span class="sxs-lookup"><span data-stu-id="420f8-256">Spatial surfaces are represented by dense triangle meshes.</span></span> <span data-ttu-id="420f8-257">L'archiviazione, il rendering e l'elaborazione di queste mesh possono utilizzare risorse di calcolo e di archiviazione significative.</span><span class="sxs-lookup"><span data-stu-id="420f8-257">Storing, rendering, and processing these meshes can consume significant computational and storage resources.</span></span> <span data-ttu-id="420f8-258">Di conseguenza, ogni applicazione deve adottare uno schema di memorizzazione nella cache mesh appropriato alle proprie esigenze, per ridurre al minimo le risorse usate per l'elaborazione e l'archiviazione mesh.</span><span class="sxs-lookup"><span data-stu-id="420f8-258">As such, each application should adopt a mesh caching scheme appropriate to its needs, to minimize the resources used for mesh processing and storage.</span></span> <span data-ttu-id="420f8-259">Questo schema deve determinare quali mesh mantenere e quali rimuovere e quando aggiornare la mesh per ogni superficie spaziale.</span><span class="sxs-lookup"><span data-stu-id="420f8-259">This scheme should determine which meshes to keep and which to discard, and when to update the mesh for each spatial surface.</span></span>

<span data-ttu-id="420f8-260">Molte delle considerazioni illustrate illustrano direttamente come l'applicazione deve approcciare la memorizzazione nella cache mesh.</span><span class="sxs-lookup"><span data-stu-id="420f8-260">Many of the considerations discussed there will directly inform how your application should approach mesh caching.</span></span> <span data-ttu-id="420f8-261">È necessario considerare il modo in cui l'utente si sposta nell'ambiente, quali superfici sono necessarie, quando verranno osservate superfici diverse e quando devono essere acquisite le modifiche nell'ambiente.</span><span class="sxs-lookup"><span data-stu-id="420f8-261">You should consider how the user moves through the environment, which surfaces are needed, when different surfaces will be observed and when changes in the environment should be captured.</span></span>

<span data-ttu-id="420f8-262">Quando si interpreta l'evento "surfaces changed" fornito dall'osservatore di superficie, la logica di memorizzazione nella cache della mesh di base è la seguente:</span><span class="sxs-lookup"><span data-stu-id="420f8-262">When interpreting the 'surfaces changed' event provided by the surface observer, the basic mesh caching logic is as follows:</span></span>
* <span data-ttu-id="420f8-263">Se l'applicazione vede un ID di superficie spaziale che non ha mai visto in precedenza, deve considerarlo come una nuova superficie spaziale.</span><span class="sxs-lookup"><span data-stu-id="420f8-263">If the application sees a spatial surface ID that it hasn't seen before, it should treat this as a new spatial surface.</span></span>
* <span data-ttu-id="420f8-264">Se l'applicazione vede una superficie spaziale con un ID noto ma con una nuova ora di aggiornamento, deve considerarla come una superficie spaziale aggiornata.</span><span class="sxs-lookup"><span data-stu-id="420f8-264">If the application sees a spatial surface with a known ID but with a new update time, it should treat this as an updated spatial surface.</span></span>
* <span data-ttu-id="420f8-265">Se l'applicazione non vede più una superficie spaziale con un ID noto, deve considerarla come una superficie spaziale rimossa.</span><span class="sxs-lookup"><span data-stu-id="420f8-265">If the application no longer sees a spatial surface with a known ID, it should treat this as a removed spatial surface.</span></span>

<span data-ttu-id="420f8-266">Ogni applicazione può quindi effettuare le scelte seguenti:</span><span class="sxs-lookup"><span data-stu-id="420f8-266">It's up to each application to then make the following choices:</span></span>
* <span data-ttu-id="420f8-267">Per le nuove superfici spaziali, è necessario che sia richiesta la mesh?</span><span class="sxs-lookup"><span data-stu-id="420f8-267">For new spatial surfaces, should mesh be requested?</span></span>
   * <span data-ttu-id="420f8-268">In genere, la mesh deve essere richiesta immediatamente per le nuove superfici spaziali, che possono fornire nuove informazioni utili all'utente.</span><span class="sxs-lookup"><span data-stu-id="420f8-268">Generally mesh should be requested immediately for new spatial surfaces, which may provide useful new information to the user.</span></span>
   * <span data-ttu-id="420f8-269">Tuttavia, alle nuove superfici spaziali nelle vicinanze e davanti all'utente deve essere data priorità e la mesh deve essere richiesta per prima.</span><span class="sxs-lookup"><span data-stu-id="420f8-269">However, new spatial surfaces near and in front of the user should be given priority and their mesh should be requested first.</span></span>
   * <span data-ttu-id="420f8-270">Se la nuova mesh non è necessaria, ad esempio se l'applicazione ha bloccato in modo permanente o temporaneo il modello dell'ambiente, non deve essere richiesta.</span><span class="sxs-lookup"><span data-stu-id="420f8-270">If the new mesh isn't needed, if for example the application has permanently or temporarily 'frozen' its model of the environment, then it shouldn't be requested.</span></span>
* <span data-ttu-id="420f8-271">Per le superfici spaziali aggiornate, è necessario che sia richiesta la mesh?</span><span class="sxs-lookup"><span data-stu-id="420f8-271">For updated spatial surfaces, should mesh be requested?</span></span>
   * <span data-ttu-id="420f8-272">Alle superfici spaziali aggiornate vicino e davanti all'utente deve essere data priorità e la mesh deve essere richiesta per prima.</span><span class="sxs-lookup"><span data-stu-id="420f8-272">Updated spatial surfaces near and in front of the user should be given priority and their mesh should be requested first.</span></span>
   * <span data-ttu-id="420f8-273">Può anche essere opportuno assegnare priorità più elevate alle nuove superfici rispetto alle superfici aggiornate, soprattutto durante l'esperienza di analisi.</span><span class="sxs-lookup"><span data-stu-id="420f8-273">It may also be appropriate to give higher priority to new surfaces than to updated surfaces, especially during the scanning experience.</span></span>
   * <span data-ttu-id="420f8-274">Per limitare i costi di elaborazione, le applicazioni possono voler limitare la frequenza con cui elaborano gli aggiornamenti alle superfici spaziali.</span><span class="sxs-lookup"><span data-stu-id="420f8-274">To limit processing costs, applications may wish to throttle the rate at which they process updates to spatial surfaces.</span></span>
   * <span data-ttu-id="420f8-275">Potrebbe essere possibile dedurre che le modifiche a una superficie spaziale sono secondarie, ad esempio se i limiti della superficie sono piccoli, nel qual caso l'aggiornamento potrebbe non essere sufficientemente importante da elaborare.</span><span class="sxs-lookup"><span data-stu-id="420f8-275">It may be possible to infer that changes to a spatial surface are minor, for example if the bounds of the surface are small, in which case the update may not be important enough to process.</span></span>
   * <span data-ttu-id="420f8-276">Gli aggiornamenti alle superfici spaziali esterne all'area corrente di interesse dell'utente possono essere ignorati completamente, anche se in questo caso può essere più efficiente modificare i volumi di delimitazione spaziali in uso dall'osservatore di superficie.</span><span class="sxs-lookup"><span data-stu-id="420f8-276">Updates to spatial surfaces outside the current region of interest of the user may be ignored entirely, though in this case it may be more efficient to modify the spatial bounding volumes in use by the surface observer.</span></span>
* <span data-ttu-id="420f8-277">Per le superfici spaziali rimosse, la mesh deve essere eliminata?</span><span class="sxs-lookup"><span data-stu-id="420f8-277">For removed spatial surfaces, should mesh be discarded?</span></span>
   * <span data-ttu-id="420f8-278">In genere la mesh deve essere eliminata immediatamente per le superfici spaziali rimosse, in modo che l'occlusione dell'ologramma rimanga corretta.</span><span class="sxs-lookup"><span data-stu-id="420f8-278">Generally mesh should be discarded immediately for removed spatial surfaces, so that hologram occlusion remains correct.</span></span>
   * <span data-ttu-id="420f8-279">Tuttavia, se l'applicazione ha motivo di ritiene che una superficie spaziale riapparirà a breve (in base alla progettazione dell'esperienza utente), potrebbe essere più efficiente mantenerla piuttosto che eliminare la mesh e ricrearla di nuovo in un secondo momento.</span><span class="sxs-lookup"><span data-stu-id="420f8-279">However, if the application has reason to believe that a spatial surface will reappear shortly (based upon the design of the user experience), then it may be more efficient to keep it than to discard its mesh and recreate it again later.</span></span>
   * <span data-ttu-id="420f8-280">Se l'applicazione sta creando un modello su larga scala dell'ambiente dell'utente, potrebbe non voler eliminare alcuna mesh.</span><span class="sxs-lookup"><span data-stu-id="420f8-280">If the application is building a large-scale model of the user's environment, then it may not wish to discard any meshes at all.</span></span> <span data-ttu-id="420f8-281">Sarà comunque necessario limitare l'utilizzo delle risorse, possibilmente tramite lo spooling delle mesh su disco quando le superfici spaziali scompaiono.</span><span class="sxs-lookup"><span data-stu-id="420f8-281">It will still need to limit resource usage though, possibly by spooling meshes to disk as spatial surfaces disappear.</span></span>
   * <span data-ttu-id="420f8-282">Alcuni eventi relativamente rari durante la generazione di superfici spaziali possono causare la sostituzione delle superfici spaziali con nuove superfici spaziali in una posizione simile ma con ID diversi.</span><span class="sxs-lookup"><span data-stu-id="420f8-282">Some relatively rare events during spatial surface generation can cause spatial surfaces to be replaced by new spatial surfaces in a similar location but with different IDs.</span></span> <span data-ttu-id="420f8-283">Pertanto, le applicazioni che scelgono di non eliminare una superficie rimossa devono fare attenzione a non finire con più mesh di superfici spaziali altamente sovrapposte che coprono la stessa posizione.</span><span class="sxs-lookup"><span data-stu-id="420f8-283">So, applications that choose not to discard a removed surface should take care not to end up with multiple highly overlapped spatial surfaces meshes covering the same location.</span></span>
* <span data-ttu-id="420f8-284">La mesh deve essere eliminata per altre superfici spaziali?</span><span class="sxs-lookup"><span data-stu-id="420f8-284">Should mesh be discarded for any other spatial surfaces?</span></span>
   * <span data-ttu-id="420f8-285">Anche se esiste una superficie spaziale, se non è più utile per l'esperienza dell'utente, deve essere eliminata.</span><span class="sxs-lookup"><span data-stu-id="420f8-285">Even while a spatial surface exists, if it's no longer useful to the user's experience then it should be discarded.</span></span> <span data-ttu-id="420f8-286">Ad esempio, se l'applicazione "sostituisce" la stanza sull'altro lato di una porta con uno spazio virtuale alternativo, le superfici spaziali in tale stanza non sono più importanti.</span><span class="sxs-lookup"><span data-stu-id="420f8-286">For example, if the application 'replaces' the room on the other side of a doorway with an alternate virtual space then the spatial surfaces in that room no longer matter.</span></span>

<span data-ttu-id="420f8-287">Ecco un esempio di strategia di memorizzazione nella cache mesh, che usa l'isteria spaziale e temporale:</span><span class="sxs-lookup"><span data-stu-id="420f8-287">Here's an example mesh caching strategy, using spatial and temporal hysteresis:</span></span>
* <span data-ttu-id="420f8-288">Si consideri un'applicazione che vuole usare un volume spaziale a forma di frustum di interesse che segue lo sguardo dell'utente mentre guarda e si aggira.</span><span class="sxs-lookup"><span data-stu-id="420f8-288">Consider an application that wishes to use a frustum-shaped spatial volume of interest that follows the user's gaze as they look around and walk around.</span></span>
* <span data-ttu-id="420f8-289">Una superficie spaziale potrebbe scomparire temporaneamente da questo volume semplicemente perché l'utente si allontana dalla superficie o si allontana da esso... solo per guardare indietro o si avvicina di nuovo un momento dopo.</span><span class="sxs-lookup"><span data-stu-id="420f8-289">A spatial surface may disappear temporarily from this volume simply because the user looks away from the surface or steps further away from it... only to look back or moves closer again a moment later.</span></span> <span data-ttu-id="420f8-290">In questo caso, l'eliminazione e la nuova creazione della mesh per questa superficie rappresentano molte elaborazioni ridondanti.</span><span class="sxs-lookup"><span data-stu-id="420f8-290">In this case, discarding and re-creating the mesh for this surface represents many redundant processings.</span></span>
* <span data-ttu-id="420f8-291">Per ridurre il numero di modifiche elaborate, l'applicazione usa due osservatori della superficie spaziale, uno contenuto all'interno dell'altro.</span><span class="sxs-lookup"><span data-stu-id="420f8-291">To reduce the number of changes processed, the application uses two spatial surface observers, one contained within the other.</span></span> <span data-ttu-id="420f8-292">Il volume più grande è sferico e segue l'utente in modo "lazily"; si sposta solo quando necessario per assicurarsi che il centro si trova entro 2,0 metri dall'utente.</span><span class="sxs-lookup"><span data-stu-id="420f8-292">The larger volume is spherical and follows the user 'lazily'; it only moves when necessary to ensure that its center is within 2.0 meters of the user.</span></span>
* <span data-ttu-id="420f8-293">Le mesh di superficie spaziale nuove e aggiornate vengono sempre elaborate dall'osservatore della superficie interna più piccola, ma le mesh vengono memorizzate nella cache fino a quando non scompaiono dall'osservatore della superficie esterna più grande.</span><span class="sxs-lookup"><span data-stu-id="420f8-293">New and updated spatial surface meshes are always processed from the smaller inner surface observer, but meshes are cached until they disappear from the larger outer surface observer.</span></span> <span data-ttu-id="420f8-294">Ciò consente all'applicazione di evitare di elaborare molte modifiche ridondanti a causa dello spostamento dell'utente locale.</span><span class="sxs-lookup"><span data-stu-id="420f8-294">This allows the application to avoid processing many redundant changes because of local user movement.</span></span>
* <span data-ttu-id="420f8-295">Poiché una superficie spaziale può anche scomparire temporaneamente a causa di una perdita di tracciamento, l'applicazione rinvia anche la rimozione delle superfici spaziali rimosse durante la perdita di rilevamento.</span><span class="sxs-lookup"><span data-stu-id="420f8-295">Since a spatial surface may also disappear temporarily because of tracking loss, the application also defers discarding removed spatial surfaces during tracking loss.</span></span>
* <span data-ttu-id="420f8-296">In generale, un'applicazione deve valutare il compromesso tra riduzione dell'elaborazione degli aggiornamenti e aumento dell'utilizzo della memoria per determinare la strategia di memorizzazione nella cache ideale.</span><span class="sxs-lookup"><span data-stu-id="420f8-296">In general, an application should evaluate the tradeoff between reduced update processing and increased memory usage to determine its ideal caching strategy.</span></span>

## <a name="rendering"></a><span data-ttu-id="420f8-297">Rendering</span><span class="sxs-lookup"><span data-stu-id="420f8-297">Rendering</span></span>

<span data-ttu-id="420f8-298">Esistono tre modi principali in cui le mesh di mapping spaziale tendono a essere usate per il rendering:</span><span class="sxs-lookup"><span data-stu-id="420f8-298">There are three primary ways in which spatial mapping meshes tend to be used for rendering:</span></span>
* <span data-ttu-id="420f8-299">Per la visualizzazione della superficie</span><span class="sxs-lookup"><span data-stu-id="420f8-299">For surface visualization</span></span>
   * <span data-ttu-id="420f8-300">Spesso è utile visualizzare direttamente le superfici spaziali.</span><span class="sxs-lookup"><span data-stu-id="420f8-300">It's often useful to visualize spatial surfaces directly.</span></span> <span data-ttu-id="420f8-301">Ad esempio, il cast di "ombreggiature" da oggetti su superfici spaziali può fornire un feedback visivo utile all'utente mentre posiziona ologrammi sulle superfici.</span><span class="sxs-lookup"><span data-stu-id="420f8-301">For example, casting 'shadows' from objects onto spatial surfaces can provide helpful visual feedback to the user while they're placing holograms on surfaces.</span></span>
   * <span data-ttu-id="420f8-302">Un aspetto da tenere presente è che le mesh spaziali sono diverse dal tipo di mesh che un artista 3D potrebbe creare.</span><span class="sxs-lookup"><span data-stu-id="420f8-302">One thing to bear in mind is that spatial meshes are different to the kind of meshes that a 3D artist might create.</span></span> <span data-ttu-id="420f8-303">La topologia a triangolo non sarà "pulita" come la topologia creata dall'utente e la mesh subirà [vari errori.](spatial-mapping.md#what-influences-spatial-mapping-quality)</span><span class="sxs-lookup"><span data-stu-id="420f8-303">The triangle topology won't be as 'clean' as human-created topology, and the mesh will suffer from [various errors](spatial-mapping.md#what-influences-spatial-mapping-quality).</span></span>
   * <span data-ttu-id="420f8-304">Per creare un aspetto visivo piacevole, è possibile eseguire alcune operazioni di elaborazione della [mesh,](spatial-mapping.md#mesh-processing)ad esempio per riempire fori o normali della superficie levigata.</span><span class="sxs-lookup"><span data-stu-id="420f8-304">To create a pleasing visual aesthetic, you may want to do some [mesh processing](spatial-mapping.md#mesh-processing), for example to fill holes or smooth surface normals.</span></span> <span data-ttu-id="420f8-305">È anche possibile usare uno shader per proiettare trame progettate dall'artista sulla mesh anziché visualizzare direttamente la topologia della mesh e le normali.</span><span class="sxs-lookup"><span data-stu-id="420f8-305">You may also wish to use a shader to project artist-designed textures onto your mesh instead of directly visualizing mesh topology and normals.</span></span>
* <span data-ttu-id="420f8-306">Per occluding ologrammi dietro superfici reali</span><span class="sxs-lookup"><span data-stu-id="420f8-306">For occluding holograms behind real-world surfaces</span></span>
   * <span data-ttu-id="420f8-307">È possibile eseguire il rendering delle superfici spaziali in un passaggio di solo profondità, che influisce solo sul [buffer](/windows/win32/direct3d9/depth-buffers) di profondità e non sulle destinazioni di rendering dei colori.</span><span class="sxs-lookup"><span data-stu-id="420f8-307">Spatial surfaces can be rendered in a depth-only pass, which only affects the [depth buffer](/windows/win32/direct3d9/depth-buffers) and doesn't affect color render targets.</span></span>
   * <span data-ttu-id="420f8-308">In questo modo il buffer di profondità viene in primo piano per occludere gli ologrammi sottoposti a rendering successivamente dietro le superfici spaziali.</span><span class="sxs-lookup"><span data-stu-id="420f8-308">This primes the depth buffer to occlude subsequently rendered holograms behind spatial surfaces.</span></span> <span data-ttu-id="420f8-309">L'occlusione accurata degli ologrammi migliora il senso che gli ologrammi esistono realmente all'interno dello spazio fisico dell'utente.</span><span class="sxs-lookup"><span data-stu-id="420f8-309">Accurate occlusion of holograms enhances the sense that holograms really exist within the user's physical space.</span></span>
   * <span data-ttu-id="420f8-310">Per abilitare il rendering solo profondità, aggiornare lo stato di fusione per impostare [RenderTargetWriteMask](/windows/win32/api/d3d11_1/ns-d3d11_1-d3d11_render_target_blend_desc1) su zero per tutte le destinazioni di rendering dei colori.</span><span class="sxs-lookup"><span data-stu-id="420f8-310">To enable depth-only rendering, update your blend state to set the [RenderTargetWriteMask](/windows/win32/api/d3d11_1/ns-d3d11_1-d3d11_render_target_blend_desc1) to zero for all color render targets.</span></span>
* <span data-ttu-id="420f8-311">Per modificare l'aspetto degli ologrammi occlusi da superfici reali</span><span class="sxs-lookup"><span data-stu-id="420f8-311">For modifying the appearance of holograms occluded by real-world surfaces</span></span>
   * <span data-ttu-id="420f8-312">La geometria di cui viene in genere eseguito il rendering è nascosta quando è occlusa.</span><span class="sxs-lookup"><span data-stu-id="420f8-312">Normally rendered geometry is hidden when it's occluded.</span></span> <span data-ttu-id="420f8-313">A tale scopo, impostare la funzione di profondità nello stato [depth-stencil](/windows/win32/api/d3d11/ns-d3d11-d3d11_depth_stencil_desc) su "minore o uguale", in modo che la geometria sia visibile solo dove è più vicina alla fotocamera rispetto a tutte le geometrie sottoposte a rendering in precedenza. </span><span class="sxs-lookup"><span data-stu-id="420f8-313">This is achieved by setting the depth function in your [depth-stencil state](/windows/win32/api/d3d11/ns-d3d11-d3d11_depth_stencil_desc) to "less than or equal", which causes geometry to be visible only where it's **closer** to the camera than all previously rendered geometry.</span></span>
   * <span data-ttu-id="420f8-314">Tuttavia, può essere utile mantenere visibile una determinata geometria anche quando è occlusa e modificarne l'aspetto quando occluded come modo per fornire feedback visivo all'utente.</span><span class="sxs-lookup"><span data-stu-id="420f8-314">However, it may be useful to keep certain geometry visible even when it's occluded, and to modify its appearance when occluded as a way of providing visual feedback to the user.</span></span> <span data-ttu-id="420f8-315">Ad esempio, ciò consente all'applicazione di mostrare all'utente la posizione di un oggetto, pur chiarendo che si trova dietro una superficie reale.</span><span class="sxs-lookup"><span data-stu-id="420f8-315">For example, this allows the application to show the user the location of an object while making it clear that is behind a real-world surface.</span></span>
   * <span data-ttu-id="420f8-316">A tale scopo, eseguire il rendering della geometria una seconda volta con uno shader diverso che crea l'aspetto "occluded" desiderato.</span><span class="sxs-lookup"><span data-stu-id="420f8-316">To achieve this, render the geometry a second time with a different shader that creates the desired 'occluded' appearance.</span></span> <span data-ttu-id="420f8-317">Prima di eseguire il rendering della geometria per la seconda volta, apportare due modifiche allo [stato depth-stencil](/windows/win32/api/d3d11/ns-d3d11-d3d11_depth_stencil_desc).</span><span class="sxs-lookup"><span data-stu-id="420f8-317">Before rendering the geometry for the second time, make two changes to your [depth-stencil state](/windows/win32/api/d3d11/ns-d3d11-d3d11_depth_stencil_desc).</span></span> <span data-ttu-id="420f8-318">Per prima cosa, impostare la funzione di profondità su "maggiore o uguale"  in modo che la geometria sia visibile solo dove si trova più lontano dalla fotocamera rispetto a tutte le geometrie di cui è stato eseguito il rendering in precedenza.</span><span class="sxs-lookup"><span data-stu-id="420f8-318">First, set the depth function to "greater than or equal" so that the geometry will be visible only where it's **further** from the camera than all previously rendered geometry.</span></span> <span data-ttu-id="420f8-319">In secondo momento, impostare DepthWriteMask su zero, in modo che il buffer di profondità non  verrà modificato (il buffer di profondità deve continuare a rappresentare la profondità della geometria più vicina alla fotocamera).</span><span class="sxs-lookup"><span data-stu-id="420f8-319">Second, set the DepthWriteMask to zero, so that the depth buffer won't be modified (the depth buffer should continue to represent the depth of the geometry **closest** to the camera).</span></span>

<span data-ttu-id="420f8-320">[Le prestazioni](../develop/platform-capabilities-and-apis/understanding-performance-for-mixed-reality.md) sono un aspetto importante quando si esegue il rendering di mesh di mapping spaziale.</span><span class="sxs-lookup"><span data-stu-id="420f8-320">[Performance](../develop/platform-capabilities-and-apis/understanding-performance-for-mixed-reality.md) is an important concern when rendering spatial mapping meshes.</span></span> <span data-ttu-id="420f8-321">Ecco alcune tecniche di prestazioni di rendering specifiche per il rendering di mesh di mapping spaziale:</span><span class="sxs-lookup"><span data-stu-id="420f8-321">Here are some rendering performance techniques specific to rendering spatial mapping meshes:</span></span>
* <span data-ttu-id="420f8-322">Regolare la densità del triangolo</span><span class="sxs-lookup"><span data-stu-id="420f8-322">Adjust triangle density</span></span>
   * <span data-ttu-id="420f8-323">Quando si richiedono mesh di superficie spaziale all'osservatore di superficie, richiedere la densità più bassa di mesh triangolare che saranno sufficiente per le proprie esigenze.</span><span class="sxs-lookup"><span data-stu-id="420f8-323">When requesting spatial surface meshes from your surface observer, request the lowest density of triangle meshes that will suffice for your needs.</span></span>
   * <span data-ttu-id="420f8-324">Può essere opportuno variare la densità del triangolo su una superficie in base alla superficie, a seconda della distanza della superficie dall'utente e della pertinenza dell'esperienza utente.</span><span class="sxs-lookup"><span data-stu-id="420f8-324">It may make sense to vary triangle density on a surface by surface basis, depending on the surface's distance from the user, and its relevance to the user experience.</span></span>
   * <span data-ttu-id="420f8-325">La riduzione del numero di triangoli ridurrà l'utilizzo della memoria e i costi di elaborazione dei vertici nella GPU, anche se non influirà sui costi di elaborazione dei pixel.</span><span class="sxs-lookup"><span data-stu-id="420f8-325">Reducing triangle counts will reduce memory usage and vertex processing costs on the GPU, though it won't affect pixel processing costs.</span></span>
* <span data-ttu-id="420f8-326">Usare il frustum culling</span><span class="sxs-lookup"><span data-stu-id="420f8-326">Use frustum culling</span></span>
   * <span data-ttu-id="420f8-327">Il frustum culling ignora gli oggetti di disegno che non possono essere visualizzati perché sono esterni al frustum di visualizzazione corrente.</span><span class="sxs-lookup"><span data-stu-id="420f8-327">Frustum culling skips drawing objects that cannot be seen because they are outside the current display frustum.</span></span> <span data-ttu-id="420f8-328">In questo modo si riducono sia i costi di elaborazione della CPU che della GPU.</span><span class="sxs-lookup"><span data-stu-id="420f8-328">This reduces both CPU and GPU processing costs.</span></span>
   * <span data-ttu-id="420f8-329">Poiché il culling viene eseguito in base alla mesh e le superfici spaziali possono essere grandi, suddividere ogni mesh di superficie spaziale in blocchi più piccoli può comportare un culling più efficiente (in quanto viene eseguito il rendering di un minor numero di triangoli fuori schermo).</span><span class="sxs-lookup"><span data-stu-id="420f8-329">Since culling is performed on a per-mesh basis and spatial surfaces can be large, breaking each spatial surface mesh into smaller chunks may result in more efficient culling (in that fewer offscreen triangles are rendered).</span></span> <span data-ttu-id="420f8-330">Esiste tuttavia un compromesso. Maggiore è il numero di mesh, maggiore è il numero di chiamate di disegno che è necessario effettuare, che possono aumentare i costi della CPU.</span><span class="sxs-lookup"><span data-stu-id="420f8-330">There's a tradeoff, however; the more meshes you have, the more draw calls you must make, which can increase CPU costs.</span></span> <span data-ttu-id="420f8-331">In casi estremi, i calcoli di frustum culling potrebbero anche avere un costo misurabile della CPU.</span><span class="sxs-lookup"><span data-stu-id="420f8-331">In an extreme case, the frustum culling calculations themselves could even have a measurable CPU cost.</span></span>
* <span data-ttu-id="420f8-332">Regolare l'ordine di rendering</span><span class="sxs-lookup"><span data-stu-id="420f8-332">Adjust rendering order</span></span>
   * <span data-ttu-id="420f8-333">Le superfici spaziali tendono a essere grandi, perché rappresentano l'intero ambiente dell'utente che le circonda.</span><span class="sxs-lookup"><span data-stu-id="420f8-333">Spatial surfaces tend to be large, because they represent the user's entire environment surrounding them.</span></span> <span data-ttu-id="420f8-334">I costi di elaborazione dei pixel nella GPU possono essere elevati, soprattutto nei casi in cui è presente più di un livello di geometria visibile (incluse le superfici spaziali e altri ologrammi).</span><span class="sxs-lookup"><span data-stu-id="420f8-334">Pixel processing costs on the GPU can be high, especially in cases where there's more than one layer of visible geometry (including both spatial surfaces and other holograms).</span></span> <span data-ttu-id="420f8-335">In questo caso, il livello più vicino all'utente occluderà tutti i livelli più lontano, quindi qualsiasi tempo di GPU impiegato per il rendering di questi livelli più distanti viene sprecato.</span><span class="sxs-lookup"><span data-stu-id="420f8-335">In this case, the layer nearest to the user will be occluding any layers further away, so any GPU time spent rendering those more distant layers is wasted.</span></span>
   * <span data-ttu-id="420f8-336">Per ridurre questo lavoro ridondante sulla GPU, consente di eseguire il rendering di superfici opache in ordine front-to-back (prima quelle più vicine, quelle più distanti).</span><span class="sxs-lookup"><span data-stu-id="420f8-336">To reduce this redundant work on the GPU, it helps to render opaque surfaces in front-to-back order (closer ones first, more distant ones last).</span></span> <span data-ttu-id="420f8-337">Per "opacità" si intende superfici per le quali DepthWriteMask è impostato su uno nello [stato depth-stencil.](/windows/win32/api/d3d11/ns-d3d11-d3d11_depth_stencil_desc)</span><span class="sxs-lookup"><span data-stu-id="420f8-337">By 'opaque' we mean surfaces for which the DepthWriteMask is set to one in your [depth-stencil state](/windows/win32/api/d3d11/ns-d3d11-d3d11_depth_stencil_desc).</span></span> <span data-ttu-id="420f8-338">Quando viene eseguito il rendering delle superfici più vicine, il buffer di profondità viene eseguito in modo che le superfici più distanti siano ignorate in modo efficiente dal processore di pixel nella GPU.</span><span class="sxs-lookup"><span data-stu-id="420f8-338">When the nearest surfaces are rendered, they'll prime the depth buffer so that more distant surfaces are efficiently skipped by the pixel processor on the GPU.</span></span>

## <a name="mesh-processing"></a><span data-ttu-id="420f8-339">Elaborazione mesh</span><span class="sxs-lookup"><span data-stu-id="420f8-339">Mesh Processing</span></span>

<span data-ttu-id="420f8-340">Un'applicazione potrebbe voler eseguire [varie operazioni sulle](spatial-mapping.md#mesh-processing) mesh di superficie spaziale in base alle proprie esigenze.</span><span class="sxs-lookup"><span data-stu-id="420f8-340">An application may want to do [various operations](spatial-mapping.md#mesh-processing) on spatial surface meshes to suit its needs.</span></span> <span data-ttu-id="420f8-341">I dati di indice e vertice forniti con ogni mesh di superficie spaziale utilizzano lo stesso layout familiare dei [buffer](/windows/win32/direct3d9/rendering-from-vertex-and-index-buffers) di vertice e indice usati per il rendering delle mesh triangolo in tutte le MODERNE API di rendering.</span><span class="sxs-lookup"><span data-stu-id="420f8-341">The index and vertex data provided with each spatial surface mesh uses the same familiar layout as the [vertex and index buffers](/windows/win32/direct3d9/rendering-from-vertex-and-index-buffers) that are used for rendering triangle meshes in all modern rendering APIs.</span></span> <span data-ttu-id="420f8-342">Tuttavia, un fatto fondamentale da tenere presente è che i triangoli di mapping spaziale hanno un ordine di avvolgimento in **senso antiorario.**</span><span class="sxs-lookup"><span data-stu-id="420f8-342">However, one key fact to be aware of is that spatial mapping triangles have a **front-clockwise winding order**.</span></span> <span data-ttu-id="420f8-343">Ogni triangolo è rappresentato da tre indici dei vertici nel index buffer della mesh e questi indici  identificheranno i vertici del  triangolo in senso orario, quando il triangolo viene visualizzato dal lato anteriore.</span><span class="sxs-lookup"><span data-stu-id="420f8-343">Each triangle is represented by three vertex indices in the mesh's index buffer and these indices will identify the triangle's vertices in a **clockwise** order, when the triangle is viewed from the **front** side.</span></span> <span data-ttu-id="420f8-344">Il lato anteriore (o esterno) delle mesh di superficie spaziale corrisponde come ci si aspetterebbe dal lato anteriore (visibile) delle superfici reali.</span><span class="sxs-lookup"><span data-stu-id="420f8-344">The front side (or outside) of spatial surface meshes corresponds as you would expect to the front (visible) side of real world surfaces.</span></span>

<span data-ttu-id="420f8-345">Le applicazioni devono eseguire la semplificazione della mesh solo se la densità del triangolo più grossolano fornita dall'osservatore di superficie è ancora sufficientemente grossolano. Questo lavoro è costoso dal punto di vista del calcolo e viene già eseguito dal runtime per generare i vari livelli di dettaglio forniti.</span><span class="sxs-lookup"><span data-stu-id="420f8-345">Applications should only do mesh simplification if the coarsest triangle density provided by the surface observer is still insufficiently coarse - this work is computationally expensive and already being performed by the runtime to generate the various provided levels of detail.</span></span>

<span data-ttu-id="420f8-346">Poiché ogni osservatore di superficie può fornire più superfici spaziali non interconnesse, alcune applicazioni potrebbero voler ritagliare queste mesh di superficie spaziale l'una contro l'altra e quindi comprimere le mesh.</span><span class="sxs-lookup"><span data-stu-id="420f8-346">Because each surface observer can provide multiple unconnected spatial surfaces, some applications may wish to clip these spatial surface meshes against each other, then zipper them together.</span></span> <span data-ttu-id="420f8-347">In generale, il passaggio di ritaglio è obbligatorio, perché le mesh della superficie spaziale nelle vicinanze spesso si sovrappongono leggermente.</span><span class="sxs-lookup"><span data-stu-id="420f8-347">In general, the clipping step is required, as nearby spatial surface meshes often overlap slightly.</span></span>

## <a name="raycasting-and-collision"></a><span data-ttu-id="420f8-348">Raycasting e collisione</span><span class="sxs-lookup"><span data-stu-id="420f8-348">Raycasting and Collision</span></span>

<span data-ttu-id="420f8-349">Per consentire a un'API fisica (ad esempio [Havok)](https://www.havok.com/)di fornire a un'applicazione funzionalità di raycasting e collisione per le superfici spaziali, l'applicazione deve fornire mesh di superficie spaziale all'API fisica.</span><span class="sxs-lookup"><span data-stu-id="420f8-349">In order for a physics API (such as [Havok](https://www.havok.com/)) to provide an application with raycasting and collision functionality for spatial surfaces, the application must provide spatial surface meshes to the physics API.</span></span> <span data-ttu-id="420f8-350">Le mesh usate per la fisica hanno spesso le proprietà seguenti:</span><span class="sxs-lookup"><span data-stu-id="420f8-350">Meshes used for physics often have the following properties:</span></span>
* <span data-ttu-id="420f8-351">Contengono solo un numero ridotto di triangoli.</span><span class="sxs-lookup"><span data-stu-id="420f8-351">They contain only small numbers of triangles.</span></span> <span data-ttu-id="420f8-352">Le operazioni fisiche sono più a elevato utilizzo di calcolo rispetto alle operazioni di rendering.</span><span class="sxs-lookup"><span data-stu-id="420f8-352">Physics operations are more computationally intensive than rendering operations.</span></span>
* <span data-ttu-id="420f8-353">Sono "molto compatte".</span><span class="sxs-lookup"><span data-stu-id="420f8-353">They're 'water-tight'.</span></span> <span data-ttu-id="420f8-354">Le superfici destinate a essere solide non devono contenere piccoli fori. anche fori troppo piccoli per essere visibili possono causare problemi.</span><span class="sxs-lookup"><span data-stu-id="420f8-354">Surfaces intended to be solid shouldn't have small holes in them; even holes too small to be visible can cause problems.</span></span>
* <span data-ttu-id="420f8-355">Vengono convertiti in scafi convessi.</span><span class="sxs-lookup"><span data-stu-id="420f8-355">They're converted into convex hulls.</span></span> <span data-ttu-id="420f8-356">Gli scafi convessi hanno pochi poligoni e sono senza fori e sono molto più efficienti dal punto di vista computazionale rispetto alle mesh di triangoli non elaborati.</span><span class="sxs-lookup"><span data-stu-id="420f8-356">Convex hulls have few polygons and are free of holes, and they're much more computationally efficient to process than raw triangle meshes.</span></span>

<span data-ttu-id="420f8-357">Quando si esetterano raycast su superfici spaziali, tenere presente che queste superfici sono spesso complesse e ingombrate con pochi dettagli, proprio come la tua scriva!</span><span class="sxs-lookup"><span data-stu-id="420f8-357">When doing raycasts against spatial surfaces, bear in mind that these surfaces are often complex, cluttered shapes full of messy little details - just like your desk!</span></span> <span data-ttu-id="420f8-358">Ciò significa che un singolo raycast spesso non è sufficiente per fornire informazioni sufficienti sulla forma della superficie e sulla forma dello spazio vuoto nelle vicinanze.</span><span class="sxs-lookup"><span data-stu-id="420f8-358">This means that a single raycast is often insufficient to give you enough information about the shape of the surface and the shape of the empty space near it.</span></span> <span data-ttu-id="420f8-359">È in genere una buona idea eseguire molti raycast all'interno di una piccola area e usare i risultati aggregati per ottenere una comprensione più affidabile della superficie.</span><span class="sxs-lookup"><span data-stu-id="420f8-359">It's usually a good idea to do many raycasts within a small area and to use the aggregate results to derive a more reliable understanding of the surface.</span></span> <span data-ttu-id="420f8-360">Ad esempio, l'uso della media di 10 raycast per guidare il posizionamento degli ologrammi su una superficie produce un risultato molto più uniforme e meno "instabilità" che usando un solo raycast.</span><span class="sxs-lookup"><span data-stu-id="420f8-360">For example, using the average of 10 raycasts to guide hologram placement on a surface will yield a far smoother and less 'jittery' result that using just a single raycast.</span></span>

<span data-ttu-id="420f8-361">Tenere tuttavia presente che ogni raycast può avere un costo di calcolo elevato.</span><span class="sxs-lookup"><span data-stu-id="420f8-361">However, bear in mind that each raycast can have a high computational cost.</span></span> <span data-ttu-id="420f8-362">A seconda dello scenario di utilizzo, è consigliabile trovare un compromesso tra il costo di calcolo dei raycast aggiuntivi (eseguito ogni fotogramma) e il costo di calcolo dell'elaborazione delle [mesh](spatial-mapping.md#mesh-processing) per uniformare e rimuovere i fori nelle superfici spaziali (operazione eseguita quando vengono aggiornate le mesh spaziali).</span><span class="sxs-lookup"><span data-stu-id="420f8-362">Depending on your usage scenario, you should trade off the computational cost of extra raycasts (done every frame) against the computational cost of [mesh processing](spatial-mapping.md#mesh-processing) to smooth and remove holes in spatial surfaces (done when spatial meshes are updated).</span></span>

## <a name="the-environment-scanning-experience"></a><span data-ttu-id="420f8-363">Esperienza di analisi dell'ambiente</span><span class="sxs-lookup"><span data-stu-id="420f8-363">The environment scanning experience</span></span>

<span data-ttu-id="420f8-364">Ogni applicazione che usa il mapping spaziale deve considerare la possibilità di offrire un'esperienza di analisi. processo tramite il quale l'applicazione guida l'utente nell'analisi delle superfici necessarie per il corretto funzionamento dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="420f8-364">Each application that uses spatial mapping should consider providing a 'scanning experience'; the process through which the application guides the user to scan surfaces that are necessary for the application to function correctly.</span></span>

<span data-ttu-id="420f8-365">![Esempio di analisi](images/sr-mixedworld-140429-8pm-00068-1000px.png)</span><span class="sxs-lookup"><span data-stu-id="420f8-365">![Example of scanning](images/sr-mixedworld-140429-8pm-00068-1000px.png)</span></span><br>
<span data-ttu-id="420f8-366">*Esempio di analisi*</span><span class="sxs-lookup"><span data-stu-id="420f8-366">*Example of scanning*</span></span>

<span data-ttu-id="420f8-367">La natura di questa esperienza di analisi può variare notevolmente a seconda delle esigenze di ogni applicazione, ma due principi principali dovrebbero guidarne la progettazione.</span><span class="sxs-lookup"><span data-stu-id="420f8-367">The nature of this scanning experience can vary greatly depending upon each application's needs, but two main principles should guide its design.</span></span>

<span data-ttu-id="420f8-368">In primo luogo, **la comunicazione chiara con l'utente è il problema principale.**</span><span class="sxs-lookup"><span data-stu-id="420f8-368">Firstly, **clear communication with the user is the primary concern**.</span></span> <span data-ttu-id="420f8-369">L'utente deve sempre sapere se vengono soddisfatti i requisiti dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="420f8-369">The user should always be aware of whether the application's requirements are being met.</span></span> <span data-ttu-id="420f8-370">Quando non vengono soddisfatte, dovrebbe essere immediatamente chiaro all'utente il motivo per cui si tratta di questo e deve essere rapidamente portato a intraprendere l'azione appropriata.</span><span class="sxs-lookup"><span data-stu-id="420f8-370">When they aren't being met, it should be immediately clear to the user why this is so and they should be quickly led to take the appropriate action.</span></span>

<span data-ttu-id="420f8-371">In secondo luogo, **le applicazioni devono tentare di trovare un equilibrio tra efficienza e affidabilità.**</span><span class="sxs-lookup"><span data-stu-id="420f8-371">Secondly, **applications should attempt to strike a balance between efficiency and reliability**.</span></span> <span data-ttu-id="420f8-372">Quando è possibile eseguire questa operazione in modo **affidabile,** le applicazioni devono analizzare automaticamente i dati di mapping spaziale per risparmiare tempo per l'utente.</span><span class="sxs-lookup"><span data-stu-id="420f8-372">When it's possible to do so **reliably**, applications should automatically analyze spatial mapping data to save the user time.</span></span> <span data-ttu-id="420f8-373">Quando non è possibile eseguire questa operazione in modo affidabile, le applicazioni devono invece consentire all'utente di fornire rapidamente all'applicazione le informazioni aggiuntive necessarie.</span><span class="sxs-lookup"><span data-stu-id="420f8-373">When it isn't possible to do so reliably, applications should instead enable the user to quickly provide the application with the additional information it requires.</span></span>

<span data-ttu-id="420f8-374">Per progettare la giusta esperienza di analisi, considerare quale delle seguenti possibilità è applicabile all'applicazione:</span><span class="sxs-lookup"><span data-stu-id="420f8-374">To help design the right scanning experience, consider which of the following possibilities are applicable to your application:</span></span>

* <span data-ttu-id="420f8-375">**Nessuna esperienza di analisi**</span><span class="sxs-lookup"><span data-stu-id="420f8-375">**No scanning experience**</span></span>
   * <span data-ttu-id="420f8-376">Un'applicazione può funzionare perfettamente senza alcuna esperienza di analisi guidata; apprenderà le superfici osservate nel corso del movimento naturale dell'utente.</span><span class="sxs-lookup"><span data-stu-id="420f8-376">An application may function perfectly without any guided scanning experience; it will learn about surfaces that are observed in the course of natural user movement.</span></span>
   * <span data-ttu-id="420f8-377">Ad esempio, un'applicazione che consente all'utente di disegnare su superfici con una coloratura a spray olografico richiede solo la conoscenza delle superfici attualmente visibili all'utente.</span><span class="sxs-lookup"><span data-stu-id="420f8-377">For example, an application that lets the user draw on surfaces with holographic spray paint requires knowledge only of the surfaces currently visible to the user.</span></span>
   * <span data-ttu-id="420f8-378">L'ambiente potrebbe essere già analizzato se è già stato utilizzato dall'utente con HoloLens.</span><span class="sxs-lookup"><span data-stu-id="420f8-378">The environment may be scanned already if it's one in which the user has already spent lots of time using the HoloLens.</span></span>
   * <span data-ttu-id="420f8-379">Tenere tuttavia presente che la fotocamera usata dalla mappatura spaziale può vedere solo 3,1 m davanti all'utente, quindi il mapping spaziale non saprà alcuna superficie più distante a meno che l'utente non le abbia osservate da una distanza più vicina in passato.</span><span class="sxs-lookup"><span data-stu-id="420f8-379">Bear in mind however that the camera used by spatial mapping can only see 3.1 m in front of the user, so spatial mapping won't know about any more distant surfaces unless the user has observed them from a closer distance in the past.</span></span>
   * <span data-ttu-id="420f8-380">Pertanto, l'utente comprende quali superfici sono state analizzate, l'applicazione deve fornire un feedback visivo a questo effetto, ad esempio proiettare ombreggiature virtuali su superfici analizzate può aiutare l'utente a posizionare ologrammi su tali superfici.</span><span class="sxs-lookup"><span data-stu-id="420f8-380">So the user understands which surfaces have been scanned, the application should provide visual feedback to this effect, for example casting virtual shadows onto scanned surfaces may help the user place holograms on those surfaces.</span></span>
   * <span data-ttu-id="420f8-381">In questo caso, i volumi di delimitazione dell'osservatore della superficie spaziale devono essere aggiornati a un sistema di [coordinate](coordinate-systems.md)spaziali bloccato dal corpo, in modo che seguano l'utente.</span><span class="sxs-lookup"><span data-stu-id="420f8-381">For this case, the spatial surface observer's bounding volumes should be updated each frame to a body-locked [spatial coordinate system](coordinate-systems.md), so that they follow the user.</span></span>

* <span data-ttu-id="420f8-382">**Trovare una posizione appropriata**</span><span class="sxs-lookup"><span data-stu-id="420f8-382">**Find a suitable location**</span></span>
   * <span data-ttu-id="420f8-383">Un'applicazione può essere progettata per l'uso in una posizione con requisiti specifici.</span><span class="sxs-lookup"><span data-stu-id="420f8-383">An application may be designed for use in a location with specific requirements.</span></span>
   * <span data-ttu-id="420f8-384">Ad esempio, l'applicazione potrebbe richiedere un'area vuota intorno all'utente in modo che possa esercitarsi in modo sicuro con kung-fu olografico.</span><span class="sxs-lookup"><span data-stu-id="420f8-384">For example, the application may require an empty area around the user so they can safely practice holographic kung-fu.</span></span>
   * <span data-ttu-id="420f8-385">Le applicazioni devono comunicare all'utente in anticipo eventuali requisiti specifici e consolidarli con un feedback visivo chiaro.</span><span class="sxs-lookup"><span data-stu-id="420f8-385">Applications should communicate any specific requirements to the user up-front, and reinforce them with clear visual feedback.</span></span>
   * <span data-ttu-id="420f8-386">In questo esempio, l'applicazione deve visualizzare l'estensione dell'area vuota richiesta ed evidenziare visivamente la presenza di oggetti indesiderati all'interno di questa zona.</span><span class="sxs-lookup"><span data-stu-id="420f8-386">In this example, the application should visualize the extent of the required empty area and visually highlight the presence of any undesired objects within this zone.</span></span>
   * <span data-ttu-id="420f8-387">In questo caso, i volumi di delimitazione dell'osservatore della superficie spaziale devono usare un sistema di [coordinate](coordinate-systems.md) spaziali bloccato a livello mondiale nella posizione scelta.</span><span class="sxs-lookup"><span data-stu-id="420f8-387">For this case, the spatial surface observer's bounding volumes should use a world-locked [spatial coordinate system](coordinate-systems.md) in the chosen location.</span></span>

* <span data-ttu-id="420f8-388">**Trovare una configurazione appropriata delle superfici**</span><span class="sxs-lookup"><span data-stu-id="420f8-388">**Find a suitable configuration of surfaces**</span></span>
   * <span data-ttu-id="420f8-389">Un'applicazione può richiedere una configurazione specifica di superfici, ad esempio due grandi pareti piatte, opposte per creare una sala olografica di mirror.</span><span class="sxs-lookup"><span data-stu-id="420f8-389">An application may require a specific configuration of surfaces, for example two large, flat, opposing walls to create a holographic hall of mirrors.</span></span>
   * <span data-ttu-id="420f8-390">In questi casi, l'applicazione dovrà analizzare le superfici fornite dal mapping spaziale per rilevare le superfici adatte e indirizzare l'utente verso di esse.</span><span class="sxs-lookup"><span data-stu-id="420f8-390">In such cases, the application will need to analyze the surfaces provided by spatial mapping to detect suitable surfaces, and direct the user toward them.</span></span>
   * <span data-ttu-id="420f8-391">L'utente deve avere un'opzione di fallback se l'analisi della superficie dell'applicazione non è affidabile.</span><span class="sxs-lookup"><span data-stu-id="420f8-391">The user should have a fallback option if the application's surface analysis isn't reliable.</span></span> <span data-ttu-id="420f8-392">Ad esempio, se l'applicazione identifica erroneamente una porta come una barriera piana, l'utente necessita di un modo semplice per correggere l'errore.</span><span class="sxs-lookup"><span data-stu-id="420f8-392">For example, if the application incorrectly identifies a doorway as a flat wall, the user needs a simple way to correct this error.</span></span>

* <span data-ttu-id="420f8-393">**Analizzare parte dell'ambiente**</span><span class="sxs-lookup"><span data-stu-id="420f8-393">**Scan part of the environment**</span></span>
   * <span data-ttu-id="420f8-394">Un'applicazione potrebbe voler acquisire solo parte dell'ambiente, come indicato dall'utente.</span><span class="sxs-lookup"><span data-stu-id="420f8-394">An application may wish to only capture part of the environment, as directed by the user.</span></span>
   * <span data-ttu-id="420f8-395">Ad esempio, l'applicazione analizza parte di una stanza in modo che l'utente possa pubblicare un annuncio olografico classificato per i mobili che vuole vendere.</span><span class="sxs-lookup"><span data-stu-id="420f8-395">For example, the application scans part of a room so the user may post a holographic classified ad for furniture they wish to sell.</span></span>
   * <span data-ttu-id="420f8-396">In questo caso, l'applicazione deve acquisire i dati di mapping spaziale all'interno delle aree osservate dall'utente durante l'analisi.</span><span class="sxs-lookup"><span data-stu-id="420f8-396">In this case, the application should capture spatial mapping data within the regions observed by the user during their scan.</span></span>

* <span data-ttu-id="420f8-397">**Eseguire la scansione dell'intera stanza**</span><span class="sxs-lookup"><span data-stu-id="420f8-397">**Scan the whole room**</span></span>
   * <span data-ttu-id="420f8-398">Un'applicazione può richiedere un'analisi di tutte le superfici nella stanza corrente, incluse quelle dietro l'utente.</span><span class="sxs-lookup"><span data-stu-id="420f8-398">An application may require a scan of all of the surfaces in the current room, including those behind the user.</span></span>
   * <span data-ttu-id="420f8-399">Ad esempio, un gioco può mettere l'utente nel ruolo di Gulliver, sotto controllo da centinaia di piccoli lilliputiani che si avvicinano da tutte le direzioni.</span><span class="sxs-lookup"><span data-stu-id="420f8-399">For example, a game may put the user in the role of Gulliver, under siege from hundreds of tiny Lilliputians approaching from all directions.</span></span>
   * <span data-ttu-id="420f8-400">In questi casi, l'applicazione dovrà determinare quante superfici nella stanza corrente sono già state analizzate e indirizzare lo sguardo dell'utente per colmare lacune significative.</span><span class="sxs-lookup"><span data-stu-id="420f8-400">In such cases, the application will need to determine how many of the surfaces in the current room have already been scanned, and direct the user's gaze to fill in significant gaps.</span></span>
   * <span data-ttu-id="420f8-401">La chiave di questo processo è fornire feedback visivo che indica chiaramente all'utente quali superfici non sono ancora state analizzate.</span><span class="sxs-lookup"><span data-stu-id="420f8-401">The key to this process is providing visual feedback that makes it clear to the user which surfaces haven't yet been scanned.</span></span> <span data-ttu-id="420f8-402">L'applicazione potrebbe, ad [](/windows/win32/direct3d9/fog-formulas) esempio, usare la nebbia basata sulla distanza per evidenziare visivamente le aree non coperte dalle superfici di mapping spaziale.</span><span class="sxs-lookup"><span data-stu-id="420f8-402">The application could, for example,  use [distance-based fog](/windows/win32/direct3d9/fog-formulas) to visually highlight regions that aren't covered by spatial mapping surfaces.</span></span>

* <span data-ttu-id="420f8-403">**Creare uno snapshot iniziale dell'ambiente**</span><span class="sxs-lookup"><span data-stu-id="420f8-403">**Take an initial snapshot of the environment**</span></span>
   * <span data-ttu-id="420f8-404">Un'applicazione può voler ignorare tutte le modifiche nell'ambiente dopo aver creato uno 'snapshot' iniziale.</span><span class="sxs-lookup"><span data-stu-id="420f8-404">An application may wish to ignore all changes in the environment after taking an initial 'snapshot'.</span></span>
   * <span data-ttu-id="420f8-405">Questa operazione può essere appropriata per evitare interruzioni dei dati creati dall'utente strettamente abbinati allo stato iniziale dell'ambiente.</span><span class="sxs-lookup"><span data-stu-id="420f8-405">This may be appropriate to avoid disruption of user-created data that is tightly coupled to the initial state of the environment.</span></span>
   * <span data-ttu-id="420f8-406">In questo caso, l'applicazione deve creare una copia dei dati di mapping spaziale nello stato iniziale al termine dell'analisi.</span><span class="sxs-lookup"><span data-stu-id="420f8-406">In this case, the application should make a copy of the spatial mapping data in its initial state once the scan is complete.</span></span>
   * <span data-ttu-id="420f8-407">Le applicazioni devono continuare a ricevere aggiornamenti ai dati di mapping spaziale se gli ologrammi devono ancora essere occlusi correttamente dall'ambiente.</span><span class="sxs-lookup"><span data-stu-id="420f8-407">Applications should continue receiving updates to spatial mapping data if holograms are still to be correctly occluded by the environment.</span></span>
   * <span data-ttu-id="420f8-408">Gli aggiornamenti continui ai dati di mapping spaziale consentono anche di visualizzare le modifiche che si sono verificate, chiarendo all'utente le differenze tra gli stati precedenti e presenti dell'ambiente.</span><span class="sxs-lookup"><span data-stu-id="420f8-408">Continued updates to spatial mapping data also allow visualizing any changes that have occurred, clarifying to the user the differences between prior and present states of the environment.</span></span>

* <span data-ttu-id="420f8-409">**Creare snapshot avviati dall'utente dell'ambiente**</span><span class="sxs-lookup"><span data-stu-id="420f8-409">**Take user-initiated snapshots of the environment**</span></span>
   * <span data-ttu-id="420f8-410">Un'applicazione può voler rispondere alle modifiche ambientali solo quando richiesto dall'utente.</span><span class="sxs-lookup"><span data-stu-id="420f8-410">An application may only wish to respond to environmental changes when instructed by the user.</span></span>
   * <span data-ttu-id="420f8-411">Ad esempio, l'utente può creare più "svasa" 3D di un amico acquisendo le proprie pose in momenti diversi.</span><span class="sxs-lookup"><span data-stu-id="420f8-411">For example, the user could create multiple 3D 'statues' of a friend by capturing their poses at different moments.</span></span>

* <span data-ttu-id="420f8-412">**Consentire all'utente di modificare l'ambiente**</span><span class="sxs-lookup"><span data-stu-id="420f8-412">**Allow the user to change the environment**</span></span>
   * <span data-ttu-id="420f8-413">Un'applicazione può essere progettata per rispondere in tempo reale a qualsiasi modifica apportata nell'ambiente dell'utente.</span><span class="sxs-lookup"><span data-stu-id="420f8-413">An application may be designed to respond in real time to any changes made in the user's environment.</span></span>
   * <span data-ttu-id="420f8-414">Ad esempio, l'utente che disegna una finestra potrebbe attivare il "cambiamento di scena" per un gioco olografico che si svolge sull'altro lato.</span><span class="sxs-lookup"><span data-stu-id="420f8-414">For example, the user drawing a curtain could trigger 'scene change' for a holographic play taking place on the other side.</span></span>

* <span data-ttu-id="420f8-415">**Guidare l'utente a evitare errori nei dati di mapping spaziale**</span><span class="sxs-lookup"><span data-stu-id="420f8-415">**Guide the user to avoid errors in the spatial mapping data**</span></span>
   * <span data-ttu-id="420f8-416">Un'applicazione potrebbe voler fornire indicazioni all'utente durante l'analisi dell'ambiente.</span><span class="sxs-lookup"><span data-stu-id="420f8-416">An application may wish to provide guidance to the user while they're scanning their environment.</span></span>
   * <span data-ttu-id="420f8-417">Ciò consente all'utente di evitare determinati tipi di errori nei dati di [mapping](spatial-mapping.md#what-influences-spatial-mapping-quality)spaziale, ad esempio evitando finestre o mirror con luce solare.</span><span class="sxs-lookup"><span data-stu-id="420f8-417">This can help the user to avoid certain kinds of [errors in the spatial mapping data](spatial-mapping.md#what-influences-spatial-mapping-quality), for example by staying away from sunlit windows or mirrors.</span></span>

<span data-ttu-id="420f8-418">Un dettaglio aggiuntivo da tenere presente è che l'intervallo dei dati di mapping spaziale non è illimitato.</span><span class="sxs-lookup"><span data-stu-id="420f8-418">One extra detail to be aware of is that the 'range' of spatial mapping data isn't unlimited.</span></span> <span data-ttu-id="420f8-419">Anche se il mapping spaziale crea un database permanente di spazi di grandi dimensioni, rende disponibili i dati solo alle applicazioni in una "bolla" di dimensioni limitate intorno all'utente.</span><span class="sxs-lookup"><span data-stu-id="420f8-419">While spatial mapping does build a permanent database of large spaces, it only makes that data available to applications in a 'bubble' of limited size around the user.</span></span> <span data-ttu-id="420f8-420">Se si inizia all'inizio di un lungo periodo di tempo e ci si allontana abbastanza dall'inizio, alla fine le superfici spaziali all'inizio scompariranno.</span><span class="sxs-lookup"><span data-stu-id="420f8-420">If you start at the beginning of a long corridor and walk far enough away from the start, then eventually the spatial surfaces back at the beginning will disappear.</span></span> <span data-ttu-id="420f8-421">È possibile attenuare questo problema memorizzando nella cache tali superfici nell'applicazione dopo che sono scomparve dai dati di mapping spaziale disponibili.</span><span class="sxs-lookup"><span data-stu-id="420f8-421">You can mitigate this by caching those surfaces in your application after they've disappeared from the available spatial mapping data.</span></span>

## <a name="mesh-processing"></a><span data-ttu-id="420f8-422">Elaborazione mesh</span><span class="sxs-lookup"><span data-stu-id="420f8-422">Mesh processing</span></span>

<span data-ttu-id="420f8-423">Può essere utile rilevare tipi comuni di errori nelle superfici e filtrare, rimuovere o modificare i dati di mapping spaziale in base alle esigenze.</span><span class="sxs-lookup"><span data-stu-id="420f8-423">It may help to detect common types of errors in surfaces and to filter, remove or modify the spatial mapping data as appropriate.</span></span>

<span data-ttu-id="420f8-424">Tenere presente che i dati di mapping spaziale sono destinati a essere il più possibile applicabili alle superfici reali, quindi qualsiasi elaborazione applicata rischia di spostare le superfici oltre la "verità".</span><span class="sxs-lookup"><span data-stu-id="420f8-424">Bear in mind that spatial mapping data is intended to be as faithful as possible to real-world surfaces, so any processing you apply risks shifting your surfaces further from the 'truth'.</span></span>

<span data-ttu-id="420f8-425">Ecco alcuni esempi di diversi tipi di elaborazione mesh che possono risultare utili:</span><span class="sxs-lookup"><span data-stu-id="420f8-425">Here are some examples of different types of mesh processing that you may find useful:</span></span>

* <span data-ttu-id="420f8-426">**Riempimento di fori**</span><span class="sxs-lookup"><span data-stu-id="420f8-426">**Hole filling**</span></span>
   * <span data-ttu-id="420f8-427">Se un piccolo oggetto costituito da un materiale scuro non riesce a eseguire la scansione, lascia un foro nella superficie circostante.</span><span class="sxs-lookup"><span data-stu-id="420f8-427">If a small object made of a dark material fails to scan, it will leave a hole in the surrounding surface.</span></span>
   * <span data-ttu-id="420f8-428">I fori influiscono sull'occlusione: gli ologrammi possono essere visti "attraverso" un foro in una superficie del mondo reale presumibilmente opaca.</span><span class="sxs-lookup"><span data-stu-id="420f8-428">Holes affect occlusion: holograms can be seen 'through' a hole in a supposedly opaque real-world surface.</span></span>
   * <span data-ttu-id="420f8-429">I fori influiscono sui raycast: se si usano raycast per aiutare gli utenti a interagire con le superfici, potrebbe essere indesiderato che questi raggi passino attraverso i fori.</span><span class="sxs-lookup"><span data-stu-id="420f8-429">Holes affect raycasts: if you're using raycasts to help users interact with surfaces, it may be undesirable for these rays to pass through holes.</span></span> <span data-ttu-id="420f8-430">Una mitigazione è l'uso di un bundle di più raycast che coprono un'area di dimensioni appropriate.</span><span class="sxs-lookup"><span data-stu-id="420f8-430">One mitigation is to use a bundle of multiple raycasts covering an appropriately sized region.</span></span> <span data-ttu-id="420f8-431">In questo modo sarà possibile filtrare i risultati "outlier", in modo che anche se un raycast passa attraverso un piccolo foro, il risultato di aggregazione sarà comunque valido.</span><span class="sxs-lookup"><span data-stu-id="420f8-431">This will allow you to filter 'outlier' results, so that even if one raycast passes through a small hole, the aggregate result will still be valid.</span></span> <span data-ttu-id="420f8-432">Tuttavia, questo approccio comporta un costo di calcolo.</span><span class="sxs-lookup"><span data-stu-id="420f8-432">However, this approach comes at a computational cost.</span></span>
   * <span data-ttu-id="420f8-433">I fori influiscono sulle collisioni fisiche: un oggetto controllato dalla simulazione fisica può passare attraverso un foro nel pavimento e perdersi.</span><span class="sxs-lookup"><span data-stu-id="420f8-433">Holes affect physics collisions: an object controlled by physics simulation may drop through a hole in the floor and become lost.</span></span>
   * <span data-ttu-id="420f8-434">È possibile riempire algoritmicamente questi fori nella mesh di superficie.</span><span class="sxs-lookup"><span data-stu-id="420f8-434">It's possible to algorithmically fill such holes in the surface mesh.</span></span> <span data-ttu-id="420f8-435">Tuttavia, è necessario ottimizzare l'algoritmo in modo che i "veri buchi", ad esempio finestre e porte, non si riempia.</span><span class="sxs-lookup"><span data-stu-id="420f8-435">However, you'll need to tune your algorithm so that 'real holes' such as windows and doorways don't get filled in.</span></span> <span data-ttu-id="420f8-436">Può essere difficile distinguere in modo affidabile i "fori reali" dai "fori immaginari", quindi è necessario sperimentare diverse euristiche, ad esempio "size" e "boundary shape".</span><span class="sxs-lookup"><span data-stu-id="420f8-436">It can be difficult to reliably differentiate 'real holes' from 'imaginary holes', so you'll need to experiment with different heuristics such as 'size' and 'boundary shape'.</span></span>

* <span data-ttu-id="420f8-437">**Rimozione dell'allucinazione**</span><span class="sxs-lookup"><span data-stu-id="420f8-437">**Hallucination removal**</span></span>
   * <span data-ttu-id="420f8-438">I riflessi, le luci accese e gli oggetti in movimento possono lasciare piccole allucinazioni persistenti fluttuanti in aria.</span><span class="sxs-lookup"><span data-stu-id="420f8-438">Reflections, bright lights, and moving objects can leave small lingering 'hallucinations' floating in mid-air.</span></span>
   * <span data-ttu-id="420f8-439">Le allucinazioni influiscono sull'occlusione: le allucinazioni possono diventare visibili quando forme scure si spostano davanti e occludono altri ologrammi.</span><span class="sxs-lookup"><span data-stu-id="420f8-439">Hallucinations affect occlusion: hallucinations may become visible as dark shapes moving in front of and occluding other holograms.</span></span>
   * <span data-ttu-id="420f8-440">Le allucinazioni influiscono sui raycast: se si usano raycast per aiutare gli utenti a interagire con le superfici, questi raggi potrebbero avere un'allucinazione anziché la superficie dietro di essa.</span><span class="sxs-lookup"><span data-stu-id="420f8-440">Hallucinations affect raycasts: if you're using raycasts to help users interact with surfaces, these rays could hit a hallucination instead of the surface behind it.</span></span> <span data-ttu-id="420f8-441">Come per i buchi, una mitigazione è l'uso di molti raycast invece di un singolo raycast, ma anche in questo caso ciò avrà un costo di calcolo.</span><span class="sxs-lookup"><span data-stu-id="420f8-441">As with holes, one mitigation is to use many raycasts instead of a single raycast, but again this will come at a computational cost.</span></span>
   * <span data-ttu-id="420f8-442">Le allucinazioni influiscono sulle collisioni fisiche: un oggetto controllato dalla simulazione fisica può rimanere bloccato contro un'allucinazione e non essere in grado di spostarsi attraverso un'area di spazio apparentemente chiara.</span><span class="sxs-lookup"><span data-stu-id="420f8-442">Hallucinations affect physics collisions: an object controlled by physics simulation may become stuck against a hallucination and be unable to move through a seemingly clear area of space.</span></span>
   * <span data-ttu-id="420f8-443">È possibile filtrare tali allucinazioni dalla mesh di superficie.</span><span class="sxs-lookup"><span data-stu-id="420f8-443">It's possible to filter such hallucinations from the surface mesh.</span></span> <span data-ttu-id="420f8-444">Tuttavia, come per i fori, è necessario ottimizzare l'algoritmo in modo che gli oggetti di piccole dimensioni reali, ad esempio i paralumi e le maniglie delle porte, non venga rimosso.</span><span class="sxs-lookup"><span data-stu-id="420f8-444">However, as with holes, you'll need to tune your algorithm so that real small objects such as lamp-stands and door handles don't get removed.</span></span>

* <span data-ttu-id="420f8-445">**Definizione di movimenti uniformi**</span><span class="sxs-lookup"><span data-stu-id="420f8-445">**Smoothing**</span></span>
   * <span data-ttu-id="420f8-446">Il mapping spaziale può restituire superfici che sembrano essere approssimative o "rumorose" rispetto alle controparti reali.</span><span class="sxs-lookup"><span data-stu-id="420f8-446">Spatial mapping may return surfaces that appear to be rough or 'noisy' in comparison to their real-world counterparts.</span></span>
   * <span data-ttu-id="420f8-447">La leviganza influisce sulle collisioni fisiche: se il pavimento è ruvido, una palla da palla da palla fisicamente simulata potrebbe non rotolare senza problemi su di essa in linea retta.</span><span class="sxs-lookup"><span data-stu-id="420f8-447">Smoothness affects physics collisions: if the floor is rough, a physically simulated golf ball may not roll smoothly across it in a straight line.</span></span>
   * <span data-ttu-id="420f8-448">L'uniformità influisce sul rendering: se una superficie viene visualizzata direttamente, le normali della superficie approssimativa possono influire sull'aspetto e interrompere un aspetto "pulito".</span><span class="sxs-lookup"><span data-stu-id="420f8-448">Smoothness affects rendering: if a surface is visualized directly, rough surface normals can affect its appearance and disrupt a 'clean' look.</span></span> <span data-ttu-id="420f8-449">È possibile attenuare questo problema usando l'illuminazione e le trame appropriate nello shader usato per eseguire il rendering della superficie.</span><span class="sxs-lookup"><span data-stu-id="420f8-449">It's possible to mitigate this by using appropriate lighting and textures in the shader that is used to render the surface.</span></span>
   * <span data-ttu-id="420f8-450">È possibile uniformare la ruvidità in una mesh di superficie.</span><span class="sxs-lookup"><span data-stu-id="420f8-450">It's possible to smooth out roughness in a surface mesh.</span></span> <span data-ttu-id="420f8-451">Tuttavia, questo può allontanare la superficie dalla superficie reale corrispondente.</span><span class="sxs-lookup"><span data-stu-id="420f8-451">However, this may push the surface further away from the corresponding real-world surface.</span></span> <span data-ttu-id="420f8-452">Mantenere una corrispondenza accurata è importante per produrre occlusione accurata degli ologrammi e per consentire agli utenti di ottenere interazioni precise e prevedibili con le superfici olografiche.</span><span class="sxs-lookup"><span data-stu-id="420f8-452">Maintaining a close correspondence is important to produce accurate hologram occlusion, and to enable users to achieve precise and predictable interactions with holographic surfaces.</span></span>
   * <span data-ttu-id="420f8-453">Se è necessaria solo una modifica originale, può essere sufficiente uniformare le normali dei vertici senza modificare le posizioni dei vertici.</span><span class="sxs-lookup"><span data-stu-id="420f8-453">If only a cosmetic change is required, it may be sufficient to smooth vertex normals without changing vertex positions.</span></span>

* <span data-ttu-id="420f8-454">**Ricerca di piani**</span><span class="sxs-lookup"><span data-stu-id="420f8-454">**Plane finding**</span></span>
   * <span data-ttu-id="420f8-455">Esistono molte forme di analisi che un'applicazione potrebbe voler eseguire sulle superfici fornite dal mapping spaziale.</span><span class="sxs-lookup"><span data-stu-id="420f8-455">There are many forms of analysis that an application may wish to perform on the surfaces provided by spatial mapping.</span></span>
   * <span data-ttu-id="420f8-456">Un semplice esempio è la ricerca di piani. identificazione delle aree delimitate, principalmente planari delle superfici.</span><span class="sxs-lookup"><span data-stu-id="420f8-456">One simple example is 'plane finding'; identifying bounded, mostly planar regions of surfaces.</span></span>
   * <span data-ttu-id="420f8-457">Le aree planari possono essere usate come superfici di lavoro olografiche, aree in cui il contenuto olografico può essere inserito automaticamente dall'applicazione.</span><span class="sxs-lookup"><span data-stu-id="420f8-457">Planar regions can be used as holographic work-surfaces, regions where holographic content can be automatically placed by the application.</span></span>
   * <span data-ttu-id="420f8-458">Le aree planari possono vincolare l'interfaccia utente per guidare gli utenti a interagire con le superfici più adatte alle proprie esigenze.</span><span class="sxs-lookup"><span data-stu-id="420f8-458">Planar regions can constrain the user interface, to guide users to interact with the surfaces that best suit their needs.</span></span>
   * <span data-ttu-id="420f8-459">Le aree planari possono essere usate come nel mondo reale, per controparti olografiche di oggetti funzionali come schermi LCD, tabelle o lavagne.</span><span class="sxs-lookup"><span data-stu-id="420f8-459">Planar regions can be used as in the real world, for holographic counterparts to functional objects such as LCD screens, tables or whiteboards.</span></span>
   * <span data-ttu-id="420f8-460">Le aree planari possono definire aree di riproduzione, che formano la base dei livelli dei videogiochi.</span><span class="sxs-lookup"><span data-stu-id="420f8-460">Planar regions can define play areas, forming the basis of video game levels.</span></span>
   * <span data-ttu-id="420f8-461">Le aree planari possono aiutare gli agenti virtuali a spostarsi nel mondo reale, identificando le aree del piano su cui è probabile che passino persone reali.</span><span class="sxs-lookup"><span data-stu-id="420f8-461">Planar regions can aid virtual agents to navigate the real world, by identifying the areas of floor that real people are likely to walk on.</span></span>

## <a name="prototyping-and-debugging"></a><span data-ttu-id="420f8-462">Prototipazione e debug</span><span class="sxs-lookup"><span data-stu-id="420f8-462">Prototyping and debugging</span></span>

### <a name="useful-tools"></a><span data-ttu-id="420f8-463">Strumenti utili</span><span class="sxs-lookup"><span data-stu-id="420f8-463">Useful tools</span></span>

* <span data-ttu-id="420f8-464">[L'emulatore HoloLens](../develop/platform-capabilities-and-apis/using-the-hololens-emulator.md) può essere usato per sviluppare applicazioni usando il mapping spaziale senza accesso a un dispositivo HoloLens fisico.</span><span class="sxs-lookup"><span data-stu-id="420f8-464">The [HoloLens emulator](../develop/platform-capabilities-and-apis/using-the-hololens-emulator.md) can be used to develop applications using spatial mapping without access to a physical HoloLens.</span></span> <span data-ttu-id="420f8-465">Consente di simulare una sessione live in un dispositivo HoloLens in un ambiente realistico, con tutti i dati normalmente utilizzati dall'applicazione, inclusi il movimento di HoloLens, i sistemi di coordinate spaziali e le mesh di mapping spaziale.</span><span class="sxs-lookup"><span data-stu-id="420f8-465">It allows you to simulate a live session on a HoloLens in a realistic environment, with all of the data your application would normally consume, including HoloLens motion, spatial coordinate systems, and spatial mapping meshes.</span></span> <span data-ttu-id="420f8-466">Può essere usato per fornire un input affidabile e ripetibile, che può essere utile per il debug dei problemi e la valutazione delle modifiche apportate al codice.</span><span class="sxs-lookup"><span data-stu-id="420f8-466">This can be used to provide reliable, repeatable input, which can be useful for debugging problems and evaluating changes to your code.</span></span>
* <span data-ttu-id="420f8-467">Per riprodurre uno scenario, acquisire i dati di mapping spaziale in rete da un dispositivo HoloLens live, quindi salvarli su disco e riutilizzarli nelle sessioni di debug successive.</span><span class="sxs-lookup"><span data-stu-id="420f8-467">To reproduce a scenario, capture spatial mapping data over the network from a live HoloLens, then save it to disk and reuse it in later debugging sessions.</span></span>
* <span data-ttu-id="420f8-468">La [visualizzazione 3D del portale per](../develop/platform-capabilities-and-apis/using-the-windows-device-portal.md#3d-view) dispositivi di Windows consente di visualizzare tutte le superfici spaziali attualmente disponibili tramite il sistema di mapping spaziale.</span><span class="sxs-lookup"><span data-stu-id="420f8-468">The [Windows device portal 3D view](../develop/platform-capabilities-and-apis/using-the-windows-device-portal.md#3d-view) provides a way to see all of the spatial surfaces currently available via the spatial mapping system.</span></span> <span data-ttu-id="420f8-469">Ciò fornisce una base di confronto per le superfici spaziali all'interno dell'applicazione; Ad esempio, è possibile determinare facilmente se le superfici spaziali mancano o vengono visualizzate nella posizione errata.</span><span class="sxs-lookup"><span data-stu-id="420f8-469">This provides a basis of comparison for the spatial surfaces inside your application; for example, you can easily tell if any spatial surfaces are missing or are being displayed in the wrong place.</span></span>

### <a name="general-prototyping-guidance"></a><span data-ttu-id="420f8-470">Linee guida generali sulla prototipazione</span><span class="sxs-lookup"><span data-stu-id="420f8-470">General prototyping guidance</span></span>

* <span data-ttu-id="420f8-471">Poiché [gli](spatial-mapping.md#what-influences-spatial-mapping-quality) errori nei dati di mapping spaziale possono influire fortemente sull'esperienza dell'utente, è consigliabile testare l'applicazione in un'ampia gamma di ambienti.</span><span class="sxs-lookup"><span data-stu-id="420f8-471">Because [errors](spatial-mapping.md#what-influences-spatial-mapping-quality) in the spatial mapping data may strongly affect your user's experience, we recommend that you test your application in a wide variety of environments.</span></span>
* <span data-ttu-id="420f8-472">Non rimanere bloccati nell'abitudine di testare sempre nella stessa posizione, ad esempio alla scrivania.</span><span class="sxs-lookup"><span data-stu-id="420f8-472">Don't get trapped in the habit of always testing in the same location, for example at your desk.</span></span> <span data-ttu-id="420f8-473">Assicurarsi di testare su diverse superfici di diverse posizioni, forme, dimensioni e materiali.</span><span class="sxs-lookup"><span data-stu-id="420f8-473">Make sure to test on various surfaces of different positions, shapes, sizes, and materials.</span></span>
* <span data-ttu-id="420f8-474">Analogamente, anche se i dati sintetici o registrati possono essere utili per il debug, non fare troppo affidamento sui pochi test case.</span><span class="sxs-lookup"><span data-stu-id="420f8-474">Similarly, while synthetic or recorded data can be useful for debugging, don't become too reliant upon the same few test cases.</span></span> <span data-ttu-id="420f8-475">Ciò potrebbe ritardare la ricerca di problemi importanti individuati in precedenza da test più diversi.</span><span class="sxs-lookup"><span data-stu-id="420f8-475">This may delay finding important issues that more varied testing would have caught earlier.</span></span>
* <span data-ttu-id="420f8-476">È buona idea eseguire test con utenti reali (e idealmente non raggiungibili), perché potrebbero non usare HoloLens o l'applicazione esattamente come si fa.</span><span class="sxs-lookup"><span data-stu-id="420f8-476">It's a good idea to perform testing with real (and ideally uncoached) users, because they may not use the HoloLens or your application in exactly the same way that you do.</span></span> <span data-ttu-id="420f8-477">In effetti, può sorprendere quanto possono essere divergenti il comportamento, le conoscenze e i presupposti delle persone.</span><span class="sxs-lookup"><span data-stu-id="420f8-477">In fact, it may surprise you how divergent people's behavior, knowledge, and assumptions can be!</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="420f8-478">Risoluzione dei problemi</span><span class="sxs-lookup"><span data-stu-id="420f8-478">Troubleshooting</span></span>

* <span data-ttu-id="420f8-479">Per orientare correttamente le mesh di superficie, ogni GameObject deve essere attivo prima di essere inviato a SurfaceObserver per costruire la mesh.</span><span class="sxs-lookup"><span data-stu-id="420f8-479">In order for the surface meshes to be orientated correctly, each GameObject needs to be active before it's sent to the SurfaceObserver to have its mesh constructed.</span></span> <span data-ttu-id="420f8-480">In caso contrario, le mesh verranno mostrate nello spazio, ma ruotate in angolazioni strane.</span><span class="sxs-lookup"><span data-stu-id="420f8-480">Otherwise, the meshes will show up in your space but rotated at weird angles.</span></span>
* <span data-ttu-id="420f8-481">L'oggetto GameObject che esegue lo script che comunica con SurfaceObserver deve essere impostato sull'origine.</span><span class="sxs-lookup"><span data-stu-id="420f8-481">The GameObject that runs the script that communicates with the SurfaceObserver needs to be set to the origin.</span></span> <span data-ttu-id="420f8-482">In caso contrario, tutti gli oggetti GameObject creati e inviati a SurfaceObserver per costruire le mesh avranno un offset uguale all'offset dell'oggetto gioco padre.</span><span class="sxs-lookup"><span data-stu-id="420f8-482">Otherwise, all of GameObjects that you create and send to the SurfaceObserver to have their meshes constructed will have an offset equal to the offset of the Parent Game Object.</span></span> <span data-ttu-id="420f8-483">In questo modo le mesh possono essere mostrate a diversi metri di distanza, il che rende difficile eseguire il debug di ciò che sta succedendo.</span><span class="sxs-lookup"><span data-stu-id="420f8-483">This can make your meshes show up several meters away, which makes it hard to debug what is going on.</span></span>

## <a name="see-also"></a><span data-ttu-id="420f8-484">Vedi anche</span><span class="sxs-lookup"><span data-stu-id="420f8-484">See also</span></span>

* [<span data-ttu-id="420f8-485">Sistemi di coordinate</span><span class="sxs-lookup"><span data-stu-id="420f8-485">Coordinate systems</span></span>](coordinate-systems.md)
* [<span data-ttu-id="420f8-486">Mapping spaziale in DirectX</span><span class="sxs-lookup"><span data-stu-id="420f8-486">Spatial mapping in DirectX</span></span>](../develop/native/spatial-mapping-in-directx.md)
* [<span data-ttu-id="420f8-487">Mapping spaziale in Unity</span><span class="sxs-lookup"><span data-stu-id="420f8-487">Spatial mapping in Unity</span></span>](../develop/unity/spatial-mapping-in-unity.md)
* [<span data-ttu-id="420f8-488">Comprensione della scena</span><span class="sxs-lookup"><span data-stu-id="420f8-488">Scene Understanding</span></span>](scene-understanding.md)
* [<span data-ttu-id="420f8-489">Visualizzazione della scansione dello spazio</span><span class="sxs-lookup"><span data-stu-id="420f8-489">Room scan visualization</span></span>](room-scan-visualization.md)
* [<span data-ttu-id="420f8-490">Progettazione dell'audio spaziale</span><span class="sxs-lookup"><span data-stu-id="420f8-490">Spatial sound design</span></span>](spatial-sound-design.md)
* [<span data-ttu-id="420f8-491">Case study - Guardare attraverso fori nella realtà</span><span class="sxs-lookup"><span data-stu-id="420f8-491">Case study - Looking through holes in your reality</span></span>](../out-of-scope/case-study-looking-through-holes-in-your-reality.md)
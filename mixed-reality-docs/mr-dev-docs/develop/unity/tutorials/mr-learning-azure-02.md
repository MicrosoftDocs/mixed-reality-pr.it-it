---
title: Integrazione di Archiviazione di Azure
description: Completa questo corso per apprendere come implementare Archiviazione tabelle di Azure e Archiviazione BLOB di Azure in un'applicazione HoloLens 2.
author: jessemcculloch
ms.author: jemccull
ms.date: 02/05/2021
ms.topic: article
keywords: realtà mista, unity, esercitazione, hololens, hololens 2, archiviazione di azure, servizi cloud di azure, Windows 10
ms.localizationpriority: high
ms.openlocfilehash: cebf86901ec7b91888e1e46a13e5dee47f640c6c
ms.sourcegitcommit: 68140e9ce84e69a99c2b3d970c7b8f2927a7fc93
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 02/05/2021
ms.locfileid: "99590563"
---
# <a name="2-integrating-azure-storage"></a><span data-ttu-id="7372f-104">2. Integrazione di Archiviazione di Azure</span><span class="sxs-lookup"><span data-stu-id="7372f-104">2. Integrating Azure storage</span></span>

<span data-ttu-id="7372f-105">In questa esercitazione apprenderai come salvare dati di entità in Archiviazione tabelle di Azure e immagini di anteprima in Archiviazione BLOB di Azure.</span><span class="sxs-lookup"><span data-stu-id="7372f-105">In this tutorial, you will learn how to save entity data to Azure Table storage and thumbnail images to Azure Blob storage.</span></span> <span data-ttu-id="7372f-106">Questa funzionalità consentirà di archiviare e recuperare *oggetti tracciati* con dati come ID, nome, immagine di anteprima e così via tra sessioni e dispositivi nel cloud.</span><span class="sxs-lookup"><span data-stu-id="7372f-106">This feature will allow us to store and retrieve *Tracked Objects* with data like ID, Name, Thumbnail Image, etc. across sessions and devices to the cloud.</span></span>

## <a name="objectives"></a><span data-ttu-id="7372f-107">Obiettivi</span><span class="sxs-lookup"><span data-stu-id="7372f-107">Objectives</span></span>

* <span data-ttu-id="7372f-108">Apprendere le nozioni di base relative ad Archiviazione di Azure</span><span class="sxs-lookup"><span data-stu-id="7372f-108">Learn the basics about Azure storage</span></span>
* <span data-ttu-id="7372f-109">Apprendere come archiviare, modificare e recuperare i dati dall'archiviazione tabelle</span><span class="sxs-lookup"><span data-stu-id="7372f-109">Learn how to store, modify and retrieve data from Table storage</span></span>
* <span data-ttu-id="7372f-110">Apprendere come archiviare ed eliminare immagini dall'archiviazione BLOB</span><span class="sxs-lookup"><span data-stu-id="7372f-110">Learn how to store and delete images from Blob storage</span></span>

## <a name="understanding-azure-storage"></a><span data-ttu-id="7372f-111">Informazioni su Archiviazione di Azure</span><span class="sxs-lookup"><span data-stu-id="7372f-111">Understanding Azure storage</span></span>

<span data-ttu-id="7372f-112">**Archiviazione di Azure** è una soluzione di archiviazione Microsoft sul cloud in grado di coprire numerosi scenari e requisiti.</span><span class="sxs-lookup"><span data-stu-id="7372f-112">**Azure storage** is a Microsoft storage solution on the cloud that can cover many scenarios and requirements.</span></span> <span data-ttu-id="7372f-113">Si tratta di una soluzione con scalabilità elevata facilmente accessibile per gli sviluppatori.</span><span class="sxs-lookup"><span data-stu-id="7372f-113">It can scale massively and is easily approachable by developers.</span></span> <span data-ttu-id="7372f-114">Tutti i servizi possono essere usati con un **account di archiviazione di Azure**.</span><span class="sxs-lookup"><span data-stu-id="7372f-114">All services can be consumed under the umbrella of an **Azure storage Account**.</span></span> <span data-ttu-id="7372f-115">Per questo caso d'uso, verranno usati i servizi *archiviazione tabelle* e *archiviazione BLOB*.</span><span class="sxs-lookup"><span data-stu-id="7372f-115">For our use case we will use *Table storage* and *Blob storage*.</span></span>

<span data-ttu-id="7372f-116">Sono disponibili altre informazioni sui [servizi Archiviazione di Azure](https://docs.microsoft.com/azure/storage/blobs/storage-blobs-overview).</span><span class="sxs-lookup"><span data-stu-id="7372f-116">Learn more about [Azure storage services](https://docs.microsoft.com/azure/storage/blobs/storage-blobs-overview).</span></span>

### <a name="azure-table-storage"></a><span data-ttu-id="7372f-117">Archiviazione tabelle di Azure</span><span class="sxs-lookup"><span data-stu-id="7372f-117">Azure Table storage</span></span>

<span data-ttu-id="7372f-118">Questo servizio consente di archiviare i dati in modalità NoSQL e in questo progetto verrà usato per archiviare informazioni sull'*oggetto tracciato*, ad esempio nome, descrizione, ID ancoraggio nello spazio e altro ancora.</span><span class="sxs-lookup"><span data-stu-id="7372f-118">This services allows us to store data in a NoSQL fashion, in this project we will use it to store information about the *Tracked Object* such as: name, description, spatial anchor id, and more.</span></span>

<span data-ttu-id="7372f-119">Nel contesto dell'applicazione demo sono necessarie due tabelle, una per archiviare i dati relativi al progetto con informazioni sullo stato dei modelli con training (altre informazioni sono disponibili nell'esercitazione [Integrazione di Visione personalizzata di Azure](mr-learning-azure-03.md)) e una seconda tabella per archiviare le informazioni sugli *oggetti tracciati*.</span><span class="sxs-lookup"><span data-stu-id="7372f-119">In context of the demo application, you need two Tables, one to store information about the project with information about the state of trained models more about that in the ([Integrating Azure Custom Vision](mr-learning-azure-03.md)) tutorial and a second table to store information about *Tracked Objects*.</span></span>

<span data-ttu-id="7372f-120">Sono disponibili altre informazioni su [Archiviazione tabelle di Azure](https://docs.microsoft.com/azure/storage/tables/table-storage-overview).</span><span class="sxs-lookup"><span data-stu-id="7372f-120">Learn more about [Azure Table storage](https://docs.microsoft.com/azure/storage/tables/table-storage-overview).</span></span>

### <a name="azure-blob-storage"></a><span data-ttu-id="7372f-121">Archiviazione BLOB di Azure</span><span class="sxs-lookup"><span data-stu-id="7372f-121">Azure Blob storage</span></span>

<span data-ttu-id="7372f-122">Questo servizio consente di archiviare file binari di grandi dimensioni e lo userai per archiviare le foto acquisite per *oggetti tracciati* come anteprima.</span><span class="sxs-lookup"><span data-stu-id="7372f-122">This service allows to store large binary files, you will use this to store photos taken for *Tracked Objects* as thumbnail.</span></span>
<span data-ttu-id="7372f-123">Per l'applicazione demo necessiti di un contenitore BLOB per archiviare le immagini.</span><span class="sxs-lookup"><span data-stu-id="7372f-123">For of the demo application you need one Blob Container to store the images.</span></span>

<span data-ttu-id="7372f-124">Sono disponibili altre informazioni su [Archiviazione BLOB di Azure](https://docs.microsoft.com/azure/storage/blobs/storage-blobs-introduction).</span><span class="sxs-lookup"><span data-stu-id="7372f-124">Learn more about [Azure Blob storage](https://docs.microsoft.com/azure/storage/blobs/storage-blobs-introduction).</span></span>

## <a name="preparing-azure-storage"></a><span data-ttu-id="7372f-125">Preparazione di Archiviazione di Azure</span><span class="sxs-lookup"><span data-stu-id="7372f-125">Preparing Azure Storage</span></span>

<span data-ttu-id="7372f-126">Per usare i servizi Archiviazione di Azure, necessiterai di un account di archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="7372f-126">To consume the Azure storage services you will need an Azure storage account.</span></span> <span data-ttu-id="7372f-127">Per creare un account di archiviazione, vedi [Creare un account di archiviazione](https://docs.microsoft.com/azure/storage/common/storage-account-create?tabs=azure-portal).</span><span class="sxs-lookup"><span data-stu-id="7372f-127">To create a storage account, see [Create a storage account](https://docs.microsoft.com/azure/storage/common/storage-account-create?tabs=azure-portal).</span></span> <span data-ttu-id="7372f-128">Per altre informazioni sugli account di archiviazione, vedi [Panoramica dell'account di archiviazione di Azure](https://docs.microsoft.com/azure/storage/common/storage-account-overview).</span><span class="sxs-lookup"><span data-stu-id="7372f-128">To learn more about storage accounts, see [Azure storage account overview](https://docs.microsoft.com/azure/storage/common/storage-account-overview).</span></span>

<span data-ttu-id="7372f-129">Dopo aver creato un account di archiviazione, puoi recuperare dal **portale di Azure** la stringa di connessione, che sarà necessaria nella sezione successiva di questa lezione.</span><span class="sxs-lookup"><span data-stu-id="7372f-129">Once you have a storage account, you can retrieve the connection string from the **Azure Portal** which will be needed in the next section of this lesson.</span></span>

### <a name="optional-azure-storage-explorer"></a><span data-ttu-id="7372f-130">Azure Storage Explorer facoltativo</span><span class="sxs-lookup"><span data-stu-id="7372f-130">Optional Azure Storage Explorer</span></span>

<span data-ttu-id="7372f-131">Sebbene sia possibile visualizzare e verificare tutte le modifiche dall'interfaccia utente all'interno dell'applicazione, è consigliabile installare [Azure Storage Explorer](https://azure.microsoft.com/features/storage-explorer/).</span><span class="sxs-lookup"><span data-stu-id="7372f-131">While you can see and verify all data changes from the UI inside the application, we recommend to install [Azure Storage Explorer](https://azure.microsoft.com/features/storage-explorer/).</span></span> <span data-ttu-id="7372f-132">Questo strumento consente di visualizzare i dati in Archiviazione di Azure ed è molto utile per il debug e l'apprendimento.</span><span class="sxs-lookup"><span data-stu-id="7372f-132">This tool allows you to visually see the data in the Azure storage and is of great help when debugging and learning.</span></span>

> [!TIP]
> <span data-ttu-id="7372f-133">Per i test dall'editor di Unity puoi usare un emulatore locale:</span><span class="sxs-lookup"><span data-stu-id="7372f-133">For testing from inside the Unity editor you can use a local emulator:</span></span>
>
> * <span data-ttu-id="7372f-134">in Windows 10 è possibile usare l'[Emulatore di archiviazione di Azure](https://docs.microsoft.com/azure/storage/common/storage-use-emulator)</span><span class="sxs-lookup"><span data-stu-id="7372f-134">on Windows 10 you can use [Azure Storage Emulator](https://docs.microsoft.com/azure/storage/common/storage-use-emulator)</span></span>
> * <span data-ttu-id="7372f-135">in MacOS/Linux puoi usare l'[immagine Azurite Docker](https://hub.docker.com/_/microsoft-azure-storage-azurite) per Docker</span><span class="sxs-lookup"><span data-stu-id="7372f-135">on MacOS/Linux you can use [Azurite Docker Image](https://hub.docker.com/_/microsoft-azure-storage-azurite) for Docker</span></span>

## <a name="preparing-the-scene"></a><span data-ttu-id="7372f-136">Preparazione della scena</span><span class="sxs-lookup"><span data-stu-id="7372f-136">Preparing the scene</span></span>

<span data-ttu-id="7372f-137">Nella finestra Hierarchy (Gerarchia) individua l'oggetto **DataManager** e selezionalo.</span><span class="sxs-lookup"><span data-stu-id="7372f-137">In the Hierarchy window, locate the **DataManager** object and select it.</span></span>

![Unity con i campi di configurazione del componente di script DataManager visualizzati in Inspector](images/mr-learning-azure/tutorial2-section4-step1-1.png)

<span data-ttu-id="7372f-139">Dalla finestra Inspector (Controllo) noterai che tutte le impostazioni relative ad **Archiviazione di Azure** sono contenute nel componente **DataManager (script)** .</span><span class="sxs-lookup"><span data-stu-id="7372f-139">From the Inspector window you will see that the **DataManager (script)** component is where all **Azure storage** related settings are kept.</span></span> <span data-ttu-id="7372f-140">Tutte le impostazioni pertinenti sono già impostate, devi solo sostituire il campo della *stringa di connessione* con la stringa che puoi recuperare dal portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="7372f-140">All relevant settings are already set, you just need to replace the *Connection String* field with the one you can retrieve from the Azure Portal.</span></span> <span data-ttu-id="7372f-141">Se usi una soluzione emulatore di archiviazione di Azure locale, puoi mantenere il valore della *stringa di connessione* già fornita.</span><span class="sxs-lookup"><span data-stu-id="7372f-141">If you are using a local Azure storage emulator solution, then you can keep the already provided *Connection String*.</span></span>

<span data-ttu-id="7372f-142">Il componente **DataManager (script)** è responsabile della comunicazione con i servizi **archiviazione tabelle** e **archiviazione BLOB** usati da altri script di controllo nei componenti dell'interfaccia utente.</span><span class="sxs-lookup"><span data-stu-id="7372f-142">The **DataManager (script)** is responsible for talking to the **Table storage** and **Blob storage** which is consumed by other controller scripts on the UI components.</span></span>

## <a name="writing-and-reading-data-from-azure-table-storage"></a><span data-ttu-id="7372f-143">Scrittura e lettura di dati da Archiviazione tabelle di Azure</span><span class="sxs-lookup"><span data-stu-id="7372f-143">Writing and reading data from Azure Table storage</span></span>

<span data-ttu-id="7372f-144">Con tutti gli elementi pronti, puoi ora creare un *oggetto tracciato*.</span><span class="sxs-lookup"><span data-stu-id="7372f-144">With everything prepared it's time to create a *Tracked Object*.</span></span>

<span data-ttu-id="7372f-145">Apri l'applicazione in HoloLens e fai clic su **Set Object** (Imposta oggetto). Potrai osservare il modo in cui l'oggetto *EnterObjectName* diventa attivo nella gerarchia.</span><span class="sxs-lookup"><span data-stu-id="7372f-145">Open the application on your HoloLens, click on the **Set Object** and you will see how the *EnterObjectName* object will become active in the hierarchy.</span></span> <span data-ttu-id="7372f-146">In questo menu fai clic sulla *barra di ricerca* e digita il nome che desideri assegnare all'*oggetto tracciato*.</span><span class="sxs-lookup"><span data-stu-id="7372f-146">In this menu click on the *search bar* and type in the name you want to give the *Tracked Object*.</span></span> <span data-ttu-id="7372f-147">Dopo aver fornito un nome, fai clic sul pulsante **Set Object** (Imposta oggetto).</span><span class="sxs-lookup"><span data-stu-id="7372f-147">After providing a name click on the **Set object** button.</span></span> <span data-ttu-id="7372f-148">In Archiviazione tabelle di Azure verrà creato l'*oggetto tracciato* e sarà ora visibile **Object Card** (Scheda oggetto).</span><span class="sxs-lookup"><span data-stu-id="7372f-148">This will create the *Tracked Object* on the Azure Table storage and you will see now the **Object Card**.</span></span>

<span data-ttu-id="7372f-149">**Object Card** (Scheda oggetto) è una rappresentazione dell'interfaccia utente dell'*oggetto tracciato* e svolgerà un ruolo importante più volte in questa serie di esercitazioni.</span><span class="sxs-lookup"><span data-stu-id="7372f-149">This **Object Card** is a UI representation of the *Tracked Object* and will have an important role several times in this tutorial series.</span></span>

<span data-ttu-id="7372f-150">A questo punto, fai clic sulla *casella di testo* della descrizione e digita "Car", quindi fai clic sul pulsante **Save** (Salva) per salvare le modifiche.</span><span class="sxs-lookup"><span data-stu-id="7372f-150">Now click on the description *text box* and type in "Car", after that click on the **Save** button to save the changes.</span></span> <span data-ttu-id="7372f-151">Arresta l'applicazione ed eseguila di nuovo.</span><span class="sxs-lookup"><span data-stu-id="7372f-151">Stop the application and rerun it.</span></span>

<span data-ttu-id="7372f-152">Fai clic ora su **Search Object** (Cerca oggetto) e digita nella *barra di ricerca* il nome usato in precedenza quando hai creato l'*oggetto tracciato*.</span><span class="sxs-lookup"><span data-stu-id="7372f-152">Now this time click on **Search Object** and type in the *search bar* the name you have used before when creating the *Tracked Object*.</span></span> <span data-ttu-id="7372f-153">Noterai che da **Archiviazione tabelle di Azure** viene recuperato **Object Card** (Scheda oggetto) con tutti i dati.</span><span class="sxs-lookup"><span data-stu-id="7372f-153">You will see that the **Object Card** with all the data is retrieved from the **Azure Table storage**.</span></span>

<span data-ttu-id="7372f-154">Sei libero di chiudere **Object Card** (Scheda oggetto) e di creare nuovi *oggetti tracciati* e modificare i relativi dati.</span><span class="sxs-lookup"><span data-stu-id="7372f-154">Feel free to close the **Object Card** and create new *Tracked Objects* and edit their data.</span></span>

> [!TIP]
> <span data-ttu-id="7372f-155">Se hai installato [Azure Storage Explorer](https://azure.microsoft.com/features/storage-explorer/), esamina la tabella degli *oggetti* e vedrai l'*oggetto tracciato* creato.</span><span class="sxs-lookup"><span data-stu-id="7372f-155">If you have installed the [Azure Storage Explorer](https://azure.microsoft.com/features/storage-explorer/) then look into the *objects* table and you will see there the created *Tracked Object*.</span></span>

## <a name="uploading-and-download-image-from-azure-blob-storage"></a><span data-ttu-id="7372f-156">Caricamento e download dell'immagine da Archiviazione BLOB di Azure</span><span class="sxs-lookup"><span data-stu-id="7372f-156">Uploading and Download image from Azure Blob storage</span></span>

<span data-ttu-id="7372f-157">In questa sezione userai Archiviazione BLOB di Azure per caricare e scaricare immagini che verranno usate come anteprime per gli *oggetti tracciati*.</span><span class="sxs-lookup"><span data-stu-id="7372f-157">In this section you will use the Azure Blob storage to upload and download images that will be used as thumbnails for *Tracked Objects*.</span></span>

> [!NOTE]
> <span data-ttu-id="7372f-158">In questa esercitazione l'applicazione acquisirà foto per caricare immagini in archiviazione BLOB.</span><span class="sxs-lookup"><span data-stu-id="7372f-158">In this tutorial the application will take photos to upload images to the Blob storage.</span></span> <span data-ttu-id="7372f-159">Se esegui questa operazione localmente dall'editor di Unity, assicurati di disporre di una webcam connessa al computer.</span><span class="sxs-lookup"><span data-stu-id="7372f-159">If you are running this locally from the Unity editor, then make sure that you have a webcam connected to your computer.</span></span>

<span data-ttu-id="7372f-160">Apri l'applicazione in HoloLens, fai clic su **Set Object** (Imposta oggetto) e digita nella *barra di ricerca* il nome "Car".</span><span class="sxs-lookup"><span data-stu-id="7372f-160">Open the application on your HoloLens, click on **Set Object** and type in the *search bar* the name "Car".</span></span> <span data-ttu-id="7372f-161">A questo punto dovresti visualizzare **Object Card** (Scheda oggetto). Fai clic sul pulsante **Camera** (Fotocamera) e ti verrà richiesto di eseguire un'operazione AirTap per acquisire una foto.</span><span class="sxs-lookup"><span data-stu-id="7372f-161">Now you should see the **Object Card**, click on the **Camera** button and you will be instructed to do an AirTap to take a photo.</span></span> <span data-ttu-id="7372f-162">Dopo aver acquisito una foto, visualizzerai un messaggio che ti informa del caricamento attivo e dopo un periodo di tempo dovresti visualizzare l'immagine nel punto in cui precedentemente si trovava il segnaposto.</span><span class="sxs-lookup"><span data-stu-id="7372f-162">After taking a photo you will see a message that informs you about the active upload and after a while the image should appear where the placeholder was before.</span></span>

<span data-ttu-id="7372f-163">A questo punto, esegui di nuovo l'applicazione e cerca l'*oggetto tracciato*. L'immagine caricata in precedenza dovrebbe visualizzarsi come anteprima.</span><span class="sxs-lookup"><span data-stu-id="7372f-163">Now rerun the application and search for the *Tracked Object* and the previously uploaded image should appear as thumbnail.</span></span>

## <a name="deleting-image-from-azure-blob-storage"></a><span data-ttu-id="7372f-164">Eliminazione di un'immagine da Archiviazione BLOB di Azure</span><span class="sxs-lookup"><span data-stu-id="7372f-164">Deleting image from Azure Blob storage</span></span>

<span data-ttu-id="7372f-165">Nella sezione precedente hai caricato nuove immagini in Archiviazione BLOB di Azure. In questa sezione eliminerai un'anteprima di immagine per gli *oggetti tracciati*.</span><span class="sxs-lookup"><span data-stu-id="7372f-165">In the previous section you uploaded new images to Azure Blob storage, in this section you will delete an image thumbnail for *Tracked Objects*.</span></span>

<span data-ttu-id="7372f-166">Apri l'applicazione in HoloLens, fai clic su **Set Object** (Imposta oggetto) e digita nella *barra di ricerca* il nome "Car".</span><span class="sxs-lookup"><span data-stu-id="7372f-166">Open the application on your HoloLens, click on **Set Object** and type in the *search bar* the name "Car".</span></span> <span data-ttu-id="7372f-167">A questo punto dovresti visualizzare **Object Card** (Scheda oggetto) con l'immagine di anteprima. Fai clic sul pulsante **Delete** (Elimina).</span><span class="sxs-lookup"><span data-stu-id="7372f-167">Now you should see the **Object Card** with the thumbnail image, click on the **Delete** button.</span></span> <span data-ttu-id="7372f-168">L'immagine di anteprima verrà sostituita dall'immagine segnaposto.</span><span class="sxs-lookup"><span data-stu-id="7372f-168">You will notice that the thumbnail image is replaced by the placeholder image.</span></span>

<span data-ttu-id="7372f-169">A questo punto, esegui di nuovo l'applicazione e cerca l'*oggetto tracciato* dell'anteprima precedentemente eliminata. Dovresti visualizzare solo l'immagine segnaposto.</span><span class="sxs-lookup"><span data-stu-id="7372f-169">Now rerun the application and search for the *Tracked Object* of the previously deleted thumbnail, you should only see the placeholder image.</span></span>

## <a name="congratulations"></a><span data-ttu-id="7372f-170">Lezione completata</span><span class="sxs-lookup"><span data-stu-id="7372f-170">Congratulations</span></span>

<span data-ttu-id="7372f-171">In questa esercitazione hai appreso come usare i servizi Archiviazione di Azure per salvare in modo permanente dati non strutturati, come in questo caso gli **oggetti tracciati** e i file binari sotto forma di immagini di anteprima per l'applicazione demo **HoloLens 2** nel cloud.</span><span class="sxs-lookup"><span data-stu-id="7372f-171">In this tutorial you learned how Azure storage services can be used to persist unstructured data, like in our case **Tracked Objects** and binaries in form of thumbnail images for the **HoloLens 2** demo application on the cloud.</span></span>

<span data-ttu-id="7372f-172">Nell'esercitazione successiva apprenderai come usare Visione personalizzata di Azure per rilevare le immagini associate a un *oggetto tracciato*.</span><span class="sxs-lookup"><span data-stu-id="7372f-172">In the next tutorial you will learn how to use Azure Custom Vision to detect images associated with a *Tracked Object*.</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="7372f-173">Esercitazione successiva: 3. Integrazione di Visione personalizzata di Azure</span><span class="sxs-lookup"><span data-stu-id="7372f-173">Next tutorial: 3. Integrating Azure Custom Vision</span></span>](mr-learning-azure-03.md)

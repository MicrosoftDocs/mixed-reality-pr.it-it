---
title: Blocco del mondo e ancoraggi spaziali in Unity
description: Informazioni su come usare gli strumenti di blocco del mondo e gli ancoraggi spaziali nelle applicazioni di realtà mista unity.
author: hferrone
ms.author: v-hferrone
ms.date: 04/7/2021
ms.topic: article
keywords: Unity, ancoraggi nello spazio, ancoraggio store, HoloLens, visore di realtà mista, visore windows mixed reality, visore di realtà virtuale, strumenti di blocco del mondo, ologrammi
ms.openlocfilehash: 4fc982244a766bb34f15b356d608f2aad18f7a88
ms.sourcegitcommit: 3e36b2fbbcc250c49aaf8ca1b6133cf0e9db69fa
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 04/16/2021
ms.locfileid: "107528771"
---
# <a name="world-locking-and-spatial-anchors-in-unity"></a><span data-ttu-id="d46ac-104">Blocco del mondo e ancoraggi spaziali in Unity</span><span class="sxs-lookup"><span data-stu-id="d46ac-104">World locking and spatial anchors in Unity</span></span>

![Immagine dell'hero degli strumenti di blocco del mondo](images/wlt-img-01.jpeg)

<span data-ttu-id="d46ac-106">Il fatto che gli ologrammi rimangano sul posto, si spostino con l'utente o in alcuni casi si posizionino rispetto ad altri ologrammi è una parte importante della creazione di applicazioni di realtà mista.</span><span class="sxs-lookup"><span data-stu-id="d46ac-106">Getting your holograms to stay in place, move with you, or in some cases position themselves relative to other holograms is a big part of creating Mixed Reality applications.</span></span> <span data-ttu-id="d46ac-107">Questo articolo illustra la soluzione consigliata con Gli strumenti di blocco del mondo, ma verrà anche illustrata la configurazione manuale degli ancoraggi nello spazio nei progetti Unity.</span><span class="sxs-lookup"><span data-stu-id="d46ac-107">This article will take you through our recommended solution using World Locking Tools, but we'll also cover manually setting up spatial anchors in your Unity projects.</span></span> <span data-ttu-id="d46ac-108">Prima di passare a qualsiasi codice, è importante comprendere in che modo Unity gestisce lo spazio delle coordinate e gli ancoraggi nel proprio motore.</span><span class="sxs-lookup"><span data-stu-id="d46ac-108">Before we jump into any code, it's important to understand how Unity handles coordinate space and anchors in its own engine.</span></span>

## <a name="world-scale-coordinate-systems"></a><span data-ttu-id="d46ac-109">Sistemi di coordinate su scala mondiale</span><span class="sxs-lookup"><span data-stu-id="d46ac-109">World-scale coordinate systems</span></span>

<span data-ttu-id="d46ac-110">Attualmente, quando si scrivono giochi, app per la visualizzazione dei dati o app di realtà virtuale, l'approccio tipico consiste nel stabilire un sistema di **coordinate** del mondo assoluto a cui tutte le altre coordinate possono eseguire in modo affidabile il mapping.</span><span class="sxs-lookup"><span data-stu-id="d46ac-110">Today, when writing games, data visualization apps, or virtual reality apps, the typical approach is to establish one absolute **world coordinate system** that all other coordinates can reliably map back to.</span></span> <span data-ttu-id="d46ac-111">In tale ambiente è sempre possibile trovare una trasformazione stabile che definisce una relazione tra due oggetti qualsiasi in quel mondo.</span><span class="sxs-lookup"><span data-stu-id="d46ac-111">In that environment, you can always find a stable transform that defines a relationship between any two objects in that world.</span></span> <span data-ttu-id="d46ac-112">Se questi oggetti non sono stati spostati, le relative trasformazioni resteranno sempre invariate.</span><span class="sxs-lookup"><span data-stu-id="d46ac-112">If you didn't move those objects, their relative transforms would always remain the same.</span></span> <span data-ttu-id="d46ac-113">Questo tipo di sistema di coordinate globale è facile da ottenere quando si esegue il rendering di un mondo puramente virtuale in cui si conosce in anticipo tutta la geometria.</span><span class="sxs-lookup"><span data-stu-id="d46ac-113">This kind of global coordinate system is easy to get right when rendering a purely virtual world where you know all of the geometry in advance.</span></span> <span data-ttu-id="d46ac-114">Le app VR su scala di stanza oggi stabiliscono in genere questo tipo di sistema di coordinate assoluto su scala di stanza con la relativa origine sul pavimento.</span><span class="sxs-lookup"><span data-stu-id="d46ac-114">Room-scale VR apps today typically establish this kind of absolute room-scale coordinate system with its origin on the floor.</span></span>

<span data-ttu-id="d46ac-115">Al contrario, un dispositivo di realtà mista senzathering, ad esempio HoloLens, ha una conoscenza dinamica del mondo basata su sensori, adattando continuamente le proprie conoscenze nel corso del tempo all'ambiente dell'utente mentre attraversano molti metri su un intero piano di un edificio.</span><span class="sxs-lookup"><span data-stu-id="d46ac-115">In contrast, an untethered mixed reality device such as HoloLens has a dynamic sensor-driven understanding of the world, continuously adjusting its knowledge over time of the user's surroundings as they walk many meters across an entire floor of a building.</span></span> <span data-ttu-id="d46ac-116">In un'esperienza su scala globale, se tutti gli ologrammi sono stati inseriti in un sistema di coordinate rigidi naive, questi ologrammi finirebbero per deviare nel tempo, in base al mondo o l'uno rispetto all'altro.</span><span class="sxs-lookup"><span data-stu-id="d46ac-116">In a world-scale experience, if you placed all your holograms in a naive rigid coordinate system, those holograms would end up drifting over time, either based on the world or relative to each other.</span></span>

<span data-ttu-id="d46ac-117">Ad esempio, il visore VR potrebbe attualmente ritiene che due posizioni nel mondo siano distanti 4 metri e quindi perfezionare tale comprensione, apprendendo che le posizioni sono di fatto a 3,9 metri di distanza.</span><span class="sxs-lookup"><span data-stu-id="d46ac-117">For example, the headset may currently believe two locations in the world to be 4 meters apart, and then later refine that understanding, learning that the locations are in fact 3.9 meters apart.</span></span> <span data-ttu-id="d46ac-118">Se questi ologrammi si trovavano inizialmente a 4 metri di distanza in un unico sistema di coordinate rigido, uno di essi apparirebbe sempre a 0,1 metri di distanza dal mondo reale.</span><span class="sxs-lookup"><span data-stu-id="d46ac-118">If those holograms had initially been placed 4 meters apart in a single rigid coordinate system, one of them would then always appear 0.1 meters off from the real world.</span></span>

<span data-ttu-id="d46ac-119">È possibile posizionare manualmente gli ancoraggi nello spazio **in** Unity per mantenere la posizione di un ologramma nel mondo fisico quando l'utente è mobile, ma ciò non consente l'auto-coerenza all'interno del mondo virtuale.</span><span class="sxs-lookup"><span data-stu-id="d46ac-119">You can manually place **spatial anchors** in Unity to maintain a hologram's position in the physical world when the user is mobile - however, this sacrifices the self-consistency within the virtual world.</span></span> <span data-ttu-id="d46ac-120">Ancoraggi diversi si spostano costantemente l'uno rispetto all'altro e si spostano anche nello spazio delle coordinate globale.</span><span class="sxs-lookup"><span data-stu-id="d46ac-120">Different anchors are constantly moving in relation to one another, and are also moving through the global coordinate space.</span></span> <span data-ttu-id="d46ac-121">In questo scenario, attività semplici come il layout diventano difficili e la simulazione fisica risulta problematica.</span><span class="sxs-lookup"><span data-stu-id="d46ac-121">In this scenario, simple tasks like layout become difficult and physics simulation problematic.</span></span>

<span data-ttu-id="d46ac-122">**World Locking Tools** consente di ottenere il meglio di entrambi i ambienti, stabilendo un singolo sistema di coordinate rigido usando una fornitura interna di ancoraggi nello spazio distribuiti in tutta la scena virtuale mentre l'utente si sposta.</span><span class="sxs-lookup"><span data-stu-id="d46ac-122">**World Locking Tools** gets you the best of both worlds, stabilizing a single rigid coordinate system using an internal supply of spatial anchors spread throughout the virtual scene as the user moves around.</span></span> <span data-ttu-id="d46ac-123">Gli strumenti analizzano le coordinate della fotocamera e gli ancoraggi nello stato di ogni fotogramma.</span><span class="sxs-lookup"><span data-stu-id="d46ac-123">The tools analyze the coordinates of the camera and those spatial anchors every frame.</span></span> <span data-ttu-id="d46ac-124">Invece di modificare le coordinate di tutti gli elementi del mondo per compensare le correzioni nelle coordinate della testa dell'utente, gli strumenti consentono invece di correggere le coordinate della testa.</span><span class="sxs-lookup"><span data-stu-id="d46ac-124">Instead of changing the coordinates of everything in the world to compensate for the corrections in the coordinates of the user's head, the tools just fix the head's coordinates instead.</span></span>

## <a name="choosing-your-world-locking-approach"></a><span data-ttu-id="d46ac-125">Scelta dell'approccio di blocco globale</span><span class="sxs-lookup"><span data-stu-id="d46ac-125">Choosing your world locking approach</span></span>

* <span data-ttu-id="d46ac-126">**È consigliabile** usare **world locking tools per tutte** le esigenze di posizionamento degli ologrammi.</span><span class="sxs-lookup"><span data-stu-id="d46ac-126">**Our recommendation** is to use **World Locking Tools** for all your hologram positioning needs.</span></span> 
    * <span data-ttu-id="d46ac-127">World Locking Tools offre un sistema di coordinate stabile che riduce al minimo le incoerenze visibili tra marcatori virtuali e reali.</span><span class="sxs-lookup"><span data-stu-id="d46ac-127">World Locking Tools provides a stable coordinate system that minimizes the visible inconsistencies between virtual and real world markers.</span></span> <span data-ttu-id="d46ac-128">In altre parole, blocca l'intera scena con un pool condiviso di ancoraggi, anziché bloccare ogni gruppo di oggetti con il singolo ancoraggio del gruppo.</span><span class="sxs-lookup"><span data-stu-id="d46ac-128">Put another way, it world-locks the entire scene with a shared pool of anchors, rather than locking each group of objects with the group's own individual anchor.</span></span>
* <span data-ttu-id="d46ac-129">**Per Unity 2019/2020 con OpenXR** o il plug-in Windows XR, è necessario usare **ARAnchorManager**</span><span class="sxs-lookup"><span data-stu-id="d46ac-129">**For Unity 2019/2020 using OpenXR or the Windows XR Plugin**, you need to use **ARAnchorManager**</span></span>
* <span data-ttu-id="d46ac-130">Per le versioni precedenti di Unity o i **progetti WSA,** è necessario usare **WorldAnchor**</span><span class="sxs-lookup"><span data-stu-id="d46ac-130">**For older Unity versions or WSA** projects, you need to use **WorldAnchor**</span></span>

## <a name="setting-up-world-locking"></a><span data-ttu-id="d46ac-131">Configurazione del blocco del mondo</span><span class="sxs-lookup"><span data-stu-id="d46ac-131">Setting up world locking</span></span> 

[!INCLUDE[](includes/world-locking/world-locking-setup.md)]

## <a name="persistent-world-locking"></a><span data-ttu-id="d46ac-132">Blocco del mondo permanente</span><span class="sxs-lookup"><span data-stu-id="d46ac-132">Persistent world locking</span></span>

<span data-ttu-id="d46ac-133">Gli ancoraggi nello spazio salvano gli ologrammi nello spazio reale tra le sessioni dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="d46ac-133">Spatial anchors save holograms in real-world space between application sessions.</span></span> <span data-ttu-id="d46ac-134">Dopo essere stati salvati nell'archivio di ancoraggio di HoloLens, possono essere trovati e caricati in sessioni diverse e sono un fallback ideale in assenza di connettività Internet.</span><span class="sxs-lookup"><span data-stu-id="d46ac-134">Once saved in the HoloLens' anchor store, they can be found and loaded in different sessions and are an ideal fallback when there's no internet connectivity.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="d46ac-135">Gli ancoraggi locali vengono archiviati nel dispositivo, mentre i dati relativi ad Ancoraggi nello spazio di Azure vengono archiviati nel cloud.</span><span class="sxs-lookup"><span data-stu-id="d46ac-135">Local anchors are stored on device, while Azure Spatial Anchors are stored in the cloud.</span></span> <span data-ttu-id="d46ac-136">Se si vuole usare i servizi cloud di Azure per archiviare gli ancoraggi, è disponibile un documento che fornisce informazioni dettagliate sull'integrazione di [Ancoraggi nello spazio di Azure](../mixed-reality-cloud-services.md#azure-spatial-anchors).</span><span class="sxs-lookup"><span data-stu-id="d46ac-136">If you're looking to use Azure cloud services to store your anchors, we have a document that can walk you through integrating [Azure Spatial Anchors](../mixed-reality-cloud-services.md#azure-spatial-anchors).</span></span> <span data-ttu-id="d46ac-137">Si noti che è possibile includere ancoraggi locali e ancoraggi di Azure nello stesso progetto senza che si verifichino conflitti.</span><span class="sxs-lookup"><span data-stu-id="d46ac-137">Note that you can have local and Azure anchors in the same project without conflict.</span></span>

[!INCLUDE[](includes/world-locking/world-locking-persistence.md)]

## <a name="sharing-coordinate-spaces"></a><span data-ttu-id="d46ac-138">Condivisione degli spazi delle coordinate</span><span class="sxs-lookup"><span data-stu-id="d46ac-138">Sharing coordinate spaces</span></span> 

<span data-ttu-id="d46ac-139">Se si vuole condividere uno spazio di coordinate bloccato a livello globale, vedere la documentazione completa [dell'esperienza condivisa.](shared-experiences-in-unity.md)</span><span class="sxs-lookup"><span data-stu-id="d46ac-139">If you want to share a world locked coordinate space, check out our comprehensive [shared experience documentation](shared-experiences-in-unity.md).</span></span>

<span data-ttu-id="d46ac-140">Si noti che Ancoraggi nello spazio di Azure non è ancora supportato direttamente in World Locking Tools e quindi le esperienze condivise richiedono la creazione manuale di ancoraggi nello spazio.</span><span class="sxs-lookup"><span data-stu-id="d46ac-140">Note that Azure Spatial Anchors is not yet supported directly within World Locking Tools, and so shared experiences will require you to manually create spatial anchors.</span></span>

## <a name="next-development-checkpoint"></a><span data-ttu-id="d46ac-141">Successivo checkpoint di sviluppo</span><span class="sxs-lookup"><span data-stu-id="d46ac-141">Next Development Checkpoint</span></span>

<span data-ttu-id="d46ac-142">Se si sta seguendo il percorso di checkpoint di sviluppo unity che è stato strutturato, si stanno esplorando i blocchi predefiniti di base di Realtà mista.</span><span class="sxs-lookup"><span data-stu-id="d46ac-142">If you're following the Unity development checkpoint journey we've laid out, you're in the midst of exploring the Mixed Reality core building blocks.</span></span> <span data-ttu-id="d46ac-143">Da qui è possibile passare al blocco predefinito successivo:</span><span class="sxs-lookup"><span data-stu-id="d46ac-143">From here, you can continue to the next building block:</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="d46ac-144">Mapping spaziale</span><span class="sxs-lookup"><span data-stu-id="d46ac-144">Spatial mapping</span></span>](spatial-mapping-in-unity.md)

<span data-ttu-id="d46ac-145">In alternativa, passare alle API e alle funzionalità della piattaforma di realtà mista:</span><span class="sxs-lookup"><span data-stu-id="d46ac-145">Or jump to Mixed Reality platform capabilities and APIs:</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="d46ac-146">Esperienze condivise</span><span class="sxs-lookup"><span data-stu-id="d46ac-146">Shared experiences</span></span>](shared-experiences-in-unity.md)

<span data-ttu-id="d46ac-147">È sempre possibile tornare ai [checkpoint per lo sviluppo con Unity](unity-development-overview.md#2-core-building-blocks) in qualsiasi momento.</span><span class="sxs-lookup"><span data-stu-id="d46ac-147">You can always go back to the [Unity development checkpoints](unity-development-overview.md#2-core-building-blocks) at any time.</span></span>

## <a name="see-also"></a><span data-ttu-id="d46ac-148">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="d46ac-148">See Also</span></span>
* [<span data-ttu-id="d46ac-149">Introduzione agli strumenti di blocco del mondo</span><span class="sxs-lookup"><span data-stu-id="d46ac-149">World Locking Tools introduction</span></span>](https://microsoft.github.io/MixedReality-WorldLockingTools-Unity/DocGen/Documentation/IntroFAQ.html)
* [<span data-ttu-id="d46ac-150">Guide di avvio rapido</span><span class="sxs-lookup"><span data-stu-id="d46ac-150">Quickstart guides</span></span>](https://microsoft.github.io/MixedReality-WorldLockingTools-Unity/DocGen/Documentation/HowTos/QuickStart.html)
* [<span data-ttu-id="d46ac-151">Esercitazioni</span><span class="sxs-lookup"><span data-stu-id="d46ac-151">Tutorials</span></span>](https://microsoft.github.io/MixedReality-WorldLockingTools-Samples/Tutorial/01_Minimal/01_Minimal.html)
* [<span data-ttu-id="d46ac-152">Esempi</span><span class="sxs-lookup"><span data-stu-id="d46ac-152">Samples</span></span>](https://microsoft.github.io/MixedReality-WorldLockingTools-Unity/DocGen/Documentation/HowTos/SampleApplications.html)
* [<span data-ttu-id="d46ac-153">Persistenza dell'ancoraggio spaziale</span><span class="sxs-lookup"><span data-stu-id="d46ac-153">Spatial anchor persistence</span></span>](../../design/coordinate-systems.md#spatial-anchor-persistence)
* <span data-ttu-id="d46ac-154"><a href="/azure/spatial-anchors" target="_blank">Ancoraggi nello spazio di Azure</a></span><span class="sxs-lookup"><span data-stu-id="d46ac-154"><a href="/azure/spatial-anchors" target="_blank">Azure Spatial Anchors</a></span></span>
* <span data-ttu-id="d46ac-155"><a href="/dotnet/api/Microsoft.Azure.SpatialAnchors" target="_blank">Azure Spatial Anchors SDK per Unity</a></span><span class="sxs-lookup"><span data-stu-id="d46ac-155"><a href="/dotnet/api/Microsoft.Azure.SpatialAnchors" target="_blank">Azure Spatial Anchors SDK for Unity</a></span></span>
* [<span data-ttu-id="d46ac-156">Scale dell'esperienza</span><span class="sxs-lookup"><span data-stu-id="d46ac-156">Experience scales</span></span>](../../design/coordinate-systems.md#mixed-reality-experience-scales)
* [<span data-ttu-id="d46ac-157">Fase spaziale</span><span class="sxs-lookup"><span data-stu-id="d46ac-157">Spatial stage</span></span>](../../design/coordinate-systems.md#stage-frame-of-reference)
* [<span data-ttu-id="d46ac-158">Perdita del rilevamento in Unity</span><span class="sxs-lookup"><span data-stu-id="d46ac-158">Tracking loss in Unity</span></span>](tracking-loss-in-unity.md)
* [<span data-ttu-id="d46ac-159">Ancoraggi nello spazio</span><span class="sxs-lookup"><span data-stu-id="d46ac-159">Spatial anchors</span></span>](../../design/spatial-anchors.md)
* [<span data-ttu-id="d46ac-160">Esperienze condivise in Unity</span><span class="sxs-lookup"><span data-stu-id="d46ac-160">Shared experiences in Unity</span></span>](shared-experiences-in-unity.md)
